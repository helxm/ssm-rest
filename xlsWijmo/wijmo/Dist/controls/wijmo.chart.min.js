/*
    *
    * Wijmo Library 5.20162.188
    * http://wijmo.com/
    *
    * Copyright(c) GrapeCity, Inc.  All rights reserved.
    *
    * Licensed under the Wijmo Commercial License.
    * sales@wijmo.com
    * http://wijmo.com/products/wijmo-5/license/
    *
    */
var __extends=this&&this.__extends||function(n,t){function r(){this.constructor=n}for(var i in t)t.hasOwnProperty(i)&&(n[i]=t[i]);n.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r)},wijmo;(function(n){var t;(function(t){'use strict';var o=function(){function n(n,t){n===void 0&&(n=0);t===void 0&&(t=0);this.x=n;this.y=t}return n}(),u,i,f,e,r;t.DataPoint=o;u=function(n){function t(t){n.call(this);this._engine=t}return __extends(t,n),Object.defineProperty(t.prototype,"engine",{get:function(){return this._engine},enumerable:!0,configurable:!0}),t}(n.EventArgs);t.RenderEventArgs=u,function(n){n[n.Png=0]="Png";n[n.Jpeg=1]="Jpeg";n[n.Svg=2]="Svg"}(t.ImageFormat||(t.ImageFormat={}));i=t.ImageFormat;f=function(u){function f(){u.apply(this,arguments);this._palette=null;this._selectionMode=t.SelectionMode.None;this._defPalette=t.Palettes.standard;this._notifyCurrentChanged=!0;this._legendHost=null;this._needBind=!1;this.rendering=new n.Event;this.rendered=new n.Event;this.selectionChanged=new n.Event}return __extends(f,u),Object.defineProperty(f.prototype,"itemsSource",{get:function(){return this._items},set:function(t){this._items!=t&&(this._cv&&(this._cv.currentChanged.removeHandler(this._cvCurrentChanged,this),this._cv.collectionChanged.removeHandler(this._cvCollectionChanged,this),this._cv=null),this._items=t,this._cv=n.asCollectionView(t),this._cv!=null&&(this._cv.currentChanged.addHandler(this._cvCurrentChanged,this),this._cv.collectionChanged.addHandler(this._cvCollectionChanged,this)),this._clearCachedValues(),this._bindChart())},enumerable:!0,configurable:!0}),Object.defineProperty(f.prototype,"collectionView",{get:function(){return this._cv},enumerable:!0,configurable:!0}),Object.defineProperty(f.prototype,"palette",{get:function(){return this._palette},set:function(t){t!=this._palette&&(this._palette=n.asArray(t),this.invalidate())},enumerable:!0,configurable:!0}),Object.defineProperty(f.prototype,"plotMargin",{get:function(){return this._plotMargin},set:function(n){n!=this._plotMargin&&(this._plotMargin=n,this.invalidate())},enumerable:!0,configurable:!0}),Object.defineProperty(f.prototype,"legend",{get:function(){return this._legend},set:function(i){i!=this._legend&&(this._legend=n.asType(i,t.Legend),this._legend!=null&&(this._legend._chart=this))},enumerable:!0,configurable:!0}),Object.defineProperty(f.prototype,"header",{get:function(){return this._header},set:function(t){t!=this._header&&(this._header=n.asString(t,!0),this.invalidate())},enumerable:!0,configurable:!0}),Object.defineProperty(f.prototype,"footer",{get:function(){return this._footer},set:function(t){t!=this._footer&&(this._footer=n.asString(t,!0),this.invalidate())},enumerable:!0,configurable:!0}),Object.defineProperty(f.prototype,"headerStyle",{get:function(){return this._headerStyle},set:function(n){n!=this._headerStyle&&(this._headerStyle=n,this.invalidate())},enumerable:!0,configurable:!0}),Object.defineProperty(f.prototype,"footerStyle",{get:function(){return this._footerStyle},set:function(n){n!=this._footerStyle&&(this._footerStyle=n,this.invalidate())},enumerable:!0,configurable:!0}),Object.defineProperty(f.prototype,"selectionMode",{get:function(){return this._selectionMode},set:function(i){i!=this._selectionMode&&(this._selectionMode=n.asEnum(i,t.SelectionMode),this.invalidate())},enumerable:!0,configurable:!0}),Object.defineProperty(f.prototype,"itemFormatter",{get:function(){return this._itemFormatter},set:function(t){t!=this._itemFormatter&&(this._itemFormatter=n.asFunction(t),this.invalidate())},enumerable:!0,configurable:!0}),f.prototype.onRendered=function(n){this.rendered.raise(this,n)},f.prototype.onRendering=function(n){this.rendering.raise(this,n)},f.prototype.saveImageToFile=function(n){var f,t,e,u;n&&n.length!==0&&n.indexOf('.')!==-1||(n='image.png');u=n.split('.');f=u[0].toLowerCase();t=u[1].toLowerCase();e=i[t[0].toUpperCase()+t.substring(1)];this.saveImageToDataUrl(e,function(n){r.downloadImage(n,f,t)})},f.prototype.saveImageToDataUrl=function(t,r){var f=n.asEnum(t,i,!1),u=i[f].toLowerCase();u&&u.length&&this._exportToImage(u,function(n){r.call(r,n)})},f.prototype._exportToImage=function(t,i){var u=new Image,e=this._currentRenderEngine.element,f;f=r.getDataUri(e);t==='svg'?i.call(null,f):(u.onload=function(){var r=document.createElement('canvas'),f=n.getElementRect(e),s,o;r.width=f.width;r.height=f.height;o=r.getContext('2d');o.fillStyle='#ffffff';o.fillRect(0,0,f.width,f.height);o.drawImage(u,0,0);s=r.toDataURL('image/'+t);i.call(null,s);r=null},u.src=f)},f.prototype.refresh=function(n){n===void 0&&(n=!0);u.prototype.refresh.call(this,n);this.isUpdating||this._refreshChart()},f.prototype.containsFocus=function(){var t=u.prototype.containsFocus.call(this),i;return t||(i=n.getActiveElement(),i&&(t=i.parentNode===this.hostElement)),t},f.prototype.onSelectionChanged=function(n){this.selectionChanged.raise(this,n)},f.prototype.onLostFocus=function(n){this._tooltip&&this._tooltip.isVisible&&this._tooltip.hide();u.prototype.onLostFocus.call(this,n)},f.prototype._cvCollectionChanged=function(){this._clearCachedValues();this._bindChart()},f.prototype._cvCurrentChanged=function(){this._notifyCurrentChanged&&this._bindChart()},f.prototype._getColor=function(n){var t=this._defPalette;return this._palette!=null&&this._palette.length>0&&(t=this._palette),t[n%t.length]},f.prototype._getColorLight=function(t){var i=this._getColor(t),r=new n.Color(i);return r!=null&&(r.a==1&&i.indexOf('rgba')==-1&&(r.a*=.7),i=r.toString()),i},f.prototype._bindChart=function(){this._needBind=!0;this.invalidate()},f.prototype._clearCachedValues=function(){},f.prototype._render=function(){},f.prototype._performBind=function(){},f.prototype._refreshChart=function(){this._needBind&&(this._needBind=!1,this._performBind());this._render(this._currentRenderEngine)},f.prototype._drawTitle=function(i,r,u,f,e){var o=t.FlexChart._CSS_TITLE,s=e?t.FlexChart._CSS_FOOTER:t.FlexChart._CSS_HEADER,h=null;if(e?this._rectFooter=null:this._rectHeader=null,u!=null){var a=null,c=null,v=null,l=null;f&&(f.fontSize&&(a=f.fontSize),f.foreground&&(c=f.foreground),f.fill&&(c=f.fill),f.fontFamily&&(v=f.fontFamily),f.halign&&(l=f.halign));i.fontSize=a;i.fontFamily=v;h=i.measureString(u,o,s,f);r.height-=h.height;c||(c=t.FlexChart._FG);i.textFill=c;e?(l=='left'?t.FlexChart._renderText(i,u,new n.Point(r.left,r.bottom),0,0,o,s,f):l=='right'?t.FlexChart._renderText(i,u,new n.Point(r.left+r.width,r.bottom),2,0,o,s,f):t.FlexChart._renderText(i,u,new n.Point(r.left+.5*r.width,r.bottom),1,0,o,s,f),this._rectFooter=new n.Rect(r.left,r.bottom,r.width,h.height)):(this._rectHeader=new n.Rect(r.left,r.top,r.width,h.height),r.top+=h.height,l=='left'?t.FlexChart._renderText(i,u,new n.Point(r.left,0),0,0,o,s,f):l=='right'?t.FlexChart._renderText(i,u,new n.Point(r.left+r.width,0),2,0,o,s,f):t.FlexChart._renderText(i,u,new n.Point(r.left+.5*r.width,0),1,0,o,s,f));i.textFill=null;i.fontSize=null;i.fontFamily=null}return r},f.prototype._toControl=function(t,i){var r,o,u,f,e;return n.isNumber(t)&&n.isNumber(i)?t=new n.Point(t,i):t instanceof MouseEvent&&(t=new n.Point(t.pageX,t.pageY)),n.asType(t,n.Point),r=t.clone(),o=this._getHostOffset(),r.x-=o.x,r.y-=o.y,u=this._getHostComputedStyle(),u&&(f=parseInt(u.paddingLeft.replace('px','')),f&&!isNaN(f)&&(r.x-=f),e=parseInt(u.paddingTop.replace('px','')),e&&!isNaN(e)&&(r.y-=e)),r},f.prototype._highlightItems=function(t,i,r){var u;if(r)for(u=0;u<t.length;u++)n.addClass(t[u],i);else for(u=0;u<t.length;u++)n.removeClass(t[u],i)},f.prototype._parseMargin=function(t){var r={};if(n.isNumber(t)&&!isNaN(t))r.top=r.bottom=r.left=r.right=n.asNumber(t);else if(n.isString(t)){var s=n.asString(t),i=s.split(' ',4),u=NaN,f=NaN,e=NaN,o=NaN;i&&(i.length==4?(u=parseFloat(i[0]),o=parseFloat(i[1]),f=parseFloat(i[2]),e=parseFloat(i[3])):i.length==2?(u=f=parseFloat(i[0]),e=o=parseFloat(i[1])):i.length==1&&(u=f=e=o=parseFloat(i[1])),isNaN(u)||(r.top=u),isNaN(f)||(r.bottom=f),isNaN(e)||(r.left=e),isNaN(o)||(r.right=o))}return r},f.prototype._showToolTip=function(n,t){var i=this,r=this._tooltip.showDelay;i._clearTimeouts();r>0?i._toShow=setTimeout(function(){i._tooltip.show(i.hostElement,n,t);i._tooltip.hideDelay>0&&(i._toHide=setTimeout(function(){i._tooltip.hide()},i._tooltip.hideDelay))},r):(i._tooltip.show(i.hostElement,n,t),i._tooltip.hideDelay>0&&(i._toHide=setTimeout(function(){i._tooltip.hide()},i._tooltip.hideDelay)))},f.prototype._hideToolTip=function(){this._clearTimeouts();this._tooltip.hide()},f.prototype._clearTimeouts=function(){this._toShow&&(clearTimeout(this._toShow),this._toShow=null);this._toHide&&(clearTimeout(this._toHide),this._toHide=null)},f.prototype._getHostOffset=function(){var t=n.getElementRect(this.hostElement);return new n.Point(t.left,t.top)},f.prototype._getHostSize=function(){var i=new n.Size,f=this.hostElement,t=this._getHostComputedStyle(),r=f.offsetWidth,u=f.offsetHeight;if(t){var e=parseFloat(t.paddingLeft.replace('px','')),o=parseFloat(t.paddingRight.replace('px','')),s=parseFloat(t.paddingTop.replace('px','')),h=parseFloat(t.paddingBottom.replace('px',''));isNaN(e)||(r-=e);isNaN(o)||(r-=o);isNaN(s)||(u-=s);isNaN(h)||(u-=h);i.width=r;i.height=u}return i},f.prototype._getHostComputedStyle=function(){var n=this.hostElement;return n&&n.ownerDocument&&n.ownerDocument.defaultView?n.ownerDocument.defaultView.getComputedStyle(this.hostElement):null},f.prototype._find=function(n,t){for(var i,r,u,f=[],e=0;e<n.childElementCount;e++)if(i=n.childNodes.item(e),t.indexOf(i.nodeName)>=0)f.push(i);else if(r=this._find(i,t),r.length>0)for(u=0;u<r.length;u++)f.push(r[u]);return f},f._WIDTH=300,f._HEIGHT=200,f._SELECTION_THRESHOLD=15,f}(n.Control);t.FlexChartBase=f;e=function(){function t(){this._keys={};this._keys.seriesName=null;this._keys.pointIndex=null;this._keys.x=null;this._keys.y=null;this._keys.value=null;this._keys.name=null}return t.prototype.replace=function(t,i){var r=this;return n.format(t,{},function(n,t,u){return r.getValue(t,i,u)})},t.prototype.getValue=function(t,i,r){return t=='seriesName'&&i.series?i.series.name:t=='pointIndex'&&i.pointIndex!==null?i.pointIndex.toFixed():t=='y'&&i.series?r?n.Globalize.format(i.y,r):i._yfmt:t=='x'&&i.series?r?n.Globalize.format(i.x,r):i._xfmt:t=='value'?r?n.Globalize.format(i.value,r):i.value:t=='name'?i.name:i.item&&i.item[t]?r?n.Globalize.format(i.item[t],r):i.item[t]:''},t}();t._KeyWords=e;r=function(){function t(){}return t.downloadImage=function(n,t,i){var r=document.createElement('a'),v='image/'+i,o,f,a;if(navigator.msSaveOrOpenBlob){n=n.substring(n.indexOf(',')+1);for(var s=atob(n),h=[],c=512,e,l,u=0;u<s.length;u+=c){for(e=s.slice(u,u+c),o=new Array(e.length),f=0;f<e.length;f++)o[f]=e.charCodeAt(f);a=new Uint8Array(o);h.push(a)}l=new Blob(h,{type:v});navigator.msSaveOrOpenBlob(l,t+'.'+i)}else r.download=t+'.'+i,r.href=n,document.body.appendChild(r),r.addEventListener("click",function(){r.parentNode.removeChild(r)}),r.click()},t.getDataUri=function(i){var v=document.createElement("div"),r=i.cloneNode(!0),s,u,f,h,c,e,y,l,o,a;return i.tagName=='svg'?(s=n.getElementRect(i),u=s.width||0,f=s.height||0,h=i.viewBox.baseVal&&i.viewBox.baseVal.width!==0?i.viewBox.baseVal.width:u,c=i.viewBox.baseVal&&i.viewBox.baseVal.height!==0?i.viewBox.baseVal.height:f):(e=i.getBBox(),u=e.x+e.width,f=e.y+e.height,r.setAttribute('transform',r.getAttribute('transform').replace(/translate\(.*?\)/,'')),h=u,c=f,l=document.createElementNS('http://www.w3.org/2000/svg','svg'),l.appendChild(r),r=l),r.setAttribute("version","1.1"),r.setAttributeNS(t.xmlns,"xmlns","http://www.w3.org/2000/svg"),r.setAttributeNS(t.xmlns,"xmlns:xlink","http://www.w3.org/1999/xlink"),r.setAttribute("width",u),r.setAttribute("height",f),r.setAttribute("viewBox","0 0 "+h+" "+c),n.addClass(r,i.parentNode&&i.parentNode.getAttribute('class')||''),v.appendChild(r),y=t.getStyles(i),o=document.createElement('style'),o.setAttribute('type','text/css'),o.innerHTML="<![CDATA[\n"+y+"\n]]>",a=document.createElement('defs'),a.appendChild(o),r.insertBefore(a,r.firstChild),'data:image/svg+xml;base64,'+window.btoa(window.unescape(encodeURIComponent(t.doctype+v.innerHTML)))},t.getStyles=function(n){var t='',i=document.styleSheets;return i==null||i.length===0?null:([].forEach.call(i,function(i){var r;try{if(i.cssRules==null||i.cssRules.length===0)return!0}catch(u){if(u.name=='SecurityError')return console.log("SecurityError. Can't read: "+i.href),!0}r=i.cssRules;[].forEach.call(r,function(i){var r=i.style,u;if(r==null)return!0;try{u=n.querySelector(i.selectorText)}catch(f){console.warn('Invalid CSS selector "'+i.selectorText+'"',f)}u?t+=i.selectorText+" { "+r.cssText+" }\n":i.cssText.match(/^@font-face/)&&(t+=i.cssText+'\n')})}),t)},t.doctype='<?xml version="1.0" standalone="no"?><!DOCTYPE svg PUBLIC "-//W3C//DTD SVG 1.1//EN" "http://www.w3.org/Graphics/SVG/1.1/DTD/svg11.dtd">',t.xmlns='http://www.w3.org/2000/xmlns/',t}()})(t=n.chart||(n.chart={}))})(wijmo||(wijmo={}));__extends=this&&this.__extends||function(n,t){function r(){this.constructor=n}for(var i in t)t.hasOwnProperty(i)&&(n[i]=t[i]);n.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r)},function(n){var t;(function(t){'use strict';var f=function(f){function e(i,r){f.call(this,i,null,!0);this._areas=[];this._keywords=new t._KeyWords;this._startAngle=0;this._innerRadius=0;this._offset=0;this._reversed=!1;this._isAnimated=!1;this._selectedItemPosition=t.Position.None;this._selectedItemOffset=0;this._rotationAngle=0;this._center=new n.Point;this._selectedOffset=new n.Point;this._selectedIndex=-1;this._angles=[];this._values=[];this._labels=[];this._pels=[];this._sum=0;this.applyTemplate('wj-control wj-flexchart',null,null);this._currentRenderEngine=new t._SvgRenderEngine(this.hostElement);this._legend=new t.Legend(this);this._tooltip=new t.ChartTooltip;this._tooltip.content='<b>{name}</b><br/>{value}';this._tooltip.showDelay=0;this._lbl=new t.PieDataLabel;this._lbl._chart=this;var u=this;this.hostElement.addEventListener('mousemove',function(t){var r=u._tooltip,e=r.content,i,f;e&&!u.isTouching&&(i=u.hitTest(t),i.distance<=r.threshold?(f=u._getLabelContent(i,u.tooltip.content),u._showToolTip(f,new n.Rect(t.clientX,t.clientY,5,5))):u._hideToolTip())});this.hostElement.addEventListener('click',function(i){var o=!0,f,e,s,r,h;u.selectionMode!=t.SelectionMode.None&&(r=u.hitTest(i),f=t.FlexChart._SELECTION_THRESHOLD,u.tooltip&&u.tooltip.threshold&&(f=u.tooltip.threshold),r.distance<=f?(r.pointIndex!=u._selectionIndex&&u.selectedItemPosition!=t.Position.None&&(o=!1),r.pointIndex!=u._selectionIndex&&u._select(r.pointIndex,!0)):u._selectedIndex>=0&&u._select(null));o&&u.isTouching&&(e=u._tooltip,s=e.content,s&&(r=u.hitTest(i),r.distance<=e.threshold?(h=u._getLabelContent(r,u.tooltip.content),u._showToolTip(h,new n.Rect(i.clientX,i.clientY,5,5))):u._hideToolTip()))});this.hostElement.addEventListener('mouseleave',function(){u._hideToolTip()});this.initialize(r);this.refresh()}return __extends(e,f),Object.defineProperty(e.prototype,"binding",{get:function(){return this._binding},set:function(t){t!=this._binding&&(this._binding=n.asString(t,!0),this._bindChart())},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"bindingName",{get:function(){return this._bindingName},set:function(t){t!=this._bindingName&&(this._bindingName=n.asString(t,!0),this._bindChart())},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"startAngle",{get:function(){return this._startAngle},set:function(t){t!=this._startAngle&&(this._startAngle=n.asNumber(t,!0),this.invalidate())},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"offset",{get:function(){return this._offset},set:function(t){t!=this._offset&&(this._offset=n.asNumber(t,!0),this.invalidate())},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"innerRadius",{get:function(){return this._innerRadius},set:function(t){t!=this._innerRadius&&(this._innerRadius=n.asNumber(t,!0),this.invalidate())},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"reversed",{get:function(){return this._reversed},set:function(t){t!=this._reversed&&(this._reversed=n.asBoolean(t,!0),this.invalidate())},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"selectedItemPosition",{get:function(){return this._selectedItemPosition},set:function(t){t!=this._selectedItemPosition&&(this._selectedItemPosition=n.asEnum(t,n.chart.Position,!0),this.invalidate())},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"selectedItemOffset",{get:function(){return this._selectedItemOffset},set:function(t){t!=this._selectedItemOffset&&(this._selectedItemOffset=n.asNumber(t,!0),this.invalidate())},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"isAnimated",{get:function(){return this._isAnimated},set:function(n){n!=this._isAnimated&&(this._isAnimated=n)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"tooltip",{get:function(){return this._tooltip},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"dataLabel",{get:function(){return this._lbl},set:function(n){n!=this._lbl&&(this._lbl=n,this._lbl&&(this._lbl._chart=this))},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"selectedIndex",{get:function(){return this._selectedIndex},set:function(t){if(t!=this._selectedIndex){var i=n.asNumber(t,!0);this._select(i,!0)}},enumerable:!0,configurable:!0}),e.prototype._getLabelsForLegend=function(){return this._labels},e.prototype.hitTest=function(n,i){var f=this._toControl(n,i),r=new t.HitTestInfo(this,f),o=null,y,s,l,e,u,h,c;if(t.FlexChart._contains(this._rectHeader,f))r._chartElement=t.ChartElement.Header;else if(t.FlexChart._contains(this._rectFooter,f))r._chartElement=t.ChartElement.Footer;else if(t.FlexChart._contains(this._rectLegend,f))r._chartElement=t.ChartElement.Legend,o=this.legend._hitTest(f),o!==null&&o>=0&&o<this._areas.length&&r._setData(null,o);else if(t.FlexChart._contains(this._rectChart,f)){for(y=this._areas.length,s=NaN,e=0;e<y;e++){if(u=f.clone(),this._rotationAngle!=0){var p=this._center.x,w=this._center.y,a=-p+u.x,v=-w+u.y,b=Math.sqrt(a*a+v*v),k=Math.atan2(v,a)-this._rotationAngle*Math.PI/180;u.x=p+b*Math.cos(k);u.y=w+b*Math.sin(k)}if(e==this._selectedIndex&&(u.x-=this._selectedOffset.x,u.y-=this._selectedOffset.y),h=this._areas[e],h.contains(u)&&(r._setData(null,h.tag),r._dist=0,e!=this._selectedIndex))break;c=h.distance(u);c!==undefined&&(isNaN(s)||c<s)&&(s=c,l=h)}r._dist!==0&&l!=null&&(r._setData(null,l.tag),r._dist=s);r._chartElement=t.ChartElement.ChartArea}else r._chartElement=t.ChartElement.None;return r},e.prototype._performBind=function(){var n,i,t,r;if(this._initData(),this._cv&&(this._selectionIndex=this._cv.currentPosition,n=this._cv.items,n))for(i=n.length,t=0;t<i;t++)r=n[t],this._sum+=Math.abs(this._getBindData(r,this._values,this._labels,this.binding,this.bindingName))},e.prototype._initData=function(){this._sum=0;this._values=[];this._labels=[]},e.prototype._getBindData=function(t,i,r,u,f){var o,e=0,s;return u&&(o=t[u]),e=0,n.isNumber(o)?e=n.asNumber(o):o&&(e=parseFloat(o.toString())),!isNaN(e)&&isFinite(e)?i.push(e):(e=0,i.push(e)),f&&t?(s=t[f],s&&(s=s.toString()),r.push(s)):r.push(e.toString()),e},e.prototype._render=function(i){var w,y,o,h,r,l,f,u;this._selectionAnimationID&&clearInterval(this._selectionAnimationID);var b=this.hostElement,p=this._getHostSize(),u=p.width,f=p.height;if((u==0||isNaN(u))&&(u=t.FlexChart._WIDTH),(f==0||isNaN(f))&&(f=t.FlexChart._HEIGHT),w=new n.Size(u,f),i.beginRender(),u>0&&f>0){i.setViewportSize(u,f);this._areas=[];y=this.legend;r=new n.Rect(0,0,u,f);this._rectChart=r.clone();i.startGroup(t.FlexChart._CSS_HEADER);r=this._drawTitle(i,r,this.header,this.headerStyle,!1);i.endGroup();i.startGroup(t.FlexChart._CSS_FOOTER);r=this._drawTitle(i,r,this.footer,this.footerStyle,!0);i.endGroup();u=r.width;f=r.height;l=y._getPosition(u,f);o=y._getDesiredSize(i,l,u,f);switch(l){case t.Position.Right:u-=o.width;h=new n.Point(u,r.top+.5*(f-o.height));break;case t.Position.Left:r.left+=o.width;u-=o.width;h=new n.Point(0,r.top+.5*(f-o.height));break;case t.Position.Top:f-=o.height;h=new n.Point(.5*(u-o.width),r.top);r.top+=o.height;break;case t.Position.Bottom:f-=o.height;h=new n.Point(.5*(u-o.width),r.top+f)}r.width=u;r.height=f;this.onRendering(new t.RenderEventArgs(i));this._pieGroup=i.startGroup(null,null,!0);var s=this._parseMargin(this.plotMargin),a=this.dataLabel,c=a.content&&a.position==t.PieLabelPosition.Outside,v=c?(n.isNumber(a.offset)?a.offset:0)+24:0;isNaN(s.left)&&(s.left=c?v:e._MARGIN);isNaN(s.right)&&(s.right=c?v:e._MARGIN);isNaN(s.top)&&(s.top=c?v:e._MARGIN);isNaN(s.bottom)&&(s.bottom=c?v:e._MARGIN);r.top+=s.top;f=r.height-(s.top+s.bottom);r.height=f>0?f:24;r.left+=s.left;u=r.width-(s.left+s.right);r.width=u>0?u:24;this._renderData(i,r,this._pieGroup);i.endGroup();o?(this._legendHost=i.startGroup(t.FlexChart._CSS_LEGEND),this._rectLegend=new n.Rect(h.x,h.y,o.width,o.height),this.legend._render(i,h,l,o.width,o.height),i.endGroup()):(this._legendHost=null,this._rectLegend=null);this._rotationAngle=0;this._highlightCurrent();this.dataLabel.content&&this.dataLabel.position!=t.PieLabelPosition.None&&this._renderLabels(i);this.onRendered(new t.RenderEventArgs(i))}i.endRender()},e.prototype._renderData=function(n,t){var u,f;this._pels=[];this._angles=[];var e=this._sum,o=this.startAngle+180,s=this.innerRadius,r=this.offset;if(e>0){var h=o*Math.PI/180,c=t.left+.5*t.width,l=t.top+.5*t.height,i=Math.min(.5*t.width,.5*t.height);this._center.x=c;this._center.y=l;u=Math.max(r,this.selectedItemOffset);u>0&&(i=i/(1+u),r=r*i);this._radius=i;f=s*i;this._renderPie(n,i,f,h,r);this._highlightCurrent()}},e.prototype._renderPie=function(n,t,i,r,u){this._renderSlices(n,this._values,this._sum,t,i,r,2*Math.PI,u)},e.prototype._getCenter=function(){return this._center},e.prototype._renderSlices=function(n,t,i,r,u,f,e,o){for(var k=t.length,c=f,y=this.reversed==!0,p=this._center,s,w,l,a,h=0;h<k;h++){l=p.x;a=p.y;w=n.startGroup();n.fill=this._getColorLight(h);n.stroke=this._getColor(h);var b=Math.abs(t[h]),s=Math.abs(b-i)<1e-10?e:e*b/i,v=y?c-.5*s:c+.5*s;o>0&&s<e&&(l+=o*Math.cos(v),a+=o*Math.sin(v));this._renderSlice(n,l,a,v,h,r,u,c,s,e);y?c-=s:c+=s;n.endGroup();this._pels.push(w)}},e.prototype._renderSlice=function(i,r,u,f,e,o,s,h,c){var v=this,a=!!this.reversed,l;this._angles.push(f);this.itemFormatter?(l=new t.HitTestInfo(this,new n.Point(r+o*Math.cos(f),u+o*Math.sin(f)),t.ChartElement.SeriesSymbol),l._setData(null,e),this.itemFormatter(i,l,function(){v._drawSilce(i,e,a,r,u,o,s,h,c)})):this._drawSilce(i,e,a,r,u,o,s,h,c)},e.prototype._renderLabels=function(r){var it=this._areas.length,c=this.dataLabel,a=c.position,h=2,rt=this._rotationAngle,ut=c.connectingLine,tt=c.offset?c.offset:0,l,o,v,s,d,g,y,nt;for(r.stroke='null',r.fill='transparent',r.strokeWidth=1,r.startGroup('wj-data-labels'),l=0;l<it;l++)if(o=this._areas[l],o){var p=o.radius,u=o.langle+rt,f=1,e=1;a==t.PieLabelPosition.Center?p*=.5*(1+(o.innerRadius||0)/o.radius):(u=i.clampAngle(u),u<=-170||u>=170?(f=2,e=1):u>=-100&&u<=-80?(f=1,e=2):u>=-10&&u<=10?(f=0,e=1):u>=80&&u<=100?(f=1,e=0):-180<u&&u<-90?(f=2,e=2):-90<=u&&u<0?(f=0,e=2):0<u&&u<90?(f=0,e=0):90<u&&u<180&&(f=2,e=0),a==t.PieLabelPosition.Inside&&(f=2-f,e=2-e));u*=Math.PI/180;var b=0,k=0,w=0;l==this._selectedIndex&&this.selectedItemOffset>0&&(w=this.selectedItemOffset);w>0&&(b=Math.cos(u)*w*this._radius,k=Math.sin(u)*w*this._radius);v=p;a==t.PieLabelPosition.Outside?v+=tt:a==t.PieLabelPosition.Inside&&(v-=tt);s=new n.Point(o.center.x+b+v*Math.cos(u),o.center.y+k+v*Math.sin(u));c.border&&a!=t.PieLabelPosition.Center&&(f==0?s.x+=h:f==2&&(s.x-=h),e==0?s.y+=h:e==2&&(s.y-=h));d=new t.HitTestInfo(this,s);d._setData(null,l);g=this._getLabelContent(d,c.content);g&&(y=t.FlexChart._renderText(r,g,s,f,e,'wj-data-label'),c.border&&r.drawRect(y.left-h,y.top-h,y.width+2*h,y.height+2*h,'wj-data-label-border'),ut&&(nt=new n.Point(o.center.x+b+p*Math.cos(u),o.center.y+k+p*Math.sin(u)),r.drawLine(s.x,s.y,nt.x,nt.y,'wj-data-label-line')))}r.endGroup()},e.prototype._drawSilce=function(t,i,f,e,o,s,h,c,l){var a;f?h>0?(l!=0&&t.drawDonutSegment(e,o,s,h,c-l,l),a=new u(new n.Point(e,o),s,h,c-l,l),a.tag=i,this._areas.push(a)):(l!=0&&t.drawPieSegment(e,o,s,c-l,l),a=new r(new n.Point(e,o),s,c-l,l),a.tag=i,this._areas.push(a)):(h>0?(l!=0&&t.drawDonutSegment(e,o,s,h,c,l),a=new u(new n.Point(e,o),s,h,c,l),a.tag=i,this._areas.push(a)):(l!=0&&t.drawPieSegment(e,o,s,c,l),a=new r(new n.Point(e,o),s,c,l),a.tag=i,this._areas.push(a)),c+=l)},e.prototype._measureLegendItem=function(i,r){var u=new n.Size,f;return u.width=t.Series._LEGEND_ITEM_WIDTH,u.height=t.Series._LEGEND_ITEM_HEIGHT,r&&(f=i.measureString(r,t.FlexChart._CSS_LABEL),u.width+=f.width,u.height<f.height&&(u.height=f.height)),u.width+=3*t.Series._LEGEND_ITEM_MARGIN,u.height+=2*t.Series._LEGEND_ITEM_MARGIN,u},e.prototype._drawLegendItem=function(i,r,u,f){i.strokeWidth=1;var h=t.Series._LEGEND_ITEM_MARGIN,e=null,o=null;e===null&&(e=this._getColorLight(u));o===null&&(o=this._getColor(u));i.fill=e;i.stroke=o;var c=r.top+.5*r.height,l=t.Series._LEGEND_ITEM_WIDTH,s=t.Series._LEGEND_ITEM_HEIGHT;i.drawRect(r.left+h,c-.5*s,l,s,null);f&&t.FlexChart._renderText(i,f,new n.Point(r.left+s+2*h,c),0,1,t.FlexChart._CSS_LABEL)},e.prototype._getLabelContent=function(t,i){return n.isString(i)?this._keywords.replace(i,t):n.isFunction(i)?i(t):null},e.prototype._select=function(n,i){if(i===void 0&&(i=!1),this._highlight(!1,this._selectionIndex),this._selectionIndex=n,this.selectionMode==t.SelectionMode.Point){var r=this._cv;r&&(this._notifyCurrentChanged=!1,r.moveCurrentToPosition(n),this._notifyCurrentChanged=!0)}this.onSelectionChanged();!this.isAnimated&&(this.selectedItemOffset>0||this.selectedItemPosition!=t.Position.None)?this.invalidate():this._highlight(!0,this._selectionIndex,i)},e.prototype._highlightCurrent=function(){if(this.selectionMode!=t.SelectionMode.None){var n=-1,i=this._cv;i&&(n=i.currentPosition);this._highlight(!0,n)}},e.prototype._highlight=function(n,i,r){var u,h,f,e,o,s,c,l;r===void 0&&(r=!1);this.selectionMode==t.SelectionMode.Point&&i!==undefined&&i!==null&&i>=0&&(u=this._pels[i],n?(u&&(u.parentNode.appendChild(u),h=this._find(u,['ellipse']),this._highlightItems(this._find(u,['path','ellipse']),t.FlexChart._CSS_SELECTION,n)),f=this._angles[i],this.selectedItemPosition!=t.Position.None&&f!=0&&(e=0,this.selectedItemPosition==t.Position.Left?e=180:this.selectedItemPosition==t.Position.Top?e=-90:this.selectedItemPosition==t.Position.Bottom&&(e=90),o=e*Math.PI/180-f,o*=180/Math.PI,r&&this.isAnimated?this._animateSelectionAngle(o,.5):(this._rotationAngle=o,this._pieGroup.transform.baseVal.getItem(0).setRotate(o,this._center.x,this._center.y))),s=this.selectedItemOffset,s>0&&h.length==0&&(c=this._selectedOffset.x=Math.cos(f)*s*this._radius,l=this._selectedOffset.y=Math.sin(f)*s*this._radius,u&&u.setAttribute('transform','translate('+c.toFixed()+','+l.toFixed()+')')),this._selectedIndex=i):(u&&(u.parentNode.insertBefore(u,u.parentNode.childNodes.item(i)),u.removeAttribute('transform'),this._highlightItems(this._find(u,['path','ellipse']),t.FlexChart._CSS_SELECTION,n)),this._selectedIndex==i&&(this._selectedIndex=-1)))},e.prototype._animateSelectionAngle=function(r,u){var e=i.clampAngle(this._rotationAngle);r=i.clampAngle(r);var o=r-e,f=this,s=e,h=f._pieGroup;f._selectionAnimationID&&clearInterval(this._selectionAnimationID);this._selectionAnimationID=n.animate(function(n){h==f._pieGroup&&(f._rotationAngle=e=s+o*n,f._pieGroup.transform.baseVal.getItem(0).setRotate(e,f._center.x,f._center.y),n==1&&clearInterval(f._selectionAnimationID),n>.99&&(f.selectedItemOffset>0||f.selectedItemPosition!=t.Position.None)&&f.invalidate())},u*1e3)},e._MARGIN=4,e}(t.FlexChartBase);t.FlexPie=f;var i=function(){function n(){}return n.clampAngle=function(n){var t=(n+180)%360-180;return t<-180&&(t+=360),t},n}(),r=function(){function n(n,t,r,u){this._isFull=!1;this._center=n;this._radius=t;this._originAngle=r;this._originSweep=u;u>=2*Math.PI&&(this._isFull=!0);this._sweep=.5*u*180/Math.PI;this._angle=i.clampAngle(r*180/Math.PI+this._sweep);this._radius2=t*t}return n.prototype.contains=function(n){var t=n.x-this._center.x,r=n.y-this._center.y,e=t*t+r*r,u,f;return e<=this._radius2&&(u=Math.atan2(r,t)*180/Math.PI,f=i.clampAngle(this._angle)-i.clampAngle(u),this._isFull||Math.abs(f)<=this._sweep)?!0:!1},n.prototype.distance=function(n){if(this.contains(n))return 0;var t=n.x-this._center.x,r=n.y-this._center.y,u=t*t+r*r,f=Math.atan2(r,t)*180/Math.PI,e=i.clampAngle(this._angle)-i.clampAngle(f);return this._isFull||Math.abs(e)<=this._sweep?Math.sqrt(u)-this._radius:undefined},Object.defineProperty(n.prototype,"center",{get:function(){return this._center},enumerable:!0,configurable:!0}),Object.defineProperty(n.prototype,"radius",{get:function(){return this._radius},enumerable:!0,configurable:!0}),Object.defineProperty(n.prototype,"langle",{get:function(){return this._angle},enumerable:!0,configurable:!0}),Object.defineProperty(n.prototype,"angle",{get:function(){return this._originAngle},enumerable:!0,configurable:!0}),Object.defineProperty(n.prototype,"sweep",{get:function(){return this._originSweep},enumerable:!0,configurable:!0}),n}(),u=function(){function n(n,t,r,u,f){this._isFull=!1;this._center=n;this._radius=t;this._iradius=r;this._originAngle=u;this._originSweep=f;f>=2*Math.PI&&(this._isFull=!0);this._sweep=.5*f*180/Math.PI;this._angle=i.clampAngle(u*180/Math.PI+this._sweep);this._radius2=t*t;this._iradius2=r*r}return n.prototype.contains=function(n){var t=n.x-this._center.x,r=n.y-this._center.y,u=t*t+r*r,f,e;return u>=this._iradius2&&u<=this._radius2&&(f=Math.atan2(r,t)*180/Math.PI,e=i.clampAngle(this._angle-f),this._isFull||Math.abs(e)<=this._sweep)?!0:!1},n.prototype.distance=function(n){return this.contains(n)?0:undefined},Object.defineProperty(n.prototype,"center",{get:function(){return this._center},enumerable:!0,configurable:!0}),Object.defineProperty(n.prototype,"radius",{get:function(){return this._radius},enumerable:!0,configurable:!0}),Object.defineProperty(n.prototype,"langle",{get:function(){return this._angle},enumerable:!0,configurable:!0}),Object.defineProperty(n.prototype,"angle",{get:function(){return this._originAngle},enumerable:!0,configurable:!0}),Object.defineProperty(n.prototype,"sweep",{get:function(){return this._originSweep},enumerable:!0,configurable:!0}),Object.defineProperty(n.prototype,"innerRadius",{get:function(){return this._iradius},enumerable:!0,configurable:!0}),n}()})(t=n.chart||(n.chart={}))}(wijmo||(wijmo={}));__extends=this&&this.__extends||function(n,t){function r(){this.constructor=n}for(var i in t)t.hasOwnProperty(i)&&(n[i]=t[i]);n.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r)},function(n){var t;(function(t){'use strict';var r,i,o,u,f,e;(function(n){n[n.None=0]="None";n[n.Stacked=1]="Stacked";n[n.Stacked100pc=2]="Stacked100pc"})(t.Stacking||(t.Stacking={}));r=t.Stacking,function(n){n[n.None=0]="None";n[n.Series=1]="Series";n[n.Point=2]="Point"}(t.SelectionMode||(t.SelectionMode={}));i=t.SelectionMode;o=function(o){function s(u,s){var h,c,l;o.call(this,u,null,!0);this._series=new n.collections.ObservableArray;this._axes=new t.AxisCollection;this._pareas=new t.PlotAreaCollection;this._axisX=new t.Axis(t.Position.Bottom);this._axisY=new t.Axis(t.Position.Left);this._interpolateNulls=!1;this._legendToggle=!1;this._symbolSize=10;this._dataInfo=new f;this.__barPlotter=null;this.__linePlotter=null;this.__areaPlotter=null;this.__bubblePlotter=null;this.__financePlotter=null;this._plotters=[];this._rotated=!1;this._stacking=r.None;this._xlabels=[];this._xvals=[];this._lblAreas=[];this.seriesVisibilityChanged=new n.Event;this.applyTemplate('wj-control wj-flexchart',null,null);h=this;h._series.collectionChanged.addHandler(function(){for(var t,r=h._series,i=0;i<r.length;i++){if(t=n.tryCast(r[i],n.chart.SeriesBase),!t)throw'chartSeries array must contain SeriesBase objects.';t._chart=h;t.axisX&&(t.axisX._chart=h);t.axisY&&(t.axisY._chart=h)}h.refresh()});this._currentRenderEngine=new t._SvgRenderEngine(this.hostElement);this._hitTester=new t._HitTester(this);this._legend=new t.Legend(this);this._tooltip=new e;this._tooltip.showDelay=0;this._lbl=new t.DataLabel;this._lbl._chart=this;c=this._axisX;l=this._axisY;this._axisX.majorGrid=!1;this._axisX.name='axisX';this._axisY.majorGrid=!0;this._axisY.majorTickMarks=t.TickMark.None;this._axisY.name='axisY';c._chart=this;l._chart=this;this._axes.push(c);this._axes.push(l);h._axes.collectionChanged.addHandler(function(){for(var i,r=h._axes,t=0;t<r.length;t++){if(i=n.tryCast(r[t],n.chart.Axis),!i)throw'axes array must contain Axis objects.';i._chart=h}h.refresh()});h._pareas.collectionChanged.addHandler(function(){for(var i,r=h._pareas,t=0;t<r.length;t++){if(i=n.tryCast(r[t],n.chart.PlotArea),!i)throw'plotAreas array must contain PlotArea objects.';i._chart=h}h.refresh()});this._keywords=new t._KeyWords;this.hostElement.addEventListener('click',function(t){var r=h._tooltip,f=r.content,i,u;f&&h.isTouching&&(i=h.hitTest(t),i.distance<=r.threshold?(u=h._getLabelContent(i,h._tooltip.content),h._showToolTip(u,new n.Rect(t.clientX,t.clientY,5,5))):h._hideToolTip())});this.hostElement.addEventListener('mousemove',function(t){var r=h._tooltip,f=r.content,i,u;f&&!h.isTouching&&(i=h.hitTest(t),i.distance<=r.threshold?(u=h._getLabelContent(i,h._tooltip.content),h._showToolTip(u,new n.Rect(t.clientX,t.clientY,5,5))):h._hideToolTip())});this.hostElement.addEventListener('mouseleave',function(){h._hideToolTip()});this.hostElement.addEventListener('click',function(n){if(h.selectionMode!=i.None){var r=h._hitTestData(n),u=t.FlexChart._SELECTION_THRESHOLD;h.tooltip&&h.tooltip.threshold&&(u=h.tooltip.threshold);r.distance<=u&&r.series?h._select(r.series,r.pointIndex):h.selectionMode==i.Series?(r=h.hitTest(n),r.chartElement==t.ChartElement.Legend&&r.series?h._select(r.series,null):h._select(null,null)):h._select(null,null)}h.legendToggle===!0&&(r=h.hitTest(n),r.chartElement==t.ChartElement.Legend&&r.series&&(r.series.visibility==t.SeriesVisibility.Legend?r.series.visibility=t.SeriesVisibility.Visible:r.series.visibility==t.SeriesVisibility.Visible&&(r.series.visibility=t.SeriesVisibility.Legend),h.focus()))});this.initialize(s)}return __extends(s,o),Object.defineProperty(s.prototype,"series",{get:function(){return this._series},enumerable:!0,configurable:!0}),Object.defineProperty(s.prototype,"axes",{get:function(){return this._axes},enumerable:!0,configurable:!0}),Object.defineProperty(s.prototype,"axisX",{get:function(){return this._axisX},set:function(i){if(i!=this._axisX){var r=this._axisX=n.asType(i,t.Axis);this.beginUpdate();r&&(r.majorGrid===undefined&&(r.majorGrid=!1),r.name===undefined&&(r.name='axisX'),r.position===undefined&&(r.position=t.Position.Bottom),r._axisType=t.AxisType.X,r._chart=this);this.endUpdate()}},enumerable:!0,configurable:!0}),Object.defineProperty(s.prototype,"axisY",{get:function(){return this._axisY},set:function(i){if(i!=this._axisY){var r=this._axisY=n.asType(i,t.Axis);this.beginUpdate();r&&(r.majorGrid===undefined&&(r.majorGrid=!0),r.name===undefined&&(r.name='axisY'),r.majorTickMarks=t.TickMark.None,r.position===undefined&&(r.position=t.Position.Left),r._axisType=t.AxisType.Y,r._chart=this);this.endUpdate()}},enumerable:!0,configurable:!0}),Object.defineProperty(s.prototype,"plotAreas",{get:function(){return this._pareas},enumerable:!0,configurable:!0}),Object.defineProperty(s.prototype,"binding",{get:function(){return this._binding},set:function(t){t!=this._binding&&(this._binding=n.asString(t,!0),this.invalidate())},enumerable:!0,configurable:!0}),Object.defineProperty(s.prototype,"bindingX",{get:function(){return this._bindingX},set:function(t){t!=this._bindingX&&(this._bindingX=n.asString(t,!0),this._bindChart())},enumerable:!0,configurable:!0}),Object.defineProperty(s.prototype,"symbolSize",{get:function(){return this._symbolSize},set:function(t){t!=this._symbolSize&&(this._symbolSize=n.asNumber(t,!1,!0),this.invalidate())},enumerable:!0,configurable:!0}),Object.defineProperty(s.prototype,"interpolateNulls",{get:function(){return this._interpolateNulls},set:function(t){t!=this._interpolateNulls&&(this._interpolateNulls=n.asBoolean(t),this.invalidate())},enumerable:!0,configurable:!0}),Object.defineProperty(s.prototype,"legendToggle",{get:function(){return this._legendToggle},set:function(t){t!=this._legendToggle&&(this._legendToggle=n.asBoolean(t))},enumerable:!0,configurable:!0}),Object.defineProperty(s.prototype,"tooltip",{get:function(){return this._tooltip},enumerable:!0,configurable:!0}),Object.defineProperty(s.prototype,"dataLabel",{get:function(){return this._lbl},set:function(i){i!=this._lbl&&(this._lbl=n.asType(i,t.DataLabel),this._lbl&&(this._lbl._chart=this))},enumerable:!0,configurable:!0}),Object.defineProperty(s.prototype,"selection",{get:function(){return this._selection},set:function(i){i!=this._selection&&(this._selection=n.asType(i,t.SeriesBase,!0),this.invalidate())},enumerable:!0,configurable:!0}),s.prototype.onSeriesVisibilityChanged=function(n){this.seriesVisibilityChanged.raise(this,n)},s.prototype.hitTest=function(n,i){var u=this._toControl(n,i),r=new t.HitTestInfo(this,u),s=null,c,o,h;if(t.FlexChart._contains(this._rectHeader,u))r._chartElement=t.ChartElement.Header;else if(t.FlexChart._contains(this._rectFooter,u))r._chartElement=t.ChartElement.Footer;else if(t.FlexChart._contains(this._rectLegend,u))r._chartElement=t.ChartElement.Legend,s=this.legend._hitTest(u),s!==null&&s>=0&&s<this.series.length&&r._setData(this.series[s]);else if(t.FlexChart._contains(this._rectChart,u))if(c=this._hitTestLabels(u),c)r._chartElement=t.ChartElement.DataLabel,r._dist=0,r._setDataPoint(c.tag);else{var e=this._hitTester.hitTest(u),f=null,l=null;for(o=this.series.length-1;o>=0;o--)if(this.series[o].hitTest!==t.Series.prototype.hitTest&&(h=this.series[o].hitTest(n),h&&((!f||h.distance<f.distance)&&(f=h,l=o),h.distance===0)))break;e&&e.area?f&&f.distance<e.distance?r=f:f&&f.distance==e.distance&&l>e.area.tag.seriesIndex?r=f:(r._setDataPoint(e.area.tag),r._dist=e.distance):f&&(r=f);t.FlexChart._contains(this.axisX._axrect,u)?r._chartElement=t.ChartElement.AxisX:t.FlexChart._contains(this.axisY._axrect,u)?r._chartElement=t.ChartElement.AxisY:t.FlexChart._contains(this._plotRect,u)?r._chartElement=t.ChartElement.PlotArea:t.FlexChart._contains(this._rectChart,u)&&(r._chartElement=t.ChartElement.ChartArea)}else r._chartElement=t.ChartElement.None;return r},s.prototype.pointToData=function(t,i){return n.isNumber(t)&&n.isNumber(i)&&(t=new n.Point(t,i)),t instanceof MouseEvent?(t=new n.Point(t.pageX,t.pageY),t=this._toControl(t)):t=t.clone(),t.x=this.axisX.convertBack(t.x),t.y=this.axisY.convertBack(t.y),t},s.prototype.dataToPoint=function(t,i){n.isNumber(t)&&n.isNumber(i)&&(t=new n.Point(t,i));n.asType(t,n.Point);var r=t.clone();return r.x=this.axisX.convert(r.x),r.y=this.axisY.convert(r.y),r},s.prototype._copy=function(t,i){var u,r,f;if(t=='series'){for(u=n.asArray(i),r=0;r<u.length;r++)f=this._createSeries(),n.copy(f,u[r]),this.series.push(f);return!0}return!1},s.prototype._createSeries=function(){return new t.Series},s.prototype._clearCachedValues=function(){for(var t,n=0;n<this._series.length;n++)t=this._series[n],t.itemsSource==null&&t._clearValues()},s.prototype._performBind=function(){var i,u,r,f,t;if(this._xDataType=null,this._xlabels.splice(0),this._xvals.splice(0),this._cv&&(i=this._cv.items,i)){for(u=i.length,r=0;r<u;r++)f=i[r],this._bindingX&&(t=f[this._bindingX],n.isNumber(t)?(this._xvals.push(n.asNumber(t)),this._xDataType=n.DataType.Number):n.isDate(t)&&(this._xvals.push(n.asDate(t).valueOf()),this._xDataType=n.DataType.Date),this._xlabels.push(f[this._bindingX]));this._xvals.length==u?this._xlabels.splice(0):this._xvals.splice(0)}},s.prototype._hitTestSeries=function(n,i){var f=this._toControl(n),r=new t.HitTestInfo(this,f),e=i,u=this._hitTester.hitTestSeries(f,i);return u&&u.area&&(r._setDataPoint(u.area.tag),r._chartElement=t.ChartElement.PlotArea,r._dist=u.distance),r},s.prototype._hitTestData=function(n){var u=this._toControl(n),r=new t.HitTestInfo(this,u),i=this._hitTester.hitTest(u,!0);return i&&i.area&&(r._setDataPoint(i.area.tag),r._dist=i.distance),r},s.prototype._hitTestLabels=function(n){for(var i=null,r=this._lblAreas.length,t=0;t<r;t++)if(this._lblAreas[t].contains(n)){i=this._lblAreas[t];break}return i},s._dist2=function(n,t){var i=n.x-t.x,r=n.y-t.y;return i*i+r*r},s._dist=function(n,i,r){return Math.sqrt(t.FlexChart._distToSegmentSquared(n,i,r))},s._distToSegmentSquared=function(i,r,u){var e=t.FlexChart._dist2(r,u),f;return e==0?t.FlexChart._dist2(i,r):(f=((i.x-r.x)*(u.x-r.x)+(i.y-r.y)*(u.y-r.y))/e,f<0)?t.FlexChart._dist2(i,r):f>1?t.FlexChart._dist2(i,u):t.FlexChart._dist2(i,new n.Point(r.x+f*(u.x-r.x),r.y+f*(u.y-r.y)))},s.prototype._isRotated=function(){return this._getChartType()==t.ChartType.Bar?!this._rotated:this._rotated},s.prototype._getChartType=function(){return null},s.prototype._render=function(i,r){var ht,et,s,a,f,k,d,l,g,nt,tt,ct,lt,v,ot,y,it,rt,p,c,u,h,ut,b;r===void 0&&(r=!0);var vt=this.hostElement,st=this._getHostSize(),e=st.width,o=st.height;if((e==0||isNaN(e))&&(e=t.FlexChart._WIDTH),(o==0||isNaN(o))&&(o=t.FlexChart._HEIGHT),ht=new n.Size(e,o),i.beginRender(),e>0&&o>0){i.setViewportSize(e,o);this._hitTester.clear();et=this.legend;f=new n.Rect(0,0,e,o);this._rectChart=f.clone();i.startGroup(t.FlexChart._CSS_HEADER);f=this._drawTitle(i,f,this.header,this.headerStyle,!1);i.endGroup();i.startGroup(t.FlexChart._CSS_FOOTER);f=this._drawTitle(i,f,this.footer,this.footerStyle,!0);i.endGroup();e=f.width;o=f.height;k=et._getPosition(e,o);s=et._getDesiredSize(i,k,e,o);switch(k){case t.Position.Right:e-=s.width;a=new n.Point(e,f.top+.5*(o-s.height));break;case t.Position.Left:f.left+=s.width;e-=s.width;a=new n.Point(0,f.top+.5*(o-s.height));break;case t.Position.Top:o-=s.height;a=new n.Point(.5*(e-s.width),f.top);f.top+=s.height;break;case t.Position.Bottom:o-=s.height;a=new n.Point(.5*(e-s.width),f.top+o)}if(f.width=e,f.height=o,h=this._getPlotter(null),h.stacking=this._stacking,this._curPlotter!=h&&(this._curPlotter&&this._curPlotter.unload(),this._curPlotter=h),h.load(),d=this._isRotated(),this._dataInfo.analyse(this._series,d,h.stacking,this._xvals.length>0?this._xvals:null,this.axisX.logBase>0,this.axisY.logBase>0),l=h.adjustLimits(this._dataInfo,f.clone()),d?(g=this._dataInfo.getDataTypeX(),g||(g=this._xDataType),this.axisX._updateActualLimits(this._dataInfo.getDataTypeY(),l.left,l.right),this.axisY._updateActualLimits(g,l.top,l.bottom,this._xlabels,this._xvals)):(nt=this._dataInfo.getDataTypeX(),nt||(nt=this._xDataType),this.axisX._updateActualLimits(nt,l.left,l.right,this._xlabels,this._xvals),this.axisY._updateActualLimits(this._dataInfo.getDataTypeY(),l.top,l.bottom)),tt=this._getAxes(),this._updateAuxAxes(tt,d),this._layout(f,ht,i),i.startGroup(t.FlexChart._CSS_PLOT_AREA),i.fill='transparent',i.stroke=null,ct=this.plotAreas.length,ct>0)for(c=0;c<this.plotAreas.length;c++)lt=this.plotAreas[c],lt._render(i);else v=this._plotRect,i.drawRect(v.left,v.top,v.width,v.height);for(i.endGroup(),ot=this._series.length,this._clearPlotters(),y={},c=0;c<ot;c++)u=this._series[c],u.getValues(0)&&(it=u._getAxisY(),it&&it!=this.axisY?(rt=it._uniqueId,y[rt]?y[rt].count+=1:y[rt]={count:1,index:0}):(h=this._getPlotter(u),h.seriesCount++));this.onRendering(new t.RenderEventArgs(i));for(c=0;c<tt.length;c++)p=tt[c],ut=p.axisType==t.AxisType.X?i.startGroup(t.FlexChart._CSS_AXIS_X):i.startGroup(t.FlexChart._CSS_AXIS_Y),p._hostElement=r?ut:p._hostElement,p._render(i),i.endGroup();for(i.startGroup('wj-series-group'),this._plotrectId='plotRect'+(1e6*Math.random()).toFixed(),i.addClipRect(this._plotRect,this._plotrectId),c=0;c<ot;c++){u=this._series[c];u._pointIndexes=[];h=this._getPlotter(u);ut=i.startGroup(u.cssClass,h.clipping?this._plotrectId:null);u._hostElement=r?ut:u._hostElement;var at=u.visibility,ft=u.axisX,w=u.axisY;if(ft||(ft=this.axisX),w||(w=this.axisY),at==t.SeriesVisibility.Visible||at==t.SeriesVisibility.Plot)if(b=y[w._uniqueId],b){if(u.rendering.hasHandlers)u.onRendering(i);else h.plotSeries(i,ft,w,u,this,b.index,b.count);b.index++}else if(u.rendering.hasHandlers)u.onRendering(i);else h.plotSeries(i,ft,w,u,this,h.seriesIndex,h.seriesCount),h.seriesIndex++;i.endGroup()}i.endGroup();this._lblAreas=[];this.dataLabel.content&&this.dataLabel.position!=t.LabelPosition.None&&this._renderLabels(i);s?(this._legendHost=i.startGroup(t.FlexChart._CSS_LEGEND),this._rectLegend=new n.Rect(a.x,a.y,s.width,s.height),i.textFill=t.FlexChart._FG,this.legend._render(i,a,k,s.width,s.height),i.textFill=null,i.endGroup()):(this._legendHost=null,this._rectLegend=null);this._highlightCurrent();this.onRendered(new t.RenderEventArgs(i))}i.endRender()},s.prototype._renderLabels=function(i){var s=this.dataLabel,ut=s.position,nt=this.series,ft=nt.length,tt=s.border,a,d,v,it,y,h,b,p,k,u,g;i.stroke='null';i.fill='transparent';i.strokeWidth=1;var e=2,f=s.offset,c=s.connectingLine;f===undefined&&(f=c?16:0);tt&&(f-=e);var l='wj-data-label',w='wj-data-label-line';for(i.startGroup('wj-data-labels'),a=0;a<ft;a++)if(d=nt[a],v=this._hitTester._map[a],v)for(it=v.length,y=0;y<it;y++)if(h=n.asType(v[y].tag,t._DataPoint,!0),h){b=new t.HitTestInfo(this,r);b._setDataPoint(h);var o=this._getLabelContent(b,s.content),et=d._getAxisX(),ot=d._getAxisY(),r=new n.Point(et.convert(h.dataX),ot.convert(h.dataY)),rt=v[y];if(rt instanceof t._RectArea&&(p=rt,this._isRotated()?r.y=p.rect.top+.5*p.rect.height:r.x=p.rect.left+.5*p.rect.width),!this._plotRect.contains(r))continue;if(k=new t.DataLabelRenderEventArgs(i,b,r,o),!s.onRendering(k)){o=k.text;r=k.point;switch(ut){case t.LabelPosition.Top:c&&i.drawLine(r.x,r.y,r.x,r.y-f,w);r.y-=e+f;u=t.FlexChart._renderText(i,o,r,1,2,l);break;case t.LabelPosition.Bottom:c&&i.drawLine(r.x,r.y,r.x,r.y+f,w);r.y+=e+f;u=t.FlexChart._renderText(i,o,r,1,0,l);break;case t.LabelPosition.Left:c&&i.drawLine(r.x,r.y,r.x-f,r.y,w);r.x-=e+f;u=t.FlexChart._renderText(i,o,r,2,1,l);break;case t.LabelPosition.Right:c&&i.drawLine(r.x,r.y,r.x+f,r.y,w);r.x+=e+f;u=t.FlexChart._renderText(i,o,r,0,1,l);break;case t.LabelPosition.Center:u=t.FlexChart._renderText(i,o,r,1,1,l)}tt&&u&&i.drawRect(u.left-e,u.top-e,u.width+2*e,u.height+2*e,'wj-data-label-border');u&&(g=new t._RectArea(u),g.tag=h,this._lblAreas.push(g))}}i.endGroup()},s.prototype._getAxes=function(){for(var u,t,i,n=[this.axisX,this.axisY],f=this.series.length,r=0;r<f;r++)u=this.series[r],t=u.axisX,t&&n.indexOf(t)===-1&&n.push(t),i=u.axisY,i&&n.indexOf(i)===-1&&n.push(i);return n},s.prototype._clearPlotters=function(){for(var t=this._plotters.length,n=0;n<t;n++)this._plotters[n].clear()},s.prototype._initPlotter=function(n){n.chart=this;n.dataInfo=this._dataInfo;n.hitTester=this._hitTester;this._plotters.push(n)},Object.defineProperty(s.prototype,"_barPlotter",{get:function(){return this.__barPlotter===null&&(this.__barPlotter=new t._BarPlotter,this._initPlotter(this.__barPlotter)),this.__barPlotter},enumerable:!0,configurable:!0}),Object.defineProperty(s.prototype,"_linePlotter",{get:function(){return this.__linePlotter===null&&(this.__linePlotter=new t._LinePlotter,this._initPlotter(this.__linePlotter)),this.__linePlotter},enumerable:!0,configurable:!0}),Object.defineProperty(s.prototype,"_areaPlotter",{get:function(){return this.__areaPlotter===null&&(this.__areaPlotter=new t._AreaPlotter,this._initPlotter(this.__areaPlotter)),this.__areaPlotter},enumerable:!0,configurable:!0}),Object.defineProperty(s.prototype,"_bubblePlotter",{get:function(){return this.__bubblePlotter===null&&(this.__bubblePlotter=new t._BubblePlotter,this._initPlotter(this.__bubblePlotter)),this.__bubblePlotter},enumerable:!0,configurable:!0}),Object.defineProperty(s.prototype,"_financePlotter",{get:function(){return this.__financePlotter===null&&(this.__financePlotter=new t._FinancePlotter,this._initPlotter(this.__financePlotter)),this.__financePlotter},enumerable:!0,configurable:!0}),s.prototype._getPlotter=function(n){var f=this._getChartType(),e=!1,u,i,r;n&&(u=n._getChartType(),u!==null&&u!==undefined&&u!=f&&(f=u,e=!0));switch(f){case t.ChartType.Column:this._barPlotter.isVolume=!1;this._barPlotter.width=.7;i=this._barPlotter;break;case t.ChartType.Bar:this._barPlotter.rotated=!this._rotated;this._barPlotter.isVolume=!1;this._barPlotter.width=.7;i=this._barPlotter;break;case t.ChartType.Line:this._linePlotter.hasSymbols=!1;this._linePlotter.hasLines=!0;this._linePlotter.isSpline=!1;i=this._linePlotter;break;case t.ChartType.Scatter:this._linePlotter.hasSymbols=!0;this._linePlotter.hasLines=!1;this._linePlotter.isSpline=!1;i=this._linePlotter;break;case t.ChartType.LineSymbols:this._linePlotter.hasSymbols=!0;this._linePlotter.hasLines=!0;this._linePlotter.isSpline=!1;i=this._linePlotter;break;case t.ChartType.Area:this._areaPlotter.isSpline=!1;i=this._areaPlotter;break;case t.ChartType.Bubble:i=this._bubblePlotter;break;case t.ChartType.Candlestick:r=this._financePlotter;r.isCandle=!0;r.isEqui=!1;r.isArms=!1;r.isVolume=!1;i=r;break;case t.ChartType.HighLowOpenClose:r=this._financePlotter;r.isCandle=!1;r.isEqui=!1;r.isArms=!1;r.isVolume=!1;i=r;break;case t.ChartType.Spline:this._linePlotter.hasSymbols=!1;this._linePlotter.hasLines=!0;this._linePlotter.isSpline=!0;i=this._linePlotter;break;case t.ChartType.SplineSymbols:this._linePlotter.hasSymbols=!0;this._linePlotter.hasLines=!0;this._linePlotter.isSpline=!0;i=this._linePlotter;break;case t.ChartType.SplineArea:this._areaPlotter.isSpline=!0;i=this._areaPlotter;break;default:throw'Invalid chart type.';}return i.rotated=this._rotated,f==t.ChartType.Bar&&(i.rotated=!i.rotated),e&&(i.rotated=this._isRotated()),i},s.prototype._layout=function(n,t,i){this.plotAreas.length>0?this._layoutMultiple(n,t,i):this._layoutSingle(n,t,i)},s.prototype._layoutSingle=function(i,r,u){for(var e,it,w,f,c,b,nt,rt,tt,o=i.width,s=i.height,ft=new n.Size(o,.75*s),et=new n.Size(s,.75*o),l=0,a=0,k=o,d=s,p=0,h=0,v=o,y=s,ut=this._getAxes(),g=0;g<ut.length;g++)f=ut[g],c=f.origin,f.axisType==t.AxisType.X?(e=f._getHeight(u,o),e>ft.height&&(e=ft.height),f._desiredSize=new n.Size(ft.width,e),it=f._hasOrigin=n.isNumber(c)&&c>this.axisY._getMinNum()&&c<this.axisY._getMaxNum(),f.position==t.Position.Bottom?(l=Math.max(l,f._annoSize.width*.5),k=Math.min(k,o-f._annoSize.width*.5),it?(nt=this._convertY(c,h,y),y=y-Math.max(0,nt+e-y)):y=y-e):f.position==t.Position.Top&&(l=Math.max(l,f._annoSize.width*.5),k=Math.min(k,o-f._annoSize.width*.5),it?(nt=this._convertY(c,h,y),h=h+Math.max(0,h-(nt-e))):h=h+e)):f.axisType==t.AxisType.Y&&(e=f._getHeight(u,s),e>et.height&&(e=et.height),f._desiredSize=new n.Size(et.width,e),it=f._hasOrigin=n.isNumber(c)&&c>this.axisX._getMinNum()&&c<this.axisX._getMaxNum(),f.position==t.Position.Left?(a=Math.max(a,f._annoSize.width*.5),d=Math.min(d,s-f._annoSize.width*.5),it?(tt=this._convertX(c,p,v),p+=Math.max(0,p-(tt-e))):p+=e):f.position==t.Position.Right&&(a=Math.max(a,f._annoSize.width*.5),d=Math.min(d,s-f._annoSize.width*.5),it?(tt=this._convertX(c,p,v),v=v-Math.max(0,tt+e-v)):v=v-e));for(w=this._parseMargin(this.plotMargin),l=isNaN(w.left)?p=Math.max(l,p)+i.left:p=w.left,k=isNaN(w.right)?v=Math.min(k,v)+i.left:v=r.width-w.right,a=isNaN(w.top)?h=Math.max(a,h)+i.top:h=w.top,d=isNaN(w.bottom)?y=Math.min(d,y)+i.top:y=r.height-w.bottom,o=Math.max(1,k-l),s=Math.max(1,d-a),this._plotRect=new n.Rect(l,a,o,s),u.stroke=null,g=0;g<ut.length;g++)f=ut[g],c=f.origin,f.axisType==t.AxisType.X?(f._hasOrigin?(nt=this._convertY(c,this._plotRect.top,this._plotRect.bottom),f.position==t.Position.Bottom?(b=new n.Rect(l,nt,o,f._desiredSize.height),y+=Math.max(0,b.bottom-this._plotRect.bottom)):f.position==t.Position.Top&&(b=new n.Rect(l,nt-f._desiredSize.height,o,f._desiredSize.height),h-=Math.max(0,this._plotRect.top-b.top))):f.position==t.Position.Bottom?(b=new n.Rect(l,y,o,f._desiredSize.height),y+=f._desiredSize.height):f.position==t.Position.Top?(b=new n.Rect(l,h-f._desiredSize.height,o,f._desiredSize.height),h-=f._desiredSize.height):b=new n.Rect(l,h,o,1),f._layout(b,this._plotRect)):f.axisType==t.AxisType.Y&&(f._hasOrigin?(tt=this._convertX(c,this._plotRect.left,this._plotRect.right),f.position==t.Position.Left?(rt=new n.Rect(tt-f._desiredSize.height,a,s,f._desiredSize.height),p-=f._desiredSize.height):f.position==t.Position.Right&&(rt=new n.Rect(tt,a,s,f._desiredSize.height),v+=f._desiredSize.height)):f.position==t.Position.Left?(rt=new n.Rect(p-f._desiredSize.height,a,s,f._desiredSize.height),p-=f._desiredSize.height):f.position==t.Position.Right?(rt=new n.Rect(v,a,s,f._desiredSize.height),v+=f._desiredSize.height):rt=new n.Rect(p,a,s,1),f._layout(rt,this._plotRect))},s.prototype._layoutMultiple=function(i,r,f){for(var pt,wt,lt,at,tt,h,it,dt,ut,ti,c,o,ft,e,d,gt,rt,l=i.width,a=i.height,b=[],k=[],ni=this._getAxes(),ii=ni.length,s=0;s<ii;s++)if(e=ni[s],e._plotrect=null,e.axisType==t.AxisType.X){for(pt=e.plotArea?e.plotArea.column:0;b.length<=pt;)b.push(new u);b[pt].axes.push(e)}else if(e.axisType==t.AxisType.Y){for(wt=e.plotArea?e.plotArea.row:0;k.length<=wt;)k.push(new u);k[wt].axes.push(e)}var et=b.length,ot=k.length,bt=new n.Size(l,.3*a),kt=new n.Size(a,.3*l),g=0,nt=0,ht=l,ct=a;for(h=0;h<et;h++)for(o=b[h],o.right=l,o.bottom=a,s=0;s<o.axes.length;s++)e=o.axes[s],lt=e._getHeight(f,e.axisType==t.AxisType.X?l:a),lt>bt.height&&(lt=bt.height),at=new n.Size(bt.width,lt),e._desiredSize=at,h==0&&(o.left=Math.max(o.left,e._annoSize.width*.5)),h==et-1&&(o.right=Math.min(o.right,l-e._annoSize.width*.5)),e.position==t.Position.Bottom?o.bottom-=at.height:e.position==t.Position.Top&&(o.top+=at.height);for(c=0;c<ot;c++)for(o=k[c],o.right=l,o.bottom=a,s=0;s<o.axes.length;s++)e=o.axes[s],tt=new n.Size(kt.width,e._getHeight(f,e.axisType==t.AxisType.X?l:a)),tt.height>kt.height&&(tt.height=kt.height),e._desiredSize=tt,c==0&&(o.top=Math.max(o.top,e._annoSize.width*.5)),c==ot-1&&(o.bottom=Math.min(o.bottom,a-e._annoSize.width*.5)),e.position==t.Position.Left?o.left+=tt.height:e.position==t.Position.Right&&(o.right-=tt.height);var v=0,y=0,p=l,w=a;for(h=0;h<et;h++)o=b[h],v=Math.max(v,o.left),y=Math.max(y,o.top),p=Math.min(p,o.right),w=Math.min(w,o.bottom);for(c=0;c<ot;c++)o=k[c],v=Math.max(v,o.left),y=Math.max(y,o.top),p=Math.min(p,o.right),w=Math.min(w,o.bottom);v=g=Math.max(g,v);p=ht=Math.min(ht,p);y=nt=Math.max(nt,y);w=ct=Math.min(ct,w);this._plotRect=new n.Rect(g,nt,ht-g,ct-nt);var vt=this._plotRect.clone(),st=g,yt=this.plotAreas._calculateWidths(this._plotRect.width,et);for(h=0;h<et;h++){for(w=ct,y=nt,o=b[h],it=yt[h],s=0;s<o.axes.length;s++)e=o.axes[s],d=new n.Rect(st,vt.top,it,vt.height),e.position==t.Position.Bottom?(dt=new n.Rect(st,w,it,e._desiredSize.height),w+=e._desiredSize.height):e.position==t.Position.Top&&(dt=new n.Rect(st,y-e._desiredSize.height,it,e._desiredSize.height),y-=e._desiredSize.height),e._layout(dt,d);for(s=0;s<this.plotAreas.length;s++)rt=this.plotAreas[s],rt.column==h&&rt._setPlotX(st,it);st+=it}for(ut=nt,ti=this.plotAreas._calculateHeights(this._plotRect.height,ot),c=0;c<ot;c++){for(v=g,p=ht,o=k[c],ft=ti[c],s=0;s<o.axes.length;s++)e=o.axes[s],d=new n.Rect(vt.left,ut,vt.width,ft),e._plotrect?(d.left=e._plotrect.left,d.width=e._plotrect.width):yt&&yt.length>0&&(d.width=yt[0]),e.position==t.Position.Left?(gt=new n.Rect(v-e._desiredSize.height,ut,ft,e._desiredSize.height),v-=e._desiredSize.height):e.position==t.Position.Right&&(gt=new n.Rect(p,ut,ft,e._desiredSize.height),p+=e._desiredSize.height),e._layout(gt,d);for(s=0;s<this.plotAreas.length;s++)rt=this.plotAreas[s],rt.row==c&&rt._setPlotY(ut,ft);ut+=ft}},s.prototype._convertX=function(n,t,i){var r=this.axisX;return r.reversed?i-(i-t)*(n-r._getMinNum())/(r._getMaxNum()-r._getMinNum()):t+(i-t)*(n-r._getMinNum())/(r._getMaxNum()-r._getMinNum())},s.prototype._convertY=function(n,t,i){var r=this.axisY;return r.reversed?t+(i-t)*(n-r._getMinNum())/(r._getMaxNum()-r._getMinNum()):i-(i-t)*(n-r._getMinNum())/(r._getMaxNum()-r._getMinNum())},s.prototype._getLabelContent=function(t,i){return n.isString(i)?this._keywords.replace(i,t):n.isFunction(i)?i(t):null},s.prototype._select=function(n,t){if(this._selection&&this._highlight(this._selection,!1,this._selectionIndex),this._selection=n,this._selectionIndex=t,this._selection&&this._highlight(this._selection,!0,this._selectionIndex),this.selectionMode==i.Point&&n){var r=n.collectionView;r||(r=this._cv);r&&(this._notifyCurrentChanged=!1,r.moveCurrentToPosition(t),this._notifyCurrentChanged=!0)}this.onSelectionChanged()},s.prototype._highlightCurrent=function(){var t,r,n;this.selectionMode!=i.None&&(t=this._selection,r=-1,t&&(n=t.collectionView,n||(n=this._cv),n&&(r=n.currentPosition),this._highlight(t,!0,r)))},s.prototype._highlight=function(r,u,f){var h,e,s,o;r=n.asType(r,t.SeriesBase,!0);this.selectionMode==i.Series?(h=this.series.indexOf(r),e=r.hostElement,u?e.parentNode.appendChild(e):e.parentNode.insertBefore(e,e.parentNode.childNodes.item(h)),o=this._find(e,['rect','ellipse','polyline','polygon','line','path']),this._highlightItems(o,t.FlexChart._CSS_SELECTION,u),r.legendElement&&this._highlightItems(this._find(r.legendElement,['rect','ellipse','line']),t.FlexChart._CSS_SELECTION,u)):this.selectionMode==i.Point&&(h=this.series.indexOf(r),e=r.hostElement,u?(e.parentNode.appendChild(e),s=r.getPlotElement(f),s&&(s.nodeName!='g'&&this._highlightItems([s],t.FlexChart._CSS_SELECTION,u),o=this._find(s,['line','rect','ellipse']),this._highlightItems(o,t.FlexChart._CSS_SELECTION,u))):(e.parentNode.insertBefore(e,e.parentNode.childNodes.item(h)),o=this._find(e,['rect','ellipse','line']),this._highlightItems(o,t.FlexChart._CSS_SELECTION,u)))},s.prototype._updateAuxAxes=function(i,r){for(var s,h,l,e,o,f,u,a,c=2;c<i.length;c++){for(s=i[c],s._chart=this,h=[],f=0;f<this.series.length;f++)l=this.series[f],(l.axisX==s||l.axisY==s)&&h.push(l);for(f=0;f<h.length;f++)u=h[f].getDataRect()||h[f]._getDataRect(),u&&(s.axisType==t.AxisType.X&&!r||s.axisType==t.AxisType.Y&&r?((e===undefined||u.left<e)&&(e=u.left),(o===undefined||u.right>o)&&(o=u.right)):((e===undefined||u.top<e)&&(e=u.top),(o===undefined||u.bottom>o)&&(o=u.bottom)));a=h[0].getDataType(0);a==null&&(a=n.DataType.Number);i[c]._updateActualLimits(a,e,o)}},s._contains=function(n,t){return n&&t?t.x>=n.left&&t.x<=n.right&&t.y>=n.top&&t.y<=n.bottom:!1},s._intersects=function(n,t){return n.left>t.right||n.right<t.left||n.top>t.bottom||n.bottom<t.top?!1:!0},s._toOADate=function(n){return n.valueOf()},s._fromOADate=function(n){return new Date(n)},s._renderText=function(t,i,r,u,f,e,o,s,h){var c=t.measureString(i,e,o,s),l=r.x,a=r.y,v;switch(u){case 1:l-=.5*c.width;break;case 2:l-=c.width}switch(f){case 1:a+=.5*c.height;break;case 0:a+=c.height}return v=new n.Rect(l,a-c.height,c.width,c.height),h?h(v)?(t.drawString(i,new n.Point(l,a),e,s),v):null:(t.drawString(i,new n.Point(l,a),e,s),v)},s._renderRotatedText=function(t,i,r,u,f,e,o,s,h){var c=t.measureString(i,s,h),l=r.x,a=r.y;switch(u){case 1:l-=.5*c.width;break;case 2:l-=c.width}switch(f){case 1:a+=.5*c.height;break;case 0:a+=c.height}t.drawStringRotated(i,new n.Point(l,a),e,o,s,h)},s._CSS_AXIS_X='wj-axis-x',s._CSS_AXIS_Y='wj-axis-y',s._CSS_LINE='wj-line',s._CSS_GRIDLINE='wj-gridline',s._CSS_TICK='wj-tick',s._CSS_GRIDLINE_MINOR='wj-gridline-minor',s._CSS_TICK_MINOR='wj-tick-minor',s._CSS_LABEL='wj-label',s._CSS_LEGEND='wj-legend',s._CSS_HEADER='wj-header',s._CSS_FOOTER='wj-footer',s._CSS_TITLE='wj-title',s._CSS_SELECTION='wj-state-selected',s._CSS_PLOT_AREA='wj-plot-area',s._FG='#666',s._epoch=new Date(1899,11,30).getTime(),s._msPerDay=864e5,s}(t.FlexChartBase);t.FlexChartCore=o;u=function(){function n(){this._axes=[];this.left=0;this.right=0;this.top=0;this.bottom=0}return Object.defineProperty(n.prototype,"axes",{get:function(){return this._axes},enumerable:!0,configurable:!0}),n}();f=function(){function i(){this.stackAbs={};this._xvals=null}return i.prototype.analyse=function(u,f,e,o,s,h){var ot,p,w,y,k,d,it,v,c,l,b,rt,ut,ft;this.minY=NaN;this.maxY=NaN;this.minX=NaN;this.maxX=NaN;this.minXp=NaN;this.minYp=NaN;this.dx=0;var g={},nt={},tt={};if(this.dataTypeX=null,this.dataTypeY=null,this._xvals=o,o!=null)for(ot=o.length,p=0;p<ot;p++)l=o[p],(isNaN(this.minX)||this.minX>l)&&(this.minX=l),(isNaN(this.maxX)||this.maxX<l)&&(this.maxX=l),l>0&&(isNaN(this.minXp)||this.minXp>l)&&(this.minXp=l),p>0&&(k=Math.abs(l-o[p-1]),!isNaN(k)&&(k<this.dx||this.dx==0)&&(this.dx=k));for(p=0;p<u.length;p++){var a=u[p],et=a._getChartType(),ht=a.chartType!==undefined,st=a.visibility;if(st!=t.SeriesVisibility.Hidden&&st!=t.SeriesVisibility.Legend){if(w=a.getDataRect(),w){(isNaN(this.minX)||this.minX>w.left)&&(this.minX=w.left);(isNaN(this.maxX)||this.maxX<w.right)&&(this.maxX=w.right);(isNaN(this.minY)||this.minY>w.top)&&(this.minY=w.top);(isNaN(this.maxY)||this.maxY<w.bottom)&&(this.maxY=w.bottom);continue}if(y=null,f?a._isCustomAxisY()||(y=a.getValues(1)):a._isCustomAxisX()||(y=a.getValues(1)),y)for(this.dataTypeX||(this.dataTypeX=a.getDataType(1)),v=0;v<y.length;v++)c=y[v],i.isValid(c)&&((isNaN(this.minX)||this.minX>c)&&(this.minX=c),(isNaN(this.maxX)||this.maxX<c)&&(this.maxX=c),v>0&&(!et||et==t.ChartType.Column||et==t.ChartType.Bar)&&(k=Math.abs(c-y[v-1]),!isNaN(k)&&k>0&&(k<this.dx||this.dx==0)&&(this.dx=k)));if(d=null,it=!1,f?(it=a._isCustomAxisX(),d=a.getValues(0)):(it=a._isCustomAxisY(),d=a.getValues(0)),d&&(this.dataTypeY||it||(this.dataTypeY=a.getDataType(0)),isNaN(this.minX)?this.minX=0:y||o||(this.minX=Math.min(this.minX,0)),isNaN(this.maxX)?this.maxX=d.length-1:y||o||(this.maxX=Math.max(this.maxX,d.length-1)),!it))for(v=0;v<d.length;v++)c=d[v],l=y?n.asNumber(y[v],!0):o?n.asNumber(o[v],!0):v,i.isValid(c)&&((isNaN(this.minY)||this.minY>c)&&(this.minY=c),(isNaN(this.maxY)||this.maxY<c)&&(this.maxY=c),ht||(c>0?(isNaN(g[l])?g[l]=c:g[l]+=c,(isNaN(this.minYp)||this.minYp>c)&&(this.minYp=c)):isNaN(nt[l])?nt[l]=c:nt[l]+=c,isNaN(tt[l])?tt[l]=Math.abs(c):tt[l]+=Math.abs(c)))}}if(e==r.Stacked){for(b in g)g[b]>this.maxY&&(this.maxY=g[b]);for(b in nt)nt[b]<this.minY&&(this.minY=nt[b])}else if(e==r.Stacked100pc){this.minY=0;this.maxY=1;for(b in tt)rt=tt[b],isFinite(rt)&&rt!=0&&(ut=g[b],ft=nt[b],isFinite(ut)&&(ut=Math.min(ut/rt,this.maxY)),isFinite(ft)&&(ft=Math.max(ft/rt,this.minY)))}this.stackAbs=tt;s&&(f?this.minY=isNaN(this.minYp)?1:this.minYp:this.minX=isNaN(this.minXp)?1:this.minXp);h&&(f?this.minX=isNaN(this.minXp)?1:this.minXp:this.minY=isNaN(this.minYp)?1:this.minYp)},i.prototype.getMinY=function(){return this.minY},i.prototype.getMaxY=function(){return this.maxY},i.prototype.getMinX=function(){return this.minX},i.prototype.getMaxX=function(){return this.maxX},i.prototype.getMinXp=function(){return this.minXp},i.prototype.getMinYp=function(){return this.minYp},i.prototype.getDeltaX=function(){return this.dx},i.prototype.getDataTypeX=function(){return this.dataTypeX},i.prototype.getDataTypeY=function(){return this.dataTypeY},i.prototype.getStackedAbsSum=function(n){var t=this.stackAbs[n];return isFinite(t)?t:0},i.prototype.getXVals=function(){return this._xvals},i.isValid=function(n){return isFinite(n)},i}();t._DataInfo=f;e=function(t){function i(){t.call(this);this._content='<b>{seriesName}</b><br/>{x} {y}';this._threshold=15}return __extends(i,t),Object.defineProperty(i.prototype,"content",{get:function(){return this._content},set:function(n){n!=this._content&&(this._content=n)},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"threshold",{get:function(){return this._threshold},set:function(t){t!=this._threshold&&(this._threshold=n.asNumber(t))},enumerable:!0,configurable:!0}),i}(n.Tooltip);t.ChartTooltip=e})(t=n.chart||(n.chart={}))}(wijmo||(wijmo={}));__extends=this&&this.__extends||function(n,t){function r(){this.constructor=n}for(var i in t)t.hasOwnProperty(i)&&(n[i]=t[i]);n.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r)},function(n){var t;(function(t){'use strict';(function(n){n[n.Column=0]="Column";n[n.Bar=1]="Bar";n[n.Scatter=2]="Scatter";n[n.Line=3]="Line";n[n.LineSymbols=4]="LineSymbols";n[n.Area=5]="Area";n[n.Bubble=6]="Bubble";n[n.Candlestick=7]="Candlestick";n[n.HighLowOpenClose=8]="HighLowOpenClose";n[n.Spline=9]="Spline";n[n.SplineSymbols=10]="SplineSymbols";n[n.SplineArea=11]="SplineArea"})(t.ChartType||(t.ChartType={}));var i=t.ChartType,r=function(r){function u(n,t){r.call(this,n,null);this._chartType=i.Column;this.initialize(t)}return __extends(u,r),u.prototype._getChartType=function(){return this._chartType},Object.defineProperty(u.prototype,"chartType",{get:function(){return this._chartType},set:function(t){t!=this._chartType&&(this._chartType=n.asEnum(t,i),this.invalidate())},enumerable:!0,configurable:!0}),Object.defineProperty(u.prototype,"rotated",{get:function(){return this._rotated},set:function(t){t!=this._rotated&&(this._rotated=n.asBoolean(t),this.invalidate())},enumerable:!0,configurable:!0}),Object.defineProperty(u.prototype,"stacking",{get:function(){return this._stacking},set:function(i){i!=this._stacking&&(this._stacking=n.asEnum(i,t.Stacking),this.invalidate())},enumerable:!0,configurable:!0}),Object.defineProperty(u.prototype,"options",{get:function(){return this._options},set:function(n){n!=this._options&&(this._options=n,this.invalidate())},enumerable:!0,configurable:!0}),u}(t.FlexChartCore);t.FlexChart=r})(t=n.chart||(n.chart={}))}(wijmo||(wijmo={}));__extends=this&&this.__extends||function(n,t){function r(){this.constructor=n}for(var i in t)t.hasOwnProperty(i)&&(n[i]=t[i]);n.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r)},function(n){var t;(function(t){'use strict';var e,r,s,u,h,c,i,f,o;(function(n){n[n.None=0]="None";n[n.Left=1]="Left";n[n.Top=2]="Top";n[n.Right=3]="Right";n[n.Bottom=4]="Bottom";n[n.Auto=5]="Auto"})(t.Position||(t.Position={}));e=t.Position,function(n){n[n.X=0]="X";n[n.Y=1]="Y"}(t.AxisType||(t.AxisType={}));r=t.AxisType,function(n){n[n.Auto=0]="Auto";n[n.Show=1]="Show"}(t.OverlappingLabels||(t.OverlappingLabels={}));s=t.OverlappingLabels,function(n){n[n.None=0]="None";n[n.Outside=1]="Outside";n[n.Inside=2]="Inside";n[n.Cross=3]="Cross"}(t.TickMark||(t.TickMark={}));u=t.TickMark;h=function(){function i(t){this._GRIDLINE_WIDTH=.25;this._LINE_WIDTH=1;this._TICK_WIDTH=1;this._TICK_HEIGHT=4;this._TICK_OVERLAP=1;this._TICK_LABEL_DISTANCE=4;this._minorGrid=!1;this._labels=!0;this._axisLine=!0;this._isTimeAxis=!1;this._labelPadding=2;this.rangeChanged=new n.Event;this._customConvert=null;this._customConvertBack=null;this.__uniqueId=i._id++;this._position=t;t==e.Bottom||t==e.Top?this._axisType=r.X:(this._axisType=r.Y,this._axisLine=!1);this._minorTickMarks=u.None;this._overlap=s.Auto}return Object.defineProperty(i.prototype,"hostElement",{get:function(){return this._hostElement},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"actualMin",{get:function(){return this._isTimeAxis?new Date(this._actualMin):this._actualMin},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"actualMax",{get:function(){return this._isTimeAxis?new Date(this._actualMax):this._actualMax},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"min",{get:function(){return this._min},set:function(t){t!=this._min&&(this._min=n.isDate(t)?n.asDate(t,!0):n.asNumber(t,!0),this._invalidate())},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"max",{get:function(){return this._max},set:function(t){t!=this._max&&(this._max=n.isDate(t)?n.asDate(t,!0):n.asNumber(t,!0),this._invalidate())},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"reversed",{get:function(){return this._reversed},set:function(t){this._reversed!=t&&(this._reversed=n.asBoolean(t),this._invalidate())},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"position",{get:function(){return this._position},set:function(t){t!=this._position&&(this._position=n.asEnum(t,e,!1),this._axisType=this._position==e.Bottom||this._position==e.Top?r.X:r.Y,this._invalidate())},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"majorUnit",{get:function(){return this._majorUnit},set:function(t){t!=this._majorUnit&&(this._majorUnit=n.asNumber(t,!0),this._invalidate())},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"minorUnit",{get:function(){return this._minorUnit},set:function(t){t!=this._minorUnit&&(this._minorUnit=n.asNumber(t,!0),this._invalidate())},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"name",{get:function(){return this._name},set:function(t){t!=this._name&&(this._name=n.asString(t,!0))},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"title",{get:function(){return this._title},set:function(t){t!=this._title&&(this._title=n.asString(t,!0),this._invalidate())},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"format",{get:function(){return this._format},set:function(t){t!=this._format&&(this._format=n.asString(t,!0),this._invalidate())},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"majorGrid",{get:function(){return this._majorGrid},set:function(t){t!=this._majorGrid&&(this._majorGrid=n.asBoolean(t,!0),this._invalidate())},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"majorTickMarks",{get:function(){return this._majorTickMarks},set:function(t){t!=this._majorTickMarks&&(this._majorTickMarks=n.asEnum(t,u,!0),this._invalidate())},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"minorGrid",{get:function(){return this._minorGrid},set:function(t){t!=this._minorGrid&&(this._minorGrid=n.asBoolean(t,!0),this._invalidate())},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"minorTickMarks",{get:function(){return this._minorTickMarks},set:function(t){t!=this._minorTickMarks&&(this._minorTickMarks=n.asEnum(t,u,!0),this._invalidate())},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"axisLine",{get:function(){return this._axisLine},set:function(t){t!=this._axisLine&&(this._axisLine=n.asBoolean(t,!0),this._invalidate())},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"labels",{get:function(){return this._labels},set:function(t){t!=this._labels&&(this._labels=n.asBoolean(t,!0),this._invalidate())},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"labelAlign",{get:function(){return this._labelAlign},set:function(t){t!=this._labelAlign&&(this._labelAlign=n.asString(t,!0),this._invalidate())},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"labelAngle",{get:function(){return this._labelAngle},set:function(t){t!=this._labelAngle&&(this._labelAngle=n.asNumber(t,!0),this._invalidate())},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"origin",{get:function(){return this._origin},set:function(t){t!=this._origin&&(this._origin=n.asNumber(t,!0),this._invalidate())},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"overlappingLabels",{get:function(){return this._overlap},set:function(t){t!=this._overlap&&(this._overlap=n.asEnum(t,s,!0),this._invalidate())},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"itemsSource",{get:function(){return this._items},set:function(t){this._items!=t&&(this._cv&&(this._cv.collectionChanged.removeHandler(this._cvCollectionChanged,this),this._cv=null),this._items=t,this._cv=n.asCollectionView(t),this._cv!=null&&this._cv.collectionChanged.addHandler(this._cvCollectionChanged,this))},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"binding",{get:function(){return this._binding},set:function(t){t!=this._binding&&(this._binding=n.asString(t,!0),this._invalidate())},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"itemFormatter",{get:function(){return this._ifmt},set:function(t){this._ifmt!=t&&(this._ifmt=n.asFunction(t,!0),this._invalidate())},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"logBase",{get:function(){return this._logBase},set:function(t){t!=this._logBase&&(this._logBase=n.asNumber(t,!0,!0),this._invalidate())},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"plotArea",{get:function(){return this._parea},set:function(i){i!=this._parea&&(this._parea=n.asType(i,t.PlotArea,!0),this._invalidate())},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"labelPadding",{get:function(){return this._labelPadding},set:function(t){t!=this._labelPadding&&(this._labelPadding=n.asNumber(t,!0,!0),this._invalidate())},enumerable:!0,configurable:!0}),i.prototype.onRangeChanged=function(){this.rangeChanged.raise(this)},i.prototype._isOverlapped=function(n,t,i){var u=this._lbls,r,f,e,c;if(u!=null&&u.length>0){var o=u.length,s=this._values&&this._values.length==o?this._values:null,h=0;for(r=0;r<o;r++)if(f=s?s[r]:r,f>=this._actualMin&&f<=this._actualMax){if(e=t*(f-this._actualMin)/(this._actualMax-this._actualMin),c=n.measureString(u[r],i),r>0&&Math.abs(e-h)<c.width+12)return!0;h=e}}return!1},i.prototype._getHeight=function(i,f){var k,d,h,g,c,e,s,it,l,o;this._actualAngle=undefined;var a=t.FlexChart._CSS_LABEL,rt=t.FlexChart._CSS_TITLE,nt=this._actualMax-this._actualMin,b=this._nicePrecision(nt);(b<0||b>15)&&(b=0);var v=.1*nt,y=this._lbls,p=this.labelAngle;if(this.labels){if(v=this._updateAutoFormat(v),y!=null&&y.length>0){for(k=y.length,d=this._values&&this._values.length==k?this._values:null,this._annoSize=new n.Size,h=0;h<k;h++)g=d?d[h]:h,g>=this._actualMin&&g<=this._actualMax&&(e=i.measureString(y[h],a),this.axisType==r.X?e.width>this._annoSize.width&&(this._annoSize.width=e.width):e.width>this._annoSize.width&&(this._annoSize.width=e.width),e.height>this._annoSize.height&&(this._annoSize.height=e.height));p===undefined&&this.axisType==r.X&&(this._isOverlapped(i,f,a)?p=this._actualAngle=-45:this._actualAngle=0)}else c=this._formatValue(this._actualMin-v),e=i.measureString(c,a),this._annoSize=e,c=this._formatValue(this._actualMax+v),e=i.measureString(c,a),e.width>this._annoSize.width&&(this._annoSize.width=e.width),e.height>this._annoSize.height&&(this._annoSize.height=e.height);if(p){var w=p*Math.PI/180,tt=this._annoSize.width,s=this._annoSize.height;this._annoSize.width=tt*Math.abs(Math.cos(w))+s*Math.abs(Math.sin(w));this._annoSize.height=tt*Math.abs(Math.sin(w))+s*Math.abs(Math.cos(w))}}else this._annoSize=new n.Size;return s=2*this._labelPadding,s+=this._axisType==r.X?this._annoSize.height:this._annoSize.width+this._TICK_LABEL_DISTANCE+2,it=this._TICK_HEIGHT,l=this._TICK_OVERLAP,o==u.Outside?l=1:o==u.Inside?l=-1:o==u.Cross&&(l=0),o=this.majorTickMarks,(o===undefined||o===null)&&(o=u.Outside),o!=u.None&&(s+=.5*(1+l)*it),this._title&&(c=this._title,this._szTitle=i.measureString(c,rt),s+=this._szTitle.height),i.fontSize=null,s},i.prototype._updateAutoFormat=function(n){if(this._isTimeAxis){var t=this.format,r=.001*(this._actualMax-this._actualMin)/10,u=new f(r*f.TicksPerSecond),i=isNaN(this._majorUnit)?o.NiceTimeSpan(u,t):f.fromDays(this._majorUnit);t||(this._tfmt=o.GetTimeDefaultFormat(1e3*i.TotalSeconds,0));n=i.TotalSeconds}return n},i.prototype._updateActualLimits=function(i,r,u,f,e){var a,v,y,o,s,h,p,k,d,c,l,w,b;if(f===void 0&&(f=null),e===void 0&&(e=null),a=this._actualMin,v=this._actualMax,this._isTimeAxis=i==n.DataType.Date,y=this._chart._getChartType(),f&&f.length>0&&!this._isTimeAxis&&y!=t.ChartType.Column&&y!=t.ChartType.Bar&&(r-=.5,u+=.5),o=this._min,s=this._max,n.isDate(o)&&(o=o.valueOf()),n.isDate(s)&&(s=s.valueOf()),this._actualMin=o!==null&&o!==undefined?o:r,this._actualMax=s!==null&&s!==undefined?s:u,this._actualMin==this._actualMax&&(this._actualMin-=.5,this._actualMax+=.5),this.logBase>0&&(h=this.logBase,p=Math.log(h),this._max||(k=Math.ceil(Math.log(this._actualMax)/p),this._actualMax=Math.pow(h,k)),this._min||(d=Math.floor(Math.log(this._actualMin)/p),this._actualMin=Math.pow(h,d)),(this._actualMin<=0||isNaN(this._actualMin))&&(this._actualMin=1),this._actualMax<this._actualMin&&(this._actualMax=this._actualMin+1)),(a==this._actualMin||isNaN(a)&&isNaN(this._actualMin))&&(v==this._actualMax||isNaN(v)&&isNaN(this._actualMax))||this.onRangeChanged(),this._items){this._values=[];this._lbls=[];var tt=this._items.length,g='value',nt='text';for(this.binding&&(c=this.binding.split(','),c.length==2&&(g=c[0],nt=c[1])),l=0;l<tt;l++)w=this._items[l],b=w[g],n.isNumber(b)&&(this._values.push(b),this._lbls.push(w[nt]))}else this._lbls=f,this._values=e},i.prototype._layout=function(t,i){var u=this.axisType==r.Y,f=this._position!=e.Top&&this._position!=e.Right;this._plotrect=i;this._axrect=u?new n.Rect(t.left,t.top,t.height,t.width):t},i.prototype._render=function(f){var rt,d,ft,vt,kt,dt,gt,b,y,h,wt,ni,a,c,it;if(this.position!=e.None){this._vals={};var l=t.FlexChart._CSS_LABEL,st=t.FlexChart._CSS_TITLE,ht=t.FlexChart._CSS_LINE,ti=t.FlexChart._CSS_GRIDLINE,ct=t.FlexChart._CSS_TICK,o=0;this.labelAngle&&(o=this.labelAngle,o>90?o=90:o<-90&&(o=-90));rt=this.labelPadding||2;this.labelAngle===undefined&&this._actualAngle!==undefined&&(o=this._actualAngle);var ut=this.axisType==r.Y,k=this._position!=e.Top&&this._position!=e.Right,lt=t.FlexChart._FG,bt=this._actualMax-this._actualMin;if(!isNaN(bt)){d=this._calcMajorUnit();d==0&&(d=this._niceTickNumber(bt)*.1);var at=Math.min(i.MAX_MAJOR,Math.floor(bt/d)+1),p=[],nt=[];if(this._rects=[],this._vals.major=p,this._vals.hasLbls=[],ft=Math.floor(this._actualMin/d)*d,ft<this._actualMin&&(ft+=d),vt=!1,this._lbls&&this._lbls.length>0)if(nt=this._lbls,this._values.length==0)for(vt=!0,a=0;a<nt.length;a++)p.push(a);else p=this._values;else this._isTimeAxis?this._createTimeLabels(ft,at,p,nt):this.logBase?this._createLogarithmicLabels(this._actualMin,this._actualMax,this.majorUnit,p,nt,!0):this._createLabels(ft,at,d,p,nt);at=Math.min(p.length,nt.length);f.textFill=lt;var ii=this._TICK_HEIGHT,ri=this._TICK_WIDTH,et=this._TICK_OVERLAP,ui=lt,w=this.majorTickMarks;(w===undefined||w===null)&&(w=u.Outside);kt=this._GRIDLINE_WIDTH;dt=lt;w==u.Outside?et=1:w==u.Inside?et=-1:w==u.Cross&&(et=0);var yt=.5*(et-1)*ii,g=.5*(1+et)*ii,pt=this._getLabelAlign(ut);for(a=0;a<at;a++){var ot=!0,c=p[a],v=nt[a],tt=this.labels;tt&&(vt||this.itemsSource)&&this.majorUnit&&a%this.majorUnit!=0&&(tt=!1);c>=this._actualMin&&c<=this._actualMax&&(gt=c!=this._actualMin&&this.majorGrid,ut?(b=this.convert(c),gt&&(f.stroke=dt,f.strokeWidth=kt,f.drawLine(this._plotrect.left,b,this._plotrect.right,b,ti)),f.stroke=ui,f.strokeWidth=ri,k?(w!=u.None&&f.drawLine(this._axrect.right-yt,b,this._axrect.right-g,b,ct),tt&&(h=new n.Point(this._axrect.right-g-this._TICK_LABEL_DISTANCE-rt,b),o>0?o==90?t.FlexChart._renderRotatedText(f,v,h,1,0,h,o,l):t.FlexChart._renderRotatedText(f,v,h,2,1,h,o,l):o<0?o==-90?t.FlexChart._renderRotatedText(f,v,h,1,2,h,o,l):t.FlexChart._renderRotatedText(f,v,h,2,1,h,o,l):this._renderLabel(f,c,v,h,2,pt,l))):(w!=u.None&&f.drawLine(this._axrect.left+yt,b,this._axrect.left+g,b,ct),tt&&(h=new n.Point(this._axrect.left+g+this._TICK_LABEL_DISTANCE+rt,b),o>0?o==90?t.FlexChart._renderRotatedText(f,v,h,1,2,h,o,l):t.FlexChart._renderRotatedText(f,v,h,0,1,h,o,l):o<0?o==-90?t.FlexChart._renderRotatedText(f,v,h,1,0,h,o,l):t.FlexChart._renderRotatedText(f,v,h,0,1,h,o,l):this._renderLabel(f,c,v,h,0,pt,l)))):(y=this.convert(c),this.overlappingLabels==s.Auto&&this._xCross(y)&&(tt=!1),gt&&(f.stroke=dt,f.strokeWidth=kt,f.drawLine(y,this._plotrect.top,y,this._plotrect.bottom,ti)),f.stroke=ui,f.strokeWidth=ri,k?(ot=!1,tt&&(h=new n.Point(y,this._axrect.top+g+rt),ot=o!=0?this._renderRotatedLabel(f,v,h,o,l,k):this._renderLabel(f,c,v,h,pt,0,l)),w!=u.None&&ot&&(y=this.convert(c),f.drawLine(y,this._axrect.top+yt,y,this._axrect.top+g,ct))):(tt&&(h=new n.Point(y,this._axrect.bottom-g-rt),ot=o!=0?this._renderRotatedLabel(f,v,h,o,l,k):this._renderLabel(f,c,v,h,pt,2,l)),w!=u.None&&(y=this.convert(c),f.drawLine(y,this._axrect.bottom-yt,y,this._axrect.bottom-g,ct)))));this._vals.hasLbls.push(ot)}}if(this.minorGrid||this.minorTickMarks!=u.None)if(this.logBase){if(this.minorUnit>0){for(wt=[],this._createLogarithmicLabels(this._actualMin,this._actualMax,this.minorUnit,wt,null,!1),ni=[],a=0;a<wt.length;a++)c=wt[a],p.indexOf(c)==-1&&c>this._actualMin&&ni.push(c);this._renderMinors(f,ni,ut,k)}}else this._createMinors(f,p,ut,k,vt);f.stroke=lt;f.fontSize=null;ut?k?(this._title&&(it=new n.Point(this._axrect.left+this._szTitle.height*.5,this._axrect.top+.5*this._axrect.height),t.FlexChart._renderRotatedText(f,this._title,it,1,1,it,-90,st)),this.axisLine&&f.drawLine(this._axrect.right,this._axrect.top,this._axrect.right,this._axrect.bottom,ht)):(this._title&&(it=new n.Point(this._axrect.right-this._szTitle.height*.5,this._axrect.top+.5*this._axrect.height),t.FlexChart._renderRotatedText(f,this._title,it,1,1,it,90,st)),this.axisLine&&f.drawLine(this._axrect.left,this._axrect.top,this._axrect.left,this._axrect.bottom,ht)):k?(this.axisLine&&f.drawLine(this._axrect.left,this._axrect.top,this._axrect.right,this._axrect.top,ht),this._title&&t.FlexChart._renderText(f,this._title,new n.Point(this._axrect.left+.5*this._axrect.width,this._axrect.bottom),1,2,st)):(this.axisLine&&f.drawLine(this._axrect.left,this._axrect.bottom,this._axrect.right,this._axrect.bottom,ht),this._title&&t.FlexChart._renderText(f,this._title,new n.Point(this._axrect.left+.5*this._axrect.width,this._axrect.top),1,0,st));f.stroke=null;f.fontSize=null;f.textFill=null;f.strokeWidth=null}},i.prototype._xCross=function(n){for(var i,r=this._rects.length,t=0;t<r;t++)if(i=this._rects[t],n>=i.left&&n<=i.right)return!0;return!1},i.prototype._createMinors=function(t,r,u,f,e){var o;if(r&&r.length>1){var c=this.majorUnit?this._isTimeAxis?this.majorUnit*864e5:this.majorUnit:r[1]-r[0],h=n.isNumber(this.minorUnit)?this._isTimeAxis?this.minorUnit*864e5:this.minorUnit:c*.5,s=[];for(o=r[0];o>this._actualMin&&s.length<i.MAX_MINOR;o-=h)r.indexOf(o)==-1&&s.push(o);for(o=r[0]+h;o<this._actualMax&&s.length<i.MAX_MINOR;o+=h)r.indexOf(o)==-1?s.push(o):e&&this.majorUnit&&o%this.majorUnit!=0&&s.push(o);this._renderMinors(t,s,u,f)}},i.prototype._renderMinors=function(n,i,r,f){var w=this._TICK_HEIGHT,b=this._TICK_WIDTH,s=this._TICK_OVERLAP,k=t.FlexChart._FG,y=this.minorTickMarks,p=!0,h,e,o;this._vals.minor=i;y==u.Outside?s=1:y==u.Inside?s=-1:y==u.Cross?s=0:p=!1;var c=.5*(s-1)*w,l=.5*(1+s)*w,it=i?i.length:0,d=this.minorGrid,a=this._plotrect,g=this._GRIDLINE_WIDTH,nt=t.FlexChart._FG,tt=t.FlexChart._CSS_GRIDLINE_MINOR,v=t.FlexChart._CSS_TICK_MINOR;for(h=0;h<it;h++)r?(e=this.convert(i[h]),p&&(n.stroke=k,n.strokeWidth=b,f?n.drawLine(this._axrect.right-c,e,this._axrect.right-l,e,v):n.drawLine(this._axrect.left+c,e,this._axrect.left+l,e,v)),d&&(n.stroke=nt,n.strokeWidth=g,n.drawLine(a.left,e,a.right,e,tt))):(o=this.convert(i[h]),p&&(n.stroke=k,n.strokeWidth=b,f?n.drawLine(o,this._axrect.top+c,o,this._axrect.top+l,v):n.drawLine(o,this._axrect.bottom-c,o,this._axrect.bottom-l,v)),d&&(n.stroke=nt,n.strokeWidth=g,n.drawLine(o,a.top,o,a.bottom,tt)))},i.prototype._renderLabel=function(n,i,u,f,o,h,c){var p=!1,a,l;if(this.itemFormatter&&(a=f.clone(),this.axisType==r.X?a.y=this.position==e.Top?this._plotrect.top:this._plotrect.bottom:a.x=this.position==e.Right?this._plotrect.right:this._plotrect.left,l={val:i,text:u,pos:a,cls:c},l=this.itemFormatter(n,l),l?(u=l.text,c=l.cls):u=null),u){var y=this._rects,w=this.overlappingLabels==s.Auto&&this._actualAngle===undefined,v=t.FlexChart._renderText(n,u,f,o,h,c,null,null,function(n){var r,i;if(w)for(r=y.length,i=0;i<r;i++)if(t.FlexChart._intersects(y[i],n))return!1;return!0});v&&(v.left+=4,v.width+=8,y.push(v),p=!0)}return p},i.prototype._renderRotatedLabel=function(i,r,u,f,e,o){var y,h,l,p;if(r){var c=i.measureString(r,e),a=new n.Rect(u.x,u.y,c.height+2,c.width),v=this._rects,w=this.overlappingLabels==s.Auto;if(w)for(y=v.length,h=0;h<y;h++)if(t.FlexChart._intersects(v[h],a))return!1;return f!=90&&f!=-90&&(l=.5*c.height*Math.abs(Math.sin(f*Math.PI/180)),o?u.y+=l:u.y-=l),p=o?f>0?0:2:f>0?2:0,t.FlexChart._renderRotatedText(i,r,u,p,1,u,f,e),this._rects.push(a),!0}return!1},i.prototype._getLabelAlign=function(n){var t=1,i;return this.labelAlign&&(i=this.labelAlign.toLowerCase(),n?i=='top'?t=0:i=='bottom'&&(t=2):i=='left'?t=0:i=='right'&&(t=2)),t},i.prototype.convert=function(n,t,i){var f=t==null?this._actualMax:t,u=i==null?this._actualMin:i,l,a,c;if(f==u)return 0;var s=this._axrect.left,e=this._axrect.width,h=this._axrect.top,o=this._axrect.height;return this._customConvert!=null?(l=this._customConvert(n,u,f),this.axisType==r.Y?h+l*o:s+l*e):(a=this.logBase,a?n<=0?NaN:(c=Math.log(f/u),this._reversed?this.axisType==r.Y?h+Math.log(n/u)/c*o:s+e-Math.log(n/u)/c*e:this.axisType==r.Y?h+o-Math.log(n/u)/c*o:s+Math.log(n/u)/c*e):this._reversed?this.axisType==r.Y?h+(n-u)/(f-u)*o:s+e-(n-u)/(f-u)*e:this.axisType==r.Y?h+o-(n-u)/(f-u)*o:s+(n-u)/(f-u)*e)},i.prototype.convertBack=function(n){var s;if(this._actualMax==this._actualMin)return 0;var i=this._plotrect.left,t=this._plotrect.width,u=this._plotrect.top,f=this._plotrect.height,e=this._actualMax-this._actualMin,o=this.logBase;return this._customConvertBack!=null?this.axisType==r.Y?this._customConvertBack((n-u)/f,this._actualMin,this._actualMax):this._customConvertBack((n-i)/t,this._actualMin,this._actualMax):o?(s=0,s=this._reversed?this.axisType==r.Y?(n-u)/f:1-(n-i)/t:this.axisType==r.Y?1-(n-u)/f:(n-i)/t,Math.pow(o,(Math.log(this._actualMin)+(Math.log(this._actualMax)-Math.log(this._actualMin))*s)/Math.log(o))):this._reversed?this.axisType==r.Y?this._actualMin+(n-u)*e/f:this._actualMin+(i+t-n)*e/t:this.axisType==r.Y?this._actualMax-(n-u)*e/f:this._actualMin+(n-i)*e/t},Object.defineProperty(i.prototype,"axisType",{get:function(){var n=this._chart;if(n){if(n.axisX==this)return r.X;if(n.axisY==this)return r.Y}return this._axisType},enumerable:!0,configurable:!0}),i.prototype._getMinNum=function(){return this._actualMin},i.prototype._getMaxNum=function(){return this._actualMax},i.prototype._invalidate=function(){this._chart&&this._chart.invalidate()},i.prototype._cvCollectionChanged=function(){this._invalidate()},i.prototype._createLabels=function(n,t,i,r,u){for(var f=0;f<t;f++){var o=(n+i*f).toFixed(14),e=parseFloat(o),s=this._formatValue(e);r.push(e);u.push(s)}},i.prototype._createLogarithmicLabels=function(n,t,i,r,u,f){var s=this.logBase,w=Math.log(s),b=Math.floor(Math.log(n)/w),k=Math.ceil(Math.log(t)/w),h=s,y=!0,c,p,l,a,d,v,o;for(i>0&&(y=!1,h=i),h<s&&(h=s),c=(k-b+1)*s/h,p=1,f&&(l=this._getAnnoNumber(this.position==e.Left||this.position==e.Left),c>l?p=Math.floor(c/l+1):y&&(c<=.2*l?h=.2*s:c<=.1*l&&(h=.1*s))),a=b;a<=k;a+=p)if(y)for(d=Math.pow(s,a),v=0;v*h<s-1;v++)o=d*(1+v*h),o>=n&&o<=t&&(v==0?(r.unshift(o),u&&u.unshift(this._formatValue(o))):(r.push(o),u&&u.push(this._formatValue(o))));else o=Math.pow(h,a),o>=n&&o<=t&&(r.push(o),u&&u.push(this._formatValue(o)))},i.prototype._createTimeLabels=function(n,t,i,u){var p=this._actualMin,w=this._actualMax,l=new Date(this._actualMin),b=new Date(this._actualMax),k=this._format,d=this._getAnnoNumber(this._axisType==r.Y),tt,g,nt,s,ft,a,v,e,h;d>12&&(d=12);var rt=.001*(this._actualMax-this._actualMin)/d,ut=new f(rt*f.TicksPerSecond),c=isNaN(this._majorUnit)?o.NiceTimeSpan(ut,k):f.fromDays(this._majorUnit);if(k||(this._tfmt=k=o.GetTimeDefaultFormat(1e3*c.TotalSeconds,0)),tt=c.Ticks,g=o.RoundTime(p,c.TotalDays,!1),isFinite(g)&&(p=g),nt=o.RoundTime(w,c.TotalDays,!0),isFinite(nt)&&(w=nt),s=new Date(p),ft=new Date(w),c.TotalDays>=365&&isNaN(this._majorUnit))for(s=new Date(l.getFullYear(),1,1),s<l&&s.setFullYear(s.getFullYear()+1),a=c.TotalDays/365,a=a-a%1,e=s;e<=b;e.setFullYear(e.getFullYear()+a))h=e.valueOf(),i.push(h),u.push(this._formatValue(h));else if(c.TotalDays>=30&&isNaN(this._majorUnit))for(s=new Date(l.getFullYear(),l.getMonth(),1),s<l&&s.setMonth(s.getMonth()+1),v=c.TotalDays/30,v=v-v%1,e=s;e<=b;e.setMonth(e.getMonth()+v))h=e.valueOf(),i.push(h),u.push(this._formatValue(h));else{var y=1e3*tt/f.TicksPerSecond,e=s,it=l.getTime()-e.getTime();for(it>y&&(e=new Date(e.getTime()+Math.floor(it/y)*y));e<=b;e=new Date(e.getTime()+y))e>=l&&(h=e.valueOf(),i.push(h),u.push(this._formatValue(h)))}},i.prototype._formatValue=function(t){if(this._isTimeAxis)return this._format?n.Globalize.format(new Date(t),this._format):n.Globalize.format(new Date(t),this._tfmt);if(this._format)return n.Globalize.format(t,this._format);var i=t==Math.round(t)?'n0':'n';return n.Globalize.format(t,i)},i.prototype._calcMajorUnit=function(){var n=this._majorUnit;if(isNaN(n)){var i=this._actualMax-this._actualMin,u=this._nicePrecision(i),t=i/this._getAnnoNumber(this.axisType==r.Y);n=this._niceNumber(2*t,-u,!0);n<t&&(n=this._niceNumber(t,-u+1,!1));n<t&&(n=this._niceTickNumber(t))}return n},i.prototype._getAnnoNumber=function(n){var i=n?this._annoSize.height:this._annoSize.width,r=n?this._axrect.height:this._axrect.width,t;return i>0&&r>0?(t=Math.floor(r/(i+6)),t<=0&&(t=1),t):10},i.prototype._nicePrecision=function(n){var i,t,r;return n<=0||isNaN(n)?0:(i=Math.log(n)/Math.LN10,t=i>=0?Math.floor(i):Math.ceil(i),r=n/Math.pow(10,t),r<3&&(t=-t+1,r=n/Math.pow(10,t),r<3&&(t=t+1)),t)},i.prototype._niceTickNumber=function(n){if(n==0)return n;n<0&&(n=-n);var u=Math.log(n)/Math.LN10,r=Math.floor(u),i=n/Math.pow(10,r),t=10;return i<=1?t=1:i<=2?t=2:i<=5&&(t=5),t*Math.pow(10,r)},i.prototype._niceNumber=function(n,t,i){if(n==0)return n;n<0&&(n=-n);var u=n/Math.pow(10,t),r=10;return i?u<1.5?r=1:u<3?r=2:u<4.5?r=4:u<7&&(r=5):u<=1?r=1:u<=2?r=2:u<=5&&(r=5),r*Math.pow(10,t)},Object.defineProperty(i.prototype,"_uniqueId",{get:function(){return this.__uniqueId},enumerable:!0,configurable:!0}),i.MAX_MAJOR=1e3,i.MAX_MINOR=2e3,i._id=0,i}();t.Axis=h;c=function(n){function t(){n.apply(this,arguments)}return __extends(t,n),t.prototype.getAxis=function(n){var t=this.indexOf(n);return t>-1?this[t]:null},t.prototype.indexOf=function(n){for(var t=0;t<this.length;t++)if(this[t].name==n)return t;return-1},t}(n.collections.ObservableArray);t.AxisCollection=c,function(n){n[n.tickf7=-7]="tickf7";n[n.tickf6=-6]="tickf6";n[n.tickf5=-5]="tickf5";n[n.tickf4=-4]="tickf4";n[n.tickf3=-3]="tickf3";n[n.tickf2=-2]="tickf2";n[n.tickf1=-1]="tickf1";n[n.second=1]="second";n[n.minute=60]="minute";n[n.hour=3600]="hour";n[n.day=86400]="day";n[n.week=604800]="week";n[n.month=2678400]="month";n[n.year=31536e3]="year";n[n.maxtime=Number.MAX_VALUE]="maxtime"}(i||(i={}));f=function(){function n(n){this.ticks=n}return Object.defineProperty(n.prototype,"Ticks",{get:function(){return this.ticks},enumerable:!0,configurable:!0}),Object.defineProperty(n.prototype,"TotalSeconds",{get:function(){return this.ticks/1e7},enumerable:!0,configurable:!0}),Object.defineProperty(n.prototype,"TotalDays",{get:function(){return this.ticks/864e9},enumerable:!0,configurable:!0}),n.fromSeconds=function(t){return new n(t*1e7)},n.fromDays=function(t){return new n(t*864e9)},n.TicksPerSecond=1e7,n}();o=function(){function r(i){n.isDate(i)?this.init(i):n.isNumber(i)&&this.init(t.FlexChart._fromOADate(i))}return r.prototype.init=function(n){this.year=n.getFullYear();this.month=n.getMonth();this.day=n.getDate();this.hour=n.getHours();this.minute=n.getMinutes();this.second=n.getSeconds()},r.prototype.getTimeAsDateTime=function(){var t=0,n=0,r=0,i;return this.hour>=24&&(this.hour-=24,this.day+=1),this.month<0?(t=-1-this.day,this.month=1):this.month>11&&(t=this.month-12,this.month=12),this.day<1?(n=-1-this.day,this.day=1):this.day>28&&this.month==2?(n=this.day-28,this.day=28):this.day>30&&(this.month==4||this.month==4||this.month==6||this.month==9||this.month==11)?(n=this.day-30,this.day=30):this.day>31&&(n=this.day-31,this.day=31),this.second>59&&(r=this.second-59,this.second=59),i=0,this.minute>59&&(i=this.minute-59,this.minute=59),new Date(this.year,this.month,this.day,this.hour,this.minute,this.second)},r.prototype.getTimeAsDouble=function(){return this.getTimeAsDateTime().valueOf()},r.tround=function(n,t,i){var r=n/t*t;return r=r-r%1,i&&r!=n&&(t=t-t%1,r+=t),r},r.RoundTime=function(n,t,u){var e=t*86400,f;if(e>0)return(f=new r(n),e<i.minute)?(f.second=this.tround(f.second,e,u),f.getTimeAsDouble()):(f.second=0,e<i.hour)?(e/=i.minute,f.minute=this.tround(f.minute,e,u),f.getTimeAsDouble()):(f.minute=0,e<i.day)?(e/=i.hour,f.hour=this.tround(f.hour,e,u),f.getTimeAsDouble()):(f.hour=0,e<i.month)?(e/=i.day,f.day=this.tround(f.day,e,u),f.getTimeAsDouble()):(f.day=1,e<i.year)?(e/=i.month,f.month!=1&&(f.month=this.tround(f.month,e,u)),f.getTimeAsDouble()):(f.month=1,e/=i.year,f.year=this.tround(f.year,e,u),f.getTimeAsDouble());var h=n,s=h-e,o=s/t*t;return u&&o!=s&&(o+=t),e+o},r.TimeSpanFromTmInc=function(n){var r=f.fromSeconds(1),t,u;if(n!=i.maxtime)if(n>i.tickf1)r=f.fromSeconds(n);else{for(t=n,u=1,t+=7;t>0;)u*=10,t--;r=new f(u)}return r},r.manualTimeInc=function(n){var t=i.second,r,f,u,e;if(n==null||n.length==0)return t;if(r=n.indexOf('f'),r>=0){if(f=-1,r>0&&n.substr(r-1,1)=='%')f=-1;else for(u=1;u<6;u++){if(r+u>=n.length)break;if(e=n.substr(r+u,1),e!='f')break;f--}t=f}else n.indexOf('s')>=0?t=i.second:n.indexOf('m')>=0?t=i.minute:n.indexOf('h')>=0||n.indexOf('H')?t=i.hour:n.indexOf('d')>=0?t=i.day:n.indexOf('M')>=0?t=i.month:n.indexOf('y')>=0&&(t=i.year);return t},r.getNiceInc=function(n,t,i){for(var u,r=0;r<n.length;r++)if(u=n[r]*i,t<=u)return u;return 0},r.NiceTimeSpan=function(n,t){var e=i.second,o,u,s;if(t!=null&&t.length>0&&(e=r.manualTimeInc(t)),o=0,u=0,e<i.second&&n.TotalSeconds<10){for(o=n.Ticks,u=r.TimeSpanFromTmInc(e).Ticks;o>10*u;)u*=10;return s=u,o>s&&(s*=2),o>s&&(s=5*u),o>s&&(s=10*u),new f(s)}if(o=Math.ceil(n.TotalSeconds),o==0)return r.TimeSpanFromTmInc(e);if(u=1,e<i.minute){if(o<i.minute&&(u=r.getNiceInc([1,2,5,10,15,30],o,e),u!=0))return f.fromSeconds(u);e=i.minute}if(e<i.hour){if(o<i.hour&&(u=r.getNiceInc([1,2,5,10,15,30],o,e),u!=0))return f.fromSeconds(u);e=i.hour}if(e<i.day){if(o<i.day&&(u=r.getNiceInc([1,3,6,12],o,e),u!=0))return f.fromSeconds(u);e=i.day}if(e<i.month){if(o<i.month&&(u=r.getNiceInc([1,2,7,14],o,e),u!=0))return f.fromSeconds(u);e=i.month}if(e<i.year){if(o<i.year&&(u=r.getNiceInc([1,2,3,4,6],o,e),u!=0))return f.fromSeconds(u);e=i.year}return u=100*i.year,o<u&&(u=r.getNiceInc([1,2,5,10,20,50],o,e),u==0&&(u=100*i.year)),f.fromSeconds(u)},r.NiceTimeUnit=function(n,t){var i=f.fromDays(n);return i=r.NiceTimeSpan(i,t),i.TotalDays},r.GetTimeDefaultFormat=function(n,t){var e;if(isNaN(n)||isNaN(t))return'';var r='s',o=f.fromSeconds(.001*(n-t)),u=o.TotalSeconds;if(u>=i.year)r='yyyy';else if(u>=i.month)r='MMM yyyy';else if(u>=i.day)r='MMM d';else if(u>=i.hour)r='ddd H:mm';else if(u>=.5*i.hour)r='H:mm';else if(u>=1)r='H:mm:ss';else if(u>0)for(e=o.Ticks,r="s.";e<f.TicksPerSecond;)e*=10,r+='f';return r},r.secInYear=86400,r}()})(t=n.chart||(n.chart={}))}(wijmo||(wijmo={}));__extends=this&&this.__extends||function(n,t){function r(){this.constructor=n}for(var i in t)t.hasOwnProperty(i)&&(n[i]=t[i]);n.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r)},function(n){var t;(function(t){'use strict';var f=function(){function t(){this._row=0;this._col=0;this._rect=new n.Rect(0,0,0,0)}return Object.defineProperty(t.prototype,"row",{get:function(){return this._row},set:function(t){t!=this._row&&(this._row=n.asInt(t,!0,!0),this._invalidate())},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"column",{get:function(){return this._col},set:function(t){t!=this._col&&(this._col=n.asInt(t,!0,!0),this._invalidate())},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"name",{get:function(){return this._name},set:function(t){t!=this._name&&(this._name=n.asString(t,!0))},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"width",{get:function(){return this._width},set:function(n){n!=this._width&&(this._width=n,this._invalidate())},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"height",{get:function(){return this._height},set:function(n){n!=this._height&&(this._height=n,this._invalidate())},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"style",{get:function(){return this._style},set:function(n){n!=this._style&&(this._style=n,this._invalidate())},enumerable:!0,configurable:!0}),t.prototype._invalidate=function(){this._chart&&this._chart.invalidate()},t.prototype._render=function(n){n.drawRect(this._rect.left,this._rect.top,this._rect.width,this._rect.height,null,this.style)},t.prototype._setPlotX=function(n,t){this._rect.left=n;this._rect.width=t},t.prototype._setPlotY=function(n,t){this._rect.top=n;this._rect.height=t},t}(),u,i,r;t.PlotArea=f;u=function(n){function t(){n.apply(this,arguments)}return __extends(t,n),t.prototype.getPlotArea=function(n){var t=this.indexOf(n);return t>-1?this[t]:null},t.prototype.indexOf=function(n){for(var t=0;t<this.length;t++)if(this[t].name==n)return t;return-1},t.prototype._getWidth=function(n){for(var t,r,i=0;i<this.length;i++)if(t=this[i],t.column==n&&t.row==0)return t.width;return r},t.prototype._getHeight=function(n){for(var t,r,i=0;i<this.length;i++)if(t=this[i],t.row==n&&t.column==0)return t.height;return r},t.prototype._calculateWidths=function(n,t){var u,i,f;if(t<=0)throw"ncols";for(u=[],i=0;i<t;i++)f=this._getWidth(i),u[i]=new r(f);return this._calculateLengths(n,t,u)},t.prototype._calculateHeights=function(n,t){var u,i,f;if(t<=0)throw"nrows";for(u=[],i=0;i<t;i++)f=this._getHeight(i),u[i]=new r(f);return this._calculateLengths(n,t,u)},t.prototype._calculateLengths=function(n,t,i){for(var s,e,u=[t],o=0,f=0,r=0;r<t;r++)i[r].isAbsolute?(u[r]=i[r].value,o+=u[r]):i[r].isStar?f+=i[r].value:i[r].isAuto&&f++;for(s=n-o,e=s/f,r=0;r<t;r++)i[r].isStar?u[r]=e*i[r].value:i[r].isAuto&&(u[r]=e),u[r]<0&&(u[r]=0);return u},t}(n.collections.ObservableArray);t.PlotAreaCollection=u,function(n){n[n.Auto=0]="Auto";n[n.Pixel=1]="Pixel";n[n.Star=2]="Star"}(i||(i={}));r=function(){function n(n){n===void 0&&(n=null);this._unitType=i.Auto;n&&(n=n.toString(),n.indexOf('*')>=0?(this._unitType=i.Star,n=n.replace('*',''),this._value=parseFloat(n),isNaN(this._value)&&(this._value=1)):(this._unitType=i.Pixel,this._value=parseFloat(n),isNaN(this._value)&&(this._unitType=i.Auto,this._value=1)))}return Object.defineProperty(n.prototype,"value",{get:function(){return this._value},enumerable:!0,configurable:!0}),Object.defineProperty(n.prototype,"isStar",{get:function(){return this._unitType==i.Star},enumerable:!0,configurable:!0}),Object.defineProperty(n.prototype,"isAbsolute",{get:function(){return this._unitType==i.Pixel},enumerable:!0,configurable:!0}),Object.defineProperty(n.prototype,"isAuto",{get:function(){return this._unitType==i.Auto},enumerable:!0,configurable:!0}),n}()})(t=n.chart||(n.chart={}))}(wijmo||(wijmo={}));__extends=this&&this.__extends||function(n,t){function r(){this.constructor=n}for(var i in t)t.hasOwnProperty(i)&&(n[i]=t[i]);n.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r)},function(n){var t;(function(t){'use strict';var r,u;(function(n){n[n.Visible=0]="Visible";n[n.Plot=1]="Plot";n[n.Legend=2]="Legend";n[n.Hidden=3]="Hidden"})(t.SeriesVisibility||(t.SeriesVisibility={}));r=t.SeriesVisibility,function(n){n[n.Dot=0]="Dot";n[n.Box=1]="Box"}(t.Marker||(t.Marker={}));var i=t.Marker,e=function(){function n(){}return n}(),f=function(t){function i(i){t.call(this);this._series=n.asType(i,u)}return __extends(i,t),Object.defineProperty(i.prototype,"series",{get:function(){return this._series},enumerable:!0,configurable:!0}),i}(n.EventArgs);t.SeriesEventArgs=f;u=function(){function u(){this._altStyle=null;this._symbolMarker=i.Dot;this._visibility=r.Visible;this.rendering=new n.Event}return Object.defineProperty(u.prototype,"style",{get:function(){return this._style},set:function(n){n!=this._style&&(this._style=n,this._invalidate())},enumerable:!0,configurable:!0}),Object.defineProperty(u.prototype,"altStyle",{get:function(){return this._altStyle},set:function(n){n!=this._altStyle&&(this._altStyle=n,this._invalidate())},enumerable:!0,configurable:!0}),Object.defineProperty(u.prototype,"symbolStyle",{get:function(){return this._symbolStyle},set:function(n){n!=this._symbolStyle&&(this._symbolStyle=n,this._invalidate())},enumerable:!0,configurable:!0}),Object.defineProperty(u.prototype,"symbolSize",{get:function(){return this._symbolSize},set:function(t){t!=this._symbolSize&&(this._symbolSize=n.asNumber(t,!0,!0),this._invalidate())},enumerable:!0,configurable:!0}),u.prototype._getSymbolSize=function(){return this.symbolSize!=null?this.symbolSize:this.chart.symbolSize},Object.defineProperty(u.prototype,"symbolMarker",{get:function(){return this._symbolMarker},set:function(t){t!=this._symbolMarker&&(this._symbolMarker=n.asEnum(t,i,!0),this._invalidate())},enumerable:!0,configurable:!0}),Object.defineProperty(u.prototype,"binding",{get:function(){return this._binding?this._binding:this._chart?this._chart.binding:null},set:function(t){t!=this._binding&&(this._binding=n.asString(t,!0),this._clearValues(),this._invalidate())},enumerable:!0,configurable:!0}),Object.defineProperty(u.prototype,"bindingX",{get:function(){return this._bindingX?this._bindingX:this._chart?this._chart.bindingX:null},set:function(t){t!=this._bindingX&&(this._bindingX=n.asString(t,!0),this._clearValues(),this._invalidate())},enumerable:!0,configurable:!0}),Object.defineProperty(u.prototype,"name",{get:function(){return this._name},set:function(n){this._name=n},enumerable:!0,configurable:!0}),Object.defineProperty(u.prototype,"itemsSource",{get:function(){return this._itemsSource},set:function(t){t!=this._itemsSource&&(this._cv&&(this._cv.currentChanged.removeHandler(this._cvCurrentChanged,this),this._cv.collectionChanged.removeHandler(this._cvCollectionChanged,this),this._cv=null),this._itemsSource=t,this._cv=n.asCollectionView(t),this._cv!=null&&(this._cv.currentChanged.addHandler(this._cvCurrentChanged,this),this._cv.collectionChanged.addHandler(this._cvCollectionChanged,this)),this._clearValues(),this._itemsSource=t,this._invalidate())},enumerable:!0,configurable:!0}),Object.defineProperty(u.prototype,"collectionView",{get:function(){return this._cv?this._cv:this._chart?this._chart.collectionView:null},enumerable:!0,configurable:!0}),Object.defineProperty(u.prototype,"chart",{get:function(){return this._chart},enumerable:!0,configurable:!0}),Object.defineProperty(u.prototype,"hostElement",{get:function(){return this._hostElement},enumerable:!0,configurable:!0}),Object.defineProperty(u.prototype,"legendElement",{get:function(){return this._legendElement},enumerable:!0,configurable:!0}),Object.defineProperty(u.prototype,"cssClass",{get:function(){return this._cssClass},set:function(t){this._cssClass=n.asString(t,!0)},enumerable:!0,configurable:!0}),Object.defineProperty(u.prototype,"visibility",{get:function(){return this._visibility},set:function(t){if(t!=this._visibility&&(this._visibility=n.asEnum(t,r),this._clearValues(),this._invalidate(),this._chart))this._chart.onSeriesVisibilityChanged(new f(this))},enumerable:!0,configurable:!0}),u.prototype.onRendering=function(n){this.rendering.raise(this,new t.RenderEventArgs(n))},u.prototype.hitTest=function(t,i){return n.isNumber(t)&&n.isNumber(i)?t=new n.Point(t,i):t instanceof MouseEvent&&(t=new n.Point(t.pageX,t.pageY)),n.asType(t,n.Point),this._chart?this._chart._hitTestSeries(t,this._chart.series.indexOf(this)):null},u.prototype.getPlotElement=function(n){if(this.hostElement&&n<this._pointIndexes.length){var t=this._pointIndexes[n];if(t<this.hostElement.childNodes.length)return this.hostElement.childNodes[t]}return null},Object.defineProperty(u.prototype,"axisX",{get:function(){return this._axisX},set:function(i){if(i!=this._axisX){if(this._axisX=n.asType(i,t.Axis,!0),this._axisX){var r=this._axisX._chart=this._chart;r&&r.axes.indexOf(this._axisX)==-1&&r.axes.push(this._axisX)}this._invalidate()}},enumerable:!0,configurable:!0}),Object.defineProperty(u.prototype,"axisY",{get:function(){return this._axisY},set:function(i){if(i!=this._axisY){if(this._axisY=n.asType(i,t.Axis,!0),this._axisY){var r=this._axisY._chart=this._chart;r&&r.axes.indexOf(this._axisY)==-1&&r.axes.push(this._axisY)}this._invalidate()}},enumerable:!0,configurable:!0}),u.prototype.getDataType=function(n){return n==0?this._valueDataType:n==1?this._xvalueDataType:null},u.prototype.getValues=function(n){var i,t;if(n==0)return this._values==null&&(this._valueDataType=null,this._cv!=null?(t=this._bindValues(this._cv.items,this._getBinding(0)),this._values=t.values,this._valueDataType=t.dataType):this.binding!=null&&this._chart!=null&&this._chart.collectionView!=null&&(t=this._bindValues(this._chart.collectionView.items,this._getBinding(0)),this._values=t.values,this._valueDataType=t.dataType)),this._values;if(n==1){if(this._xvalues==null&&(this._xvalueDataType=null,i=this,this.bindingX!=null))if(i._cv!=null)t=this._bindValues(i._cv.items,this.bindingX,!0),this._xvalueDataType=t.dataType,this._xvalues=t.values;else{if(this._bindingX==null)return null;i._chart!=null&&i._chart.collectionView!=null&&(t=this._bindValues(i._chart.collectionView.items,this.bindingX,!0),this._xvalueDataType=t.dataType,this._xvalues=t.values)}return this._xvalues}return null},u.prototype.drawLegendItem=function(n,t){var i=this._getChartType();i==null&&(i=this._chart._getChartType());this._drawLegendItem(n,t,i,this.name,this.style,this.symbolStyle)},u.prototype.measureLegendItem=function(n){return this._measureLegendItem(n,this.name)},u.prototype.legendItemLength=function(){return 1},u.prototype.getDataRect=function(){return null},u.prototype._getChartType=function(){return this._chartType},u.prototype._clearValues=function(){this._values=null;this._xvalues=null},u.prototype._getBinding=function(n){var i=null,t;return this.binding&&(t=this.binding.split(','),t&&t.length>n&&(i=t[n].trim())),i},u.prototype._getBindingValues=function(n){var t,i;return this._cv!=null?t=this._cv.items:this._chart!=null&&this._chart.collectionView!=null&&(t=this._chart.collectionView.items),i=this._bindValues(t,this._getBinding(n)),i.values},u.prototype._getItem=function(n){var i=null,t=null;return this.itemsSource!=null?t=this._cv!=null?this._cv.items:this.itemsSource:this._chart.itemsSource!=null&&(t=this._chart.collectionView!=null?this._chart.collectionView.items:this._chart.itemsSource),t!=null&&(i=t[n]),i},u.prototype._getLength=function(){var t=0,n=null;return this.itemsSource!=null?n=this._cv!=null?this._cv.items:this.itemsSource:this._chart.itemsSource!=null&&(n=this._chart.collectionView!=null?this._chart.collectionView.items:this._chart.itemsSource),n!=null&&(t=n.length),t},u.prototype._setPointIndex=function(n,t){this._pointIndexes[n]=t},u.prototype._getDataRect=function(){var s=this.getValues(0),h=this.getValues(1),e,t,u;if(s){var i=NaN,r=NaN,o=NaN,f=NaN,c=s.length;for(e=0;e<c;e++)t=s[e],isFinite(t)&&(isNaN(r)?r=f=t:t<r?r=t:t>f&&(f=t)),h&&(u=h[e],isFinite(u)&&(isNaN(i)?i=o=u:u<i?i=u:t>f&&(o=u)));if(h||(i=0,o=c-1),!isNaN(r))return new n.Rect(i,r,o-i,f-r)}return null},u.prototype._isCustomAxisX=function(){return this._axisX?this._chart?this._axisX!=this.chart.axisX:!0:!1},u.prototype._isCustomAxisY=function(){return this._axisY?this._chart?this._axisY!=this.chart.axisY:!0:!1},u.prototype._getAxisX=function(){var n=null;return this.axisX?n=this.axisX:this.chart&&(n=this.chart.axisX),n},u.prototype._getAxisY=function(){var n=null;return this.axisY?n=this.axisY:this.chart&&(n=this.chart.axisY),n},u.prototype._measureLegendItem=function(i,r){var u=new n.Size,f;return u.width=t.Series._LEGEND_ITEM_WIDTH,u.height=t.Series._LEGEND_ITEM_HEIGHT,this._name&&(f=i.measureString(r,t.FlexChart._CSS_LABEL),u.width+=f.width,u.height<f.height&&(u.height=f.height)),u.width+=3*t.Series._LEGEND_ITEM_MARGIN,u.height+=2*t.Series._LEGEND_ITEM_MARGIN,u},u.prototype._drawLegendItem=function(r,u,f,e,o,s){var a,v;r.strokeWidth=1;var h=t.Series._LEGEND_ITEM_MARGIN,p=null,w=null;p===null&&(p=this._chart._getColorLight(this._chart.series.indexOf(this)));w===null&&(w=this._chart._getColor(this._chart.series.indexOf(this)));r.fill=p;r.stroke=w;var c=u.top+.5*u.height,l=t.Series._LEGEND_ITEM_WIDTH,y=t.Series._LEGEND_ITEM_HEIGHT;switch(f){case t.ChartType.Area:case t.ChartType.SplineArea:r.drawRect(u.left+h,c-.5*y,l,y,null,o);break;case t.ChartType.Bar:case t.ChartType.Column:r.drawRect(u.left+h,c-.5*y,l,y,null,s?s:o);break;case t.ChartType.Scatter:case t.ChartType.Bubble:a=.3*l;v=.3*y;this.symbolMarker==i.Box?r.drawRect(u.left+h+.5*l-a,c-v,2*a,2*v,null,s):r.drawEllipse(u.left+.5*l+h,c,a,v,null,s);break;case t.ChartType.Line:case t.ChartType.Spline:r.drawLine(u.left+h,c,u.left+l+h,c,null,o);break;case t.ChartType.LineSymbols:case t.ChartType.SplineSymbols:a=.3*l;v=.3*y;this.symbolMarker==i.Box?r.drawRect(u.left+h+.5*l-a,c-v,2*a,2*v,null,s):r.drawEllipse(u.left+.5*l+h,c,a,v,null,s);r.drawLine(u.left+h,c,u.left+l+h,c,null,o);break;case t.ChartType.Candlestick:case t.ChartType.HighLowOpenClose:r.drawLine(u.left+h,c,u.left+l+h,c,null,s?s:o)}this._name&&t.FlexChart._renderText(r,e,new n.Point(u.left+y+2*h,c),0,1,t.FlexChart._CSS_LABEL)},u.prototype._cvCollectionChanged=function(){this._clearValues();this._invalidate()},u.prototype._cvCurrentChanged=function(){this._chart&&this._chart._notifyCurrentChanged&&this._invalidate()},u.prototype._bindValues=function(t,i,r){var o,s,c,u,f,h;if(r===void 0&&(r=!1),t!=null)for(c=t.length,o=new Array(t.length),u=0;u<c;u++)f=t[u],i!=null&&(f=f[i]),n.isNumber(f)?(o[u]=f,s=n.DataType.Number):n.isDate(f)?(o[u]=f.valueOf(),s=n.DataType.Date):r&&f&&(o[u]=u,s=n.DataType.Number);return h=new e,h.values=o,h.dataType=s,h},u.prototype._invalidate=function(){this._chart&&this._chart.invalidate()},u.prototype._indexToPoint=function(t){if(t>=0&&t<this._values.length){var i=this._values[t],r=this._xvalues?this._xvalues[t]:t;return new n.Point(r,i)}return null},u.prototype._getSymbolFill=function(n){var t=null;return this.symbolStyle&&(t=this.symbolStyle.fill),!t&&this.style&&(t=this.style.fill),!t&&this.chart&&(t=this.chart._getColorLight(n)),t},u.prototype._getSymbolStroke=function(n){var t=null;return this.symbolStyle&&(t=this.symbolStyle.stroke),!t&&this.style&&(t=this.style.stroke),!t&&this.chart&&(t=this.chart._getColor(n)),t},u.prototype._getAltSymbolStroke=function(){var n=null;return this.altStyle&&(n=this.altStyle.stroke),n},u.prototype._getAltSymbolFill=function(){var n=null;return this.altStyle&&(n=this.altStyle.fill),n},u._LEGEND_ITEM_WIDTH=10,u._LEGEND_ITEM_HEIGHT=10,u._LEGEND_ITEM_MARGIN=4,u._DEFAULT_SYM_SIZE=10,u}();t.SeriesBase=u})(t=n.chart||(n.chart={}))}(wijmo||(wijmo={}));__extends=this&&this.__extends||function(n,t){function r(){this.constructor=n}for(var i in t)t.hasOwnProperty(i)&&(n[i]=t[i]);n.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r)},function(n){var t;(function(t){'use strict';var i=function(i){function r(){i.apply(this,arguments)}return __extends(r,i),Object.defineProperty(r.prototype,"chartType",{get:function(){return this._chartType},set:function(i){i!=this._chartType&&(this._chartType=n.asEnum(i,t.ChartType,!0),this._invalidate())},enumerable:!0,configurable:!0}),r}(t.SeriesBase);t.Series=i})(t=n.chart||(n.chart={}))}(wijmo||(wijmo={})),function(n){var t;(function(){'use strict'})(t=n.chart||(n.chart={}))}(wijmo||(wijmo={})),function(n){var t;(function(t){'use strict';var i=function(){function i(n){this._strokeWidth=1;this._fontSize=null;this._fontFamily=null;this._element=n;this._create();this._element.appendChild(this._svg);i._isff===undefined&&(i._isff=navigator.userAgent.toLowerCase().indexOf('firefox')>=0)}return i.prototype.beginRender=function(){while(this._svg.firstChild)this._svg.removeChild(this._svg.firstChild);this._svg.appendChild(this._textGroup)},i.prototype.endRender=function(){this._textGroup.parentNode&&this._svg.removeChild(this._textGroup)},i.prototype.setViewportSize=function(n,t){this._svg.setAttribute('width',n.toString());this._svg.setAttribute('height',t.toString())},Object.defineProperty(i.prototype,"element",{get:function(){return this._svg},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"fill",{get:function(){return this._fill},set:function(n){this._fill=n},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"fontSize",{get:function(){return this._fontSize},set:function(n){this._fontSize=n},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"fontFamily",{get:function(){return this._fontFamily},set:function(n){this._fontFamily=n},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"stroke",{get:function(){return this._stroke},set:function(n){this._stroke=n},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"strokeWidth",{get:function(){return this._strokeWidth},set:function(n){this._strokeWidth=n},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"textFill",{get:function(){return this._textFill},set:function(n){this._textFill=n},enumerable:!0,configurable:!0}),i.prototype.addClipRect=function(n,t){if(n&&t){var u=document.createElementNS(i.svgNS,'clipPath'),r=document.createElementNS(i.svgNS,'rect');r.setAttribute('x',(n.left-1).toFixed());r.setAttribute('y',(n.top-1).toFixed());r.setAttribute('width',(n.width+2).toFixed());r.setAttribute('height',(n.height+2).toFixed());u.appendChild(r);u.setAttribute('id',t);this._svg.appendChild(u)}},i.prototype.drawEllipse=function(n,t,r,u,f,e){var o=document.createElementNS(i.svgNS,'ellipse');return o.setAttribute('stroke',this._stroke),this._strokeWidth!==null&&o.setAttribute('stroke-width',this._strokeWidth.toString()),o.setAttribute('fill',this._fill),o.setAttribute('cx',n.toFixed(1)),o.setAttribute('cy',t.toFixed(1)),o.setAttribute('rx',r.toFixed(1)),o.setAttribute('ry',u.toFixed(1)),f&&o.setAttribute('class',f),this._applyStyle(o,e),this._appendChild(o),o},i.prototype.drawRect=function(n,t,r,u,f,e,o){var s=document.createElementNS(i.svgNS,'rect');return s.setAttribute('fill',this._fill),s.setAttribute('stroke',this._stroke),this._strokeWidth!==null&&s.setAttribute('stroke-width',this._strokeWidth.toString()),s.setAttribute('x',n.toFixed(1)),s.setAttribute('y',t.toFixed(1)),r>0&&r<.05?s.setAttribute('width','0.1'):s.setAttribute('width',r.toFixed(1)),u>0&&u<.05?s.setAttribute('height','0.1'):s.setAttribute('height',u.toFixed(1)),o&&s.setAttribute('clip-path','url(#'+o+')'),f&&s.setAttribute('class',f),this._applyStyle(s,e),this._appendChild(s),s},i.prototype.drawLine=function(n,t,r,u,f,e){var o=document.createElementNS(i.svgNS,'line');return o.setAttribute('stroke',this._stroke),this._strokeWidth!==null&&o.setAttribute('stroke-width',this._strokeWidth.toString()),o.setAttribute('x1',n.toFixed(1)),o.setAttribute('x2',r.toFixed(1)),o.setAttribute('y1',t.toFixed(1)),o.setAttribute('y2',u.toFixed(1)),f&&o.setAttribute('class',f),this._applyStyle(o,e),this._appendChild(o),o},i.prototype.drawLines=function(n,t,r,u,f){var s,e,h,o;if(n&&t&&(s=Math.min(n.length,t.length),s>0)){for(e=document.createElementNS(i.svgNS,'polyline'),e.setAttribute('stroke',this._stroke),this._strokeWidth!==null&&e.setAttribute('stroke-width',this._strokeWidth.toString()),e.setAttribute('fill','none'),h='',o=0;o<s;o++)h+=n[o].toFixed(1)+','+t[o].toFixed(1)+' ';return e.setAttribute('points',h),r&&e.setAttribute('class',r),f&&e.setAttribute('clip-path','url(#'+f+')'),this._applyStyle(e,u),this._appendChild(e),e}return null},i.prototype.drawSplines=function(n,r,u,f,e){var o,h,s;if(n&&r){var y=new t._Spline(n,r),c=y.calculate(),l=c.xs,a=c.ys,v=Math.min(l.length,a.length);if(v>0){for(o=document.createElementNS(i.svgNS,'polyline'),o.setAttribute('stroke',this._stroke),this._strokeWidth!==null&&o.setAttribute('stroke-width',this._strokeWidth.toString()),o.setAttribute('fill','none'),h='',s=0;s<v;s++)h+=l[s].toFixed(1)+','+a[s].toFixed(1)+' ';return o.setAttribute('points',h),u&&o.setAttribute('class',u),e&&o.setAttribute('clip-path','url(#'+e+')'),this._applyStyle(o,f),this._appendChild(o),o}}return null},i.prototype.drawPolygon=function(n,t,r,u,f){var s,e,h,o;if(n&&t&&(s=Math.min(n.length,t.length),s>0)){for(e=document.createElementNS(i.svgNS,'polygon'),e.setAttribute('stroke',this._stroke),this._strokeWidth!==null&&e.setAttribute('stroke-width',this._strokeWidth.toString()),e.setAttribute('fill',this._fill),h='',o=0;o<s;o++)h+=n[o].toFixed(1)+','+t[o].toFixed(1)+' ';return e.setAttribute('points',h),r&&e.setAttribute('class',r),f&&e.setAttribute('clip-path','url(#'+f+')'),this._applyStyle(e,u),this._appendChild(e),e}return null},i.prototype.drawPieSegment=function(t,r,u,f,e,o,s,h){var c,l,y,a,p,v;return e>=Math.PI*2?this.drawEllipse(t,r,u,u,o,s):(c=document.createElementNS(i.svgNS,'path'),c.setAttribute('fill',this._fill),c.setAttribute('stroke',this._stroke),this._strokeWidth!==null&&c.setAttribute('stroke-width',this._strokeWidth.toString()),l=new n.Point(t,r),l.x+=u*Math.cos(f),l.y+=u*Math.sin(f),y=f+e,a=new n.Point(t,r),a.x+=u*Math.cos(y),a.y+=u*Math.sin(y),p=' 0 0,1 ',Math.abs(e)>Math.PI&&(p=' 0 1,1 '),v='M '+l.x.toFixed(1)+','+l.y.toFixed(1),v+=' A '+u.toFixed(1)+','+u.toFixed(1)+p,v+=a.x.toFixed(1)+','+a.y.toFixed(1),v+=' L '+t.toFixed(1)+','+r.toFixed(1)+' z',c.setAttribute('d',v),h&&c.setAttribute('clip-path','url(#'+h+')'),o&&c.setAttribute('class',o),this._applyStyle(c,s),this._appendChild(c),c)},i.prototype.drawDonutSegment=function(t,r,u,f,e,o,s,h,c){var k=!1,l,y,p,w,v,b,d,g,a;return o>=Math.PI*2&&(k=!0,o-=.001),l=document.createElementNS(i.svgNS,'path'),l.setAttribute('fill',this._fill),l.setAttribute('stroke',this._stroke),this._strokeWidth!==null&&l.setAttribute('stroke-width',this._strokeWidth.toString()),y=new n.Point(t,r),y.x+=u*Math.cos(e),y.y+=u*Math.sin(e),p=e+o,w=new n.Point(t,r),w.x+=u*Math.cos(p),w.y+=u*Math.sin(p),v=new n.Point(t,r),v.x+=f*Math.cos(p),v.y+=f*Math.sin(p),b=new n.Point(t,r),b.x+=f*Math.cos(e),b.y+=f*Math.sin(e),d=' 0 0,1 ',g=' 0 0,0 ',Math.abs(o)>Math.PI&&(d=' 0 1,1 ',g=' 0 1,0 '),a='M '+y.x.toFixed(3)+','+y.y.toFixed(3),a+=' A '+u.toFixed(3)+','+u.toFixed(3)+d,a+=w.x.toFixed(3)+','+w.y.toFixed(3),a+=k?' M '+v.x.toFixed(3)+','+v.y.toFixed(3):' L '+v.x.toFixed(3)+','+v.y.toFixed(3),a+=' A '+f.toFixed(3)+','+f.toFixed(3)+g,a+=b.x.toFixed(3)+','+b.y.toFixed(3),k||(a+=' z'),l.setAttribute('d',a),c&&l.setAttribute('clip-path','url(#'+c+')'),s&&l.setAttribute('class',s),this._applyStyle(l,h),this._appendChild(l),l},i.prototype.drawString=function(n,t,i,r){var u=this._createText(t,n),f;return i&&u.setAttribute('class',i),this._applyStyle(u,r),this._appendChild(u),f=this._getBBox(u),u.setAttribute('y',(t.y-(f.y+f.height-t.y)).toFixed(1)),u},i.prototype.drawStringRotated=function(n,t,r,u,f,e){var o=this._createText(t,n),s,h;return f&&o.setAttribute('class',f),this._applyStyle(o,e),s=document.createElementNS(i.svgNS,'g'),s.setAttribute('transform','rotate('+u.toFixed(1)+','+r.x.toFixed(1)+','+r.y.toFixed(1)+')'),s.appendChild(o),this._appendChild(s),h=this._getBBox(o),o.setAttribute('y',(t.y-(h.y+h.height-t.y)).toFixed(1)),o},i.prototype.measureString=function(t,i,r,u){var f=new n.Size(0,0),e,o;if(this._fontSize&&this._text.setAttribute('font-size',this._fontSize),this._fontFamily&&this._text.setAttribute('font-family',this._fontFamily),i&&this._text.setAttribute('class',i),r&&this._textGroup.setAttribute('class',r),this._applyStyle(this._text,u),this._setText(this._text,t),e=this._getBBox(this._text),f.width=e.width,f.height=e.height,this._text.removeAttribute('font-size'),this._text.removeAttribute('font-family'),this._text.removeAttribute('class'),u)for(o in u)this._text.removeAttribute(this._deCase(o));return this._textGroup.removeAttribute('class'),this._text.textContent=null,f},i.prototype.startGroup=function(n,t,r){r===void 0&&(r=!1);var u=document.createElementNS(i.svgNS,'g');return n&&u.setAttribute('class',n),t&&u.setAttribute('clip-path','url(#'+t+')'),this._appendChild(u),r&&u.transform.baseVal.appendItem(this._svg.createSVGTransform()),this._group=u,u},i.prototype.endGroup=function(){if(this._group){var n=this._group.parentNode;this._group=n==this._svg?null:n}},i.prototype.drawImage=function(n,t,r,u,f){var e=document.createElementNS(i.svgNS,'image');return e.setAttributeNS(i.xlinkNS,'href',n),e.setAttribute('x',t.toFixed(1)),e.setAttribute('y',r.toFixed(1)),e.setAttribute('width',u.toFixed(1)),e.setAttribute('height',f.toFixed(1)),this._appendChild(e),e},i.prototype._appendChild=function(n){var t=this._group;t||(t=this._svg);t.appendChild(n)},i.prototype._create=function(){this._svg=document.createElementNS(i.svgNS,'svg');this._defs=document.createElementNS(i.svgNS,'defs');this._svg.appendChild(this._defs);this._text=this._createText(new n.Point(-1e3,-1e3),'');this._textGroup=document.createElementNS(i.svgNS,'g');this._textGroup.appendChild(this._text);this._svg.appendChild(this._textGroup)},i.prototype._setText=function(n,t){var i=t?t.toString():null;if(i&&i.indexOf('tspan')>=0)try{n.textContent=null;for(var u=new DOMParser,f='<svg xmlns="http://www.w3.org/2000/svg\">'+i+'</svg>',e=u.parseFromString(f,'text/xml').documentElement,r=e.firstChild;r;)n.appendChild(n.ownerDocument.importNode(r,!0)),r=r.nextSibling}catch(o){throw new Error('Error parsing XML string.');}else n.textContent=i},i.prototype._createText=function(n,t){var r=document.createElementNS(i.svgNS,'text');return this._setText(r,t),r.setAttribute('fill',this._textFill),r.setAttribute('x',n.x.toFixed(1)),r.setAttribute('y',n.y.toFixed(1)),this._fontSize&&r.setAttribute('font-size',this._fontSize),this._fontFamily&&r.setAttribute('font-family',this._fontFamily),r},i.prototype._applyStyle=function(n,t){if(t)for(var i in t)n.setAttribute(this._deCase(i),t[i])},i.prototype._deCase=function(n){return n.replace(/[A-Z]/g,function(n){return'-'+n.toLowerCase()})},i.prototype._getBBox=function(n){if(i._isff)try{return n.getBBox()}catch(t){return{x:0,y:0,width:0,height:0}}else return n.getBBox()},i.svgNS='http://www.w3.org/2000/svg',i.xlinkNS='http://www.w3.org/1999/xlink',i}();t._SvgRenderEngine=i})(t=n.chart||(n.chart={}))}(wijmo||(wijmo={})),function(n){var t;(function(t){'use strict';var i=function(){function i(i){this._position=t.Position.Right;this._areas=[];this._sz=new n.Size;this._chart=i}return Object.defineProperty(i.prototype,"position",{get:function(){return this._position},set:function(i){this._position!=i&&(this._position=n.asEnum(i,t.Position),this._chart&&this._chart.invalidate())},enumerable:!0,configurable:!0}),i.prototype._getDesiredSize=function(i,r,u,f){if(r==t.Position.None)return null;var e=r==t.Position.Right||r==t.Position.Left;if(this._chart instanceof n.chart.FlexChartCore)this._sz=this._getDesiredSizeSeriesChart(i,e,u,f);else if(this._chart instanceof n.chart.FlexPie)this._sz=this._getDesiredSizePieChart(i,e);else return null;return this._sz},i.prototype._getDesiredSizeSeriesChart=function(i,r,u,f){for(var c,v,p,l,h,e=new n.Size,y=this._chart.series,w=y.length,o=0,s=0,a=0;a<w;a++)if(c=n.tryCast(y[a],n.chart.SeriesBase),v=c.visibility,c.name&&v!=t.SeriesVisibility.Hidden&&v!=t.SeriesVisibility.Plot)for(p=c.legendItemLength(),l=0;l<p;l++)h=c.measureLegendItem(i,l),r?(o+h.height>f?(e.width+=s,s=0,e.height<o&&(e.height=o),o=0):o+=h.height,s<h.width&&(s=h.width)):(s+h.width>u?(e.height+=o,o=0,e.width<s&&(e.width=s),s=h.width):s+=h.width,o<h.height&&(o=h.height));return r?(e.height<o&&(e.height=o),e.width+=s):(e.width<s&&(e.width=s),e.height+=o),e},i.prototype._renderSeriesChart=function(i,r,u,f,e){for(var o,h,k,y,c,s,w,b=this._chart.series,d=b.length,l=r.clone(),a=0,v=0,p=0;p<d;p++)if(o=n.tryCast(b[p],n.chart.SeriesBase),o){if(h=o.visibility,!o.name||h==t.SeriesVisibility.Hidden||h==t.SeriesVisibility.Plot){o._legendElement=null;this._areas.push(null);continue}for(k=o.legendItemLength(),y=i.startGroup(o.cssClass),h==t.SeriesVisibility.Legend?(y.setAttribute('opacity','0.5'),o._legendElement=y):o._legendElement=h==t.SeriesVisibility.Visible?y:null,c=0;c<k;c++)s=o.measureLegendItem(i,c),u?r.y+s.height>l.y+e&&(r.y=l.y,r.x+=v,v=0):r.x+s.width>l.x+f&&(r.x=l.x,r.y+=a,a=0),w=new n.Rect(r.x,r.y,s.width,s.height),(h==t.SeriesVisibility.Legend||h==t.SeriesVisibility.Visible)&&o.drawLegendItem(i,w,c),this._areas.push(w),u?(r.y+=s.height,v<s.width&&(v=s.width)):(r.x+=s.width,a<s.height&&(a=s.height));i.endGroup()}},i.prototype._getDesiredSizePieChart=function(t,i){for(var u,r=new n.Size,e=this._chart,o=e._getLabelsForLegend(),s=o.length,f=0;f<s;f++)u=e._measureLegendItem(t,o[f]),i?(r.height+=u.height,r.width<u.width&&(r.width=u.width)):(r.width+=u.width,r.height<u.height&&(r.height=u.height));return r},i.prototype._renderPieChart=function(t,i,r){for(var f,s,e=this._chart,o=e._getLabelsForLegend(),h=o.length,u=0;u<h;u++)f=e._measureLegendItem(t,o[u]),s=new n.Rect(i.x,i.y,f.width,f.height),e._drawLegendItem(t,s,u,o[u]),this._areas.push(s),r?i.y+=f.height:i.x+=f.width},i.prototype._getPosition=function(n,i){return this.position==t.Position.Auto?n>=i?t.Position.Right:t.Position.Bottom:this.position},i.prototype._render=function(i,r,u,f,e){this._areas=[];var o=u==t.Position.Right||u==t.Position.Left;if(i.fill='transparent',i.stroke=null,i.drawRect(r.x,r.y,this._sz.width,this._sz.height),this._chart instanceof n.chart.FlexChartCore)this._renderSeriesChart(i,r,o,f,e);else if(this._chart instanceof n.chart.FlexPie)this._renderPieChart(i,r,o);else return null},i.prototype._hitTest=function(n){for(var r=this._areas,i=0;i<r.length;i++)if(r[i]&&t.FlexChartCore._contains(r[i],n))return i;return null},i}();t.Legend=i})(t=n.chart||(n.chart={}))}(wijmo||(wijmo={})),function(n){var t;(function(t){'use strict';(function(n){n[n.PlotArea=0]="PlotArea";n[n.AxisX=1]="AxisX";n[n.AxisY=2]="AxisY";n[n.ChartArea=3]="ChartArea";n[n.Legend=4]="Legend";n[n.Header=5]="Header";n[n.Footer=6]="Footer";n[n.Series=7]="Series";n[n.SeriesSymbol=8]="SeriesSymbol";n[n.DataLabel=9]="DataLabel";n[n.None=10]="None"})(t.ChartElement||(t.ChartElement={}));var i=t.ChartElement,r=function(){function r(n,t,r){this._pointIndex=null;this._chartElement=i.None;this._chart=n;this._pt=t;this._chartElement=r}return Object.defineProperty(r.prototype,"point",{get:function(){return this._pt},enumerable:!0,configurable:!0}),Object.defineProperty(r.prototype,"series",{get:function(){return this._series},enumerable:!0,configurable:!0}),Object.defineProperty(r.prototype,"pointIndex",{get:function(){return this._pointIndex},enumerable:!0,configurable:!0}),Object.defineProperty(r.prototype,"chartElement",{get:function(){return this._chartElement},enumerable:!0,configurable:!0}),Object.defineProperty(r.prototype,"distance",{get:function(){return this._dist},enumerable:!0,configurable:!0}),Object.defineProperty(r.prototype,"item",{get:function(){if(this._item==null&&this.pointIndex!==null)if(this.series!=null)this._item=this.series._getItem(this.pointIndex);else if(this._chart instanceof t.FlexPie){var i=this._chart,n=null;n=i._cv!=null?i._cv.items:i.itemsSource;n&&this.pointIndex<n.length&&(this._item=n[this.pointIndex])}return this._item},enumerable:!0,configurable:!0}),Object.defineProperty(r.prototype,"x",{get:function(){return this._x===undefined&&(this._x=this._getValue(1,!1)),this._x},enumerable:!0,configurable:!0}),Object.defineProperty(r.prototype,"y",{get:function(){return this._y===undefined&&(this._y=this._getValue(0,!1)),this._y},enumerable:!0,configurable:!0}),Object.defineProperty(r.prototype,"value",{get:function(){if(this._chart instanceof t.FlexPie){var n=this._chart;return n._values[this.pointIndex]}return this.y},enumerable:!0,configurable:!0}),Object.defineProperty(r.prototype,"name",{get:function(){if(this._name===undefined){if(this._chart instanceof t.FlexPie){var n=this._chart;return n._labels[this.pointIndex]}return this.series.name}return this._name},enumerable:!0,configurable:!0}),Object.defineProperty(r.prototype,"_xfmt",{get:function(){return this.__xfmt===undefined&&(this.__xfmt=this._getValue(1,!0)),this.__xfmt},enumerable:!0,configurable:!0}),Object.defineProperty(r.prototype,"_yfmt",{get:function(){return this.__yfmt===undefined&&(this.__yfmt=this._getValue(0,!0)),this.__yfmt},enumerable:!0,configurable:!0}),r.prototype._setData=function(n,t){this._series=n;this._pointIndex=t},r.prototype._setDataPoint=function(i){if(i=n.asType(i,t._DataPoint,!0),i){this._pointIndex=i.pointIndex;var u=n.asType(this._chart,n.chart.FlexChartCore,!0),r=i.seriesIndex;r!==null&&r>=0&&r<u.series.length&&(this._series=u.series[r]);i.item&&(this._item=i.item);i.x&&(this._x=i.x);i.y&&(this._y=i.y);i.xfmt&&(this.__xfmt=i.xfmt);i.yfmt&&(this.__yfmt=i.yfmt);i.name&&(this._name=i.name)}},r.prototype._getValue=function(i,r){var s,o,h;if(this._chart instanceof t.FlexPie)return s=this._chart,s._values[this.pointIndex];var u=null,f=this._chart,e=this.pointIndex,c=f._isRotated();return this.series!==null&&e!==null&&(o=this.series.getValues(i),h=this.series.getDataType(i),o&&this.pointIndex<o.length?(u=o[this.pointIndex],h!=n.DataType.Date||r||(u=new Date(u))):i==1&&(f._xlabels&&f._xlabels.length>0&&e<f._xlabels.length?u=f._xlabels[e]:f._xvals&&e<f._xvals.length&&(u=f._xvals[e],f._xDataType!=n.DataType.Date||r||(u=new Date(u))))),u!==null&&r&&(c?i==0?u=f.axisX._formatValue(u):i==1&&(u=f.axisY._formatValue(u)):i==0?u=f.axisY._formatValue(u):i==1&&(u=f.axisX._formatValue(u))),u},r}();t.HitTestInfo=r})(t=n.chart||(n.chart={}))}(wijmo||(wijmo={})),function(n){var t;(function(n){'use strict';var t=function(){function n(){}return n.standard=['#88bde6','#fbb258','#90cd97','#f6aac9','#bfa554','#bc99c7','#eddd46','#f07e6e','#8c8c8c'],n.cocoa=['#466bb0','#c8b422','#14886e','#b54836','#6e5944','#8b3872','#73b22b','#b87320','#141414'],n.coral=['#84d0e0','#f48256','#95c78c','#efa5d6','#ba8452','#ab95c2','#ede9d0','#e96b7d','#888888'],n.dark=['#005fad','#f06400','#009330','#e400b1','#b65800','#6a279c','#d5a211','#dc0127','#000000'],n.highcontrast=['#ff82b0','#0dda2c','#0021ab','#bcf28c','#19c23b','#890d3a','#607efd','#1b7700','#000000'],n.light=['#ddca9a','#778deb','#cb9fbb','#b5eae2','#7270be','#a6c7a7','#9e95c7','#95b0c7','#9b9b9b'],n.midnight=['#83aaca','#e37849','#14a46a','#e097da','#a26d54','#a584b7','#d89c54','#e86996','#2c343b'],n.modern=['#2d9fc7','#ec993c','#89c235','#e377a4','#a68931','#a672a6','#d0c041','#e35855','#68706a'],n.organic=['#9c88d9','#a3d767','#8ec3c0','#e9c3a9','#91ab36','#d4ccc0','#61bbd8','#e2d76f','#80715a'],n.slate=['#7493cd','#f99820','#71b486','#e4a491','#cb883b','#ae83a4','#bacc5c','#e5746a','#505d65'],n.zen=['#7bb5ae','#e2d287','#92b8da','#eac4cb','#7b8bbd','#c7d189','#b9a0c8','#dfb397','#a9a9a9'],n.cyborg=['#2a9fd6','#77b300','#9933cc','#ff8800','#cc0000','#00cca3','#3d6dcc','#525252','#000000'],n.superhero=['#5cb85c','#f0ad4e','#5bc0de','#d9534f','#9f5bde','#46db8c','#b6b86e','#4e5d6c','#2b3e4b'],n.flatly=['#18bc9c','#3498db','#f39c12','#6cc1be','#99a549','#8f54b5','#e74c3c','#8a9899','#2c3e50'],n.darkly=['#375a7f','#00bc8c','#3498db','#f39c12','#e74c3c','#8f61b3','#b08725','#4a4949','#000000'],n.cerulan=['#033e76','#87c048','#59822c','#53b3eb','#fc6506','#d42323','#e3bb00','#cccccc','#222222'],n}();n.Palettes=t})(t=n.chart||(n.chart={}))}(wijmo||(wijmo={})),function(n){var t;(function(t){'use strict';var i=function(){function t(t,i){var s,r;if(this.k=.002,this._a=[],this._b=[],this._c=[],this._d=[],this.m=[[-1*.5,3*.5,-3*.5,1*.5],[2*.5,-5*.5,4*.5,-1*.5],[-1*.5,0,1*.5,0],[0,2*.5,0,0],],this._x=t,this._y=i,s=this._len=Math.min(t.length,i.length),s>3)for(r=0;r<s-1;r++){var u=r==0?new n.Point(t[r],i[r]):new n.Point(t[r-1],i[r-1]),f=new n.Point(t[r],i[r]),e=new n.Point(t[r+1],i[r+1]),o=r==s-2?new n.Point(t[r+1],i[r+1]):new n.Point(t[r+2],i[r+2]),h=new n.Point,c=new n.Point,l=new n.Point,a=new n.Point;h.x=u.x*this.m[0][0]+f.x*this.m[0][1]+e.x*this.m[0][2]+o.x*this.m[0][3];c.x=u.x*this.m[1][0]+f.x*this.m[1][1]+e.x*this.m[1][2]+o.x*this.m[1][3];l.x=u.x*this.m[2][0]+f.x*this.m[2][1]+e.x*this.m[2][2]+o.x*this.m[2][3];a.x=u.x*this.m[3][0]+f.x*this.m[3][1]+e.x*this.m[3][2]+o.x*this.m[3][3];h.y=u.y*this.m[0][0]+f.y*this.m[0][1]+e.y*this.m[0][2]+o.y*this.m[0][3];c.y=u.y*this.m[1][0]+f.y*this.m[1][1]+e.y*this.m[1][2]+o.y*this.m[1][3];l.y=u.y*this.m[2][0]+f.y*this.m[2][1]+e.y*this.m[2][2]+o.y*this.m[2][3];a.y=u.y*this.m[3][0]+f.y*this.m[3][1]+e.y*this.m[3][2]+o.y*this.m[3][3];this._a.push(h);this._b.push(c);this._c.push(l);this._d.push(a)}}return t.prototype.calculatePoint=function(n){var t=Math.floor(n);t<0&&(t=0);t>this._len-2&&(t=this._len-2);var i=n-t,r=((this._a[t].x*i+this._b[t].x)*i+this._c[t].x)*i+this._d[t].x,u=((this._a[t].y*i+this._b[t].y)*i+this._c[t].y)*i+this._d[t].y;return{x:r,y:u}},t.prototype.calculate=function(){var f,e,i,n;if(this._len<=3)return{xs:this._x,ys:this._y};var r=[],u=[],t=this.calculatePoint(0);for(r.push(t.x),u.push(t.y),f=this._len*this.k,e=3,i=f;i<=this._len-1;i+=f)n=this.calculatePoint(i),(Math.abs(t.x-n.x)>=e||Math.abs(t.y-n.y)>=e)&&(r.push(n.x),u.push(n.y),t=n);return{xs:r,ys:u}},t}();t._Spline=i})(t=n.chart||(n.chart={}))}(wijmo||(wijmo={}));__extends=this&&this.__extends||function(n,t){function r(){this.constructor=n}for(var i in t)t.hasOwnProperty(i)&&(n[i]=t[i]);n.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r)},function(n){var t;(function(t){'use strict';var r,u,f,i,e,o;(function(n){n[n.None=0]="None";n[n.Left=1]="Left";n[n.Top=2]="Top";n[n.Right=3]="Right";n[n.Bottom=4]="Bottom";n[n.Center=5]="Center"})(t.LabelPosition||(t.LabelPosition={}));r=t.LabelPosition,function(n){n[n.None=0]="None";n[n.Inside=1]="Inside";n[n.Center=2]="Center";n[n.Outside=3]="Outside"}(t.PieLabelPosition||(t.PieLabelPosition={}));u=t.PieLabelPosition;f=function(n){function t(t,i,r,u){n.call(this,t);this.cancel=!1;this._ht=i;this._pt=r;this._text=u}return __extends(t,n),Object.defineProperty(t.prototype,"point",{get:function(){return this._pt},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"text",{get:function(){return this._text},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"hitTestInfo",{get:function(){return this._ht},enumerable:!0,configurable:!0}),t}(t.RenderEventArgs);t.DataLabelRenderEventArgs=f;i=function(){function t(){this.rendering=new n.Event}return Object.defineProperty(t.prototype,"content",{get:function(){return this._content},set:function(n){n!=this._content&&(this._content=n,this._invalidate())},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"border",{get:function(){return this._bdr},set:function(t){t!=this._bdr&&(this._bdr=n.asBoolean(t,!0),this._invalidate())},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"offset",{get:function(){return this._off},set:function(t){t!=this._off&&(this._off=n.asNumber(t,!0),this._invalidate())},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"connectingLine",{get:function(){return this._line},set:function(t){t!=this._line&&(this._line=n.asBoolean(t,!0),this._invalidate())},enumerable:!0,configurable:!0}),t.prototype.onRendering=function(n){return this.rendering.raise(this,n),n.cancel},t.prototype._invalidate=function(){this._chart&&this._chart.invalidate()},t}();t.DataLabelBase=i;e=function(t){function i(){t.apply(this,arguments);this._pos=r.Top}return __extends(i,t),Object.defineProperty(i.prototype,"position",{get:function(){return this._pos},set:function(t){t!=this._pos&&(this._pos=n.asEnum(t,r),this._invalidate())},enumerable:!0,configurable:!0}),i}(i);t.DataLabel=e;o=function(t){function i(){t.apply(this,arguments);this._pos=u.None}return __extends(i,t),Object.defineProperty(i.prototype,"position",{get:function(){return this._pos},set:function(t){t!=this._pos&&(this._pos=n.asEnum(t,u),this._invalidate())},enumerable:!0,configurable:!0}),i}(i);t.PieDataLabel=o})(t=n.chart||(n.chart={}))}(wijmo||(wijmo={})),function(n){var t;(function(t){'use strict';var o=function(){function t(){this._moveMarker=function(n){var r=n.currentTarget,u=this._markers,t=r.getAttribute('data-markerIndex'),i;t!=null&&(i=u[t],i.forEach(function(t){t._moveMarker(n)}))};this._markers=[];this._bindMoveMarker=this._moveMarker.bind(this)}return t.prototype.attach=function(t){var r=t.chart.hostElement,u=this._markers,f=r.getAttribute('data-markerIndex'),e,i;f!=null?(i=u[f],i&&n.isArray(i)?i.push(t):(u[f]=[t],this._bindMoveEvent(r))):(e=u.length,i=[t],u.push(i),r.setAttribute('data-markerIndex',e),this._bindMoveEvent(r))},t.prototype.detach=function(n){var u=n.chart.hostElement,r=this._markers,f=u.getAttribute('data-markerIndex'),t,i;f!=null&&(i=r[f],t=i.indexOf(n),t>-1&&i.splice(t,1),i.length===0&&(t=r.indexOf(i),t>-1&&(r[t]=undefined),this._unbindMoveEvent(u)))},t.prototype._unbindMoveEvent=function(n){var t=this._bindMoveMarker;n.removeEventListener('mousemove',t);'ontouchstart'in window&&n.removeEventListener('touchmove',t)},t.prototype._bindMoveEvent=function(n){var t=this._bindMoveMarker;n.addEventListener('mousemove',t);'ontouchstart'in window&&n.addEventListener('touchmove',t)},t}(),f=new o,i,r,u,e;(function(n){n[n.None=0]="None";n[n.Vertical=1]="Vertical";n[n.Horizontal=2]="Horizontal";n[n.Both=3]="Both"})(t.LineMarkerLines||(t.LineMarkerLines={}));i=t.LineMarkerLines,function(n){n[n.None=0]="None";n[n.Move=1]="Move";n[n.Drag=2]="Drag"}(t.LineMarkerInteraction||(t.LineMarkerInteraction={}));r=t.LineMarkerInteraction,function(n){n[n.Auto=2]="Auto";n[n.Right=0]="Right";n[n.Left=1]="Left";n[n.Bottom=4]="Bottom";n[n.Top=6]="Top"}(t.LineMarkerAlignment||(t.LineMarkerAlignment={}));u=t.LineMarkerAlignment;e=function(){function e(t,i){this._wrapperMousedown=null;this._wrapperMouseup=null;this.positionChanged=new n.Event;var r=this;r._chart=t;t.rendered.addHandler(r._initialize,r);r._resetDefaultValue();n.copy(this,i);r._initialize()}return Object.defineProperty(e.prototype,"chart",{get:function(){return this._chart},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"isVisible",{get:function(){return this._isVisible},set:function(t){var i=this;t!==i._isVisible&&(i._isVisible=n.asBoolean(t),i._marker)&&i._toggleVisibility()},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"seriesIndex",{get:function(){return this._seriesIndex},set:function(t){var i=this;t!==i._seriesIndex&&(i._seriesIndex=n.asNumber(t,!0))},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"horizontalPosition",{get:function(){return this._horizontalPosition},set:function(t){var i=this;if(t!==i._horizontalPosition){if(i._horizontalPosition=n.asNumber(t,!0),i._horizontalPosition<0||i._horizontalPosition>1)throw'horizontalPosition\'s value should be in (0, 1).';i._marker&&i._updateMarkerPosition()}},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"x",{get:function(){var n=this,t=n._targetPoint.x-n._plotRect.left,i=n._chart.axisX;return i.convertBack(t)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"y",{get:function(){var n=this,t=n._targetPoint.y-n._plotRect.top,i=n._chart.axisY;return i.convertBack(t)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"content",{get:function(){return this._content},set:function(t){t!==this._content&&(this._content=n.asFunction(t),this._updateMarkerPosition())},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"verticalPosition",{get:function(){return this._verticalPosition},set:function(t){var i=this;if(t!==i._verticalPosition){if(i._verticalPosition=n.asNumber(t,!0),i._verticalPosition<0||i._verticalPosition>1)throw'verticalPosition\'s value should be in (0, 1).';i._marker&&i._updateMarkerPosition()}},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"alignment",{get:function(){return this._alignment},set:function(n){var t=this;n!==t._alignment&&(t._alignment=n,t._marker)&&t._updatePositionByAlignment()},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"lines",{get:function(){return this._lines},set:function(t){var r=this;t!==r._lines&&(r._lines=n.asEnum(t,i),r._marker)&&r._resetLinesVisibility()},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"interaction",{get:function(){return this._interaction},set:function(t){var i=this;t!==i._interaction&&(i._marker&&i._detach(),i._interaction=n.asEnum(t,r),i._marker&&i._attach(),i._toggleElesDraggableClass(i._interaction===r.Drag))},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"dragThreshold",{get:function(){return this._dragThreshold},set:function(t){t!=this._dragThreshold&&(this._dragThreshold=n.asNumber(t))},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"dragContent",{get:function(){return this._dragContent},set:function(t){var u=this;t!==u._dragContent&&(u._dragContent=n.asBoolean(t));n.toggleClass(u._dragEle,e._CSS_LINE_DRAGGABLE,u._interaction===r.Drag&&u._dragContent&&u._lines!==i.None)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"dragLines",{get:function(){return this._dragLines},set:function(t){t!=this._dragLines&&(this._dragLines=n.asBoolean(t))},enumerable:!0,configurable:!0}),e.prototype.onPositionChanged=function(n){this.positionChanged.raise(this,n)},e.prototype.remove=function(){var n=this,t=n._chart;n._marker&&(t.rendered.removeHandler(n._initialize,n),n._detach(),n._removeMarker(),n._wrapperMoveMarker=null,n._wrapperMousedown=null,n._wrapperMouseup=null)},e.prototype._attach=function(){var t=this,i=t._chart.hostElement;this._interaction!==r.None?n.addClass(i,e._CSS_TOUCH_DISABLED):n.removeClass(i,e._CSS_TOUCH_DISABLED);f.attach(t);t._attachDrag()},e.prototype._attachDrag=function(){var n=this;n._interaction===r.Drag&&(n._wrapperMousedown||(n._wrapperMousedown=n._onMousedown.bind(n)),n._wrapperMouseup||(n._wrapperMouseup=n._onMouseup.bind(n)),n._toggleDragEventAttach(!0))},e.prototype._detach=function(){var t=this;n.removeClass(t._chart.hostElement,e._CSS_TOUCH_DISABLED);f.detach(t);t._detachDrag()},e.prototype._detachDrag=function(){var n=this;n._interaction===r.Drag&&n._toggleDragEventAttach(!1)},e.prototype._toggleDragEventAttach=function(n){var t=this,r=t._chart.hostElement,i=n?'addEventListener':'removeEventListener';r[i]('mousedown',t._wrapperMousedown);document[i]('mouseup',t._wrapperMouseup);'ontouchstart'in window&&r[i]('touchstart',t._wrapperMousedown);'ontouchend'in window&&document[i]('touchend',t._wrapperMouseup)},e.prototype._onMousedown=function(t){var i=this,u=i._getEventPoint(t),f,o,s;i._interaction===r.Drag&&(f=n.getElementRect(i._hLine),o=n.getElementRect(i._vLine),s=n.getElementRect(i._markerContent),i._dragContent&&i._pointInRect(u,s)?(i._capturedEle=i._markerContent,i._contentDragStartPoint=new n.Point(u.x,u.y),i._mouseDownCrossPoint=new n.Point(i._targetPoint.x,i._targetPoint.y)):Math.abs(f.top-u.y)<=i._dragThreshold||Math.abs(u.y-f.top-f.height)<=i._dragThreshold||u.y>=f.top&&u.y<=f.top+f.height?(i._capturedEle=i._hLine,i._contentDragStartPoint=undefined,n.addClass(i._chart.hostElement,e._CSS_LINE_DRAGGABLE)):(Math.abs(o.left-u.x)<=i._dragThreshold||Math.abs(u.x-o.left-o.width)<=i._dragThreshold||u.x>=o.left&&u.x<=o.left+o.width)&&(i._capturedEle=i._vLine,i._contentDragStartPoint=undefined,n.addClass(i._chart.hostElement,e._CSS_LINE_DRAGGABLE)),t.preventDefault())},e.prototype._onMouseup=function(){var t=this,r=t._alignment===u.Auto&&t._capturedEle===t._markerContent&&t._lines!==i.None;t._capturedEle=undefined;t._contentDragStartPoint=undefined;t._mouseDownCrossPoint=undefined;r&&(t._updatePositionByAlignment(),t._updatePositionByAlignment());n.removeClass(t._chart.hostElement,e._CSS_LINE_DRAGGABLE)},e.prototype._moveMarker=function(u){var f=this,h=f._chart,e=f._getEventPoint(u),o=f._plotRect,a=f._interaction===r.Drag,v=f._lines===i.Horizontal,y=f._lines===i.Vertical,c=f._seriesIndex,l,p=n.getElementRect(h.hostElement),s,w,b,k,d;if(o&&f._isVisible&&f._interaction!==r.None&&(f._interaction!==r.Drag||f._capturedEle&&f._lines!==i.None)){if(a&&(f._contentDragStartPoint?(e.x=v?f._targetPoint.x:f._mouseDownCrossPoint.x+e.x-f._contentDragStartPoint.x,e.y=y?f._targetPoint.y:f._mouseDownCrossPoint.y+e.y-f._contentDragStartPoint.y):v||!f._dragLines&&f._capturedEle===f._hLine?e.x=f._targetPoint.x:(y||!f._dragLines&&f._capturedEle===f._vLine)&&(e.y=f._targetPoint.y)),a&&f._lines===i.Horizontal||!f._dragLines&&f._capturedEle===f._hLine){if(e.y<=o.top||e.y>=o.top+o.height)return}else if(a&&f._lines===i.Vertical||!f._dragLines&&f._capturedEle===f._vLine){if(e.x<=o.left||e.x>=o.left+o.width)return}else if(e.x<=o.left||e.y<=o.top||e.x>=o.left+o.width||e.y>=o.top+o.height)return;if(c!=null&&c>=0&&c<h.series.length){if(l=h.series[c],s=l.hitTest(new n.Point(e.x,NaN)),s==null||s.x==null||s.y==null)return;w=l.axisX||h.axisX;b=l._getAxisY();k=n.isDate(s.x)?t.FlexChart._toOADate(s.x):s.x;d=n.isDate(s.y)?t.FlexChart._toOADate(s.y):s.y;e.x=w.convert(k)+p.left;e.y=b.convert(d)+p.top}f._updateMarkerPosition(e);u.preventDefault()}},e.prototype._show=function(n){var t=n?n:this._marker;t.style.display='block'},e.prototype._hide=function(n){var t=n?n:this._marker;t.style.display='none'},e.prototype._toggleVisibility=function(){this._isVisible?this._show():this._hide()},e.prototype._resetDefaultValue=function(){var t=this;t._isVisible=!0;t._alignment=u.Auto;t._lines=i.None;t._interaction=r.None;t._horizontalPosition=null;t._verticalPosition=null;t._content=null;t._seriesIndex=null;t._dragThreshold=15;t._dragContent=!1;t._dragLines=!1;t._targetPoint=new n.Point},e.prototype._initialize=function(){var i=this,r=i._chart.hostElement.querySelector("."+t.FlexChart._CSS_PLOT_AREA),u;i._plot=r;i._marker||i._createMarker();r&&(i._plotRect=n.getElementRect(r),u=r.getBBox(),i._plotRect.width=u.width,i._plotRect.height=u.height,i._updateMarkerSize(),i._updateLinesSize());i._updateMarkerPosition();i._wrapperMoveMarker=i._moveMarker.bind(i);i._attach()},e.prototype._createMarker=function(){var t=this,i,r;i=document.createElement('div');n.addClass(i,e._CSS_MARKER);r=t._getContainer();r.appendChild(i);t._markerContainer=r;t._marker=i;t._createChildren()},e.prototype._removeMarker=function(){var n=this,t=n._markerContainer;t.removeChild(n._marker);n._content=null;n._hLine=null;n._vLine=null;t.hasChildNodes()||(n._chart.hostElement.removeChild(n._markerContainer),n._markerContainer=null);n._marker=null},e.prototype._getContainer=function(){var n=this._chart.hostElement.querySelector(e._CSS_MARKER_CONTAINER);return n||(n=this._createContainer()),n},e.prototype._createContainer=function(){var t=document.createElement('div'),i=this._chart.hostElement;return n.addClass(t,e._CSS_MARKER_CONTAINER),i.insertBefore(t,i.firstChild),t},e.prototype._createChildren=function(){var t=this,u=t._marker,f,o,s,i;i=document.createElement('div');i.style.position='absolute';i.style.height='100%';i.style.width='100%';u.appendChild(i);t._dragEle=i;f=document.createElement('div');n.addClass(f,e._CSS_MARKER_CONTENT);u.appendChild(f);t._markerContent=f;o=document.createElement('div');n.addClass(o,e._CSS_MARKER_HLINE);u.appendChild(o);t._hLine=o;s=document.createElement('div');n.addClass(s,e._CSS_MARKER_VLINE);u.appendChild(s);t._vLine=s;t._toggleElesDraggableClass(t._interaction===r.Drag);t._resetLinesVisibility()},e.prototype._toggleElesDraggableClass=function(t){var r=this;n.toggleClass(r._hLine,e._CSS_LINE_DRAGGABLE,t);n.toggleClass(r._vLine,e._CSS_LINE_DRAGGABLE,t);n.toggleClass(r._dragEle,e._CSS_LINE_DRAGGABLE,t&&r._dragContent&&r._lines!==i.None)},e.prototype._updateMarkerSize=function(){var t=this,i=t._plotRect,r=t._chart.hostElement,u=window.getComputedStyle(r,null),f=n.getElementRect(r);t._marker&&(t._marker.style.marginTop=i.top-f.top-(parseFloat(u.getPropertyValue('padding-top'))||0)+'px',t._marker.style.marginLeft=i.left-f.left-(parseFloat(u.getPropertyValue('padding-left'))||0)+'px')},e.prototype._updateLinesSize=function(){var n=this,t=n._plotRect;n._hLine&&n._vLine&&(n._hLine.style.width=t.width+'px',n._vLine.style.height=t.height+'px')},e.prototype._resetLinesVisibility=function(){var n=this;n._hLine&&n._vLine&&(n._hide(n._hLine),n._hide(n._vLine),(n._lines===i.Horizontal||n._lines===i.Both)&&n._show(n._hLine),(n._lines===i.Vertical||n._lines===i.Both)&&n._show(n._vLine))},e.prototype._updateMarkerPosition=function(n){var t=this,f=t._plotRect,e=t._targetPoint,i,u,o=!1,s=t._interaction===r.Drag;t._plot&&(i=f.left+f.width*(t._horizontalPosition||0),u=f.top+f.height*(t._verticalPosition||0),t._horizontalPosition==null&&n&&(i=n.x),t._verticalPosition==null&&n&&(u=n.y),(i!==e.x||u!==e.y)&&(o=!0),e.x=i,e.y=u,t._toggleVisibility(),t._content&&t._updateContent(),o&&t._raisePositionChanged(i,u),t._updatePositionByAlignment(n?!0:!1))},e.prototype._updateContent=function(){var n=this,r=n._chart,t=n._targetPoint,u=r.hitTest(t),i;i=n._content.call(null,u,t);n._markerContent.innerHTML=i||''},e.prototype._raisePositionChanged=function(t,i){var r=this._plotRect;this.onPositionChanged(new n.Point(t,i))},e.prototype._updatePositionByAlignment=function(){var n=this,c=n._alignment,f=n._targetPoint,s=n._marker,t=0,i=0,o=s.clientWidth,h=s.clientHeight,e=n._plotRect,l=12;n._plot&&(!n._capturedEle||n._capturedEle&&n._capturedEle!==n._markerContent?(c===u.Auto?(f.x+o+l>e.left+e.width&&f.x-o>=0&&(i=o),t=h,f.y-h<e.top&&(t=0)):((1&c)==1&&(i=o),(2&c)==2&&(t=h)),n._interaction===r.Move&&t===0&&i===0&&(i=-l)):(parseInt(n._hLine.style.top)>0&&(t=h),parseInt(n._vLine.style.left)>0&&(i=o)),s.style.left=f.x-i-e.left+'px',s.style.top=f.y-t-e.top+'px',n._hLine.style.top=t+'px',n._hLine.style.left=e.left-f.x+i+'px',n._vLine.style.top=e.top-f.y+t+'px',n._vLine.style.left=i+'px')},e.prototype._getEventPoint=function(t){return t instanceof MouseEvent?new n.Point(t.pageX,t.pageY):new n.Point(t.changedTouches[0].pageX,t.changedTouches[0].pageY)},e.prototype._pointInRect=function(n,t){return!n||!t?!1:n.x>=t.left&&n.x<=t.left+t.width&&n.y>=t.top&&n.y<=t.top+t.height?!0:!1},e._CSS_MARKER='wj-chart-linemarker',e._CSS_MARKER_HLINE='wj-chart-linemarker-hline',e._CSS_MARKER_VLINE='wj-chart-linemarker-vline',e._CSS_MARKER_CONTENT='wj-chart-linemarker-content',e._CSS_MARKER_CONTAINER='wj-chart-linemarker-container',e._CSS_LINE_DRAGGABLE='wj-chart-linemarker-draggable',e._CSS_TOUCH_DISABLED='wj-flexchart-touch-disabled',e}();t.LineMarker=e})(t=n.chart||(n.chart={}))}(wijmo||(wijmo={})),function(n){var t;(function(t){'use strict';var f=function(){function n(n,t,i,r){this._seriesIndex=n;this._pointIndex=t;this._dataX=i;this._dataY=r}return Object.defineProperty(n.prototype,"seriesIndex",{get:function(){return this._seriesIndex},enumerable:!0,configurable:!0}),Object.defineProperty(n.prototype,"pointIndex",{get:function(){return this._pointIndex},enumerable:!0,configurable:!0}),Object.defineProperty(n.prototype,"dataX",{get:function(){return this._dataX},enumerable:!0,configurable:!0}),Object.defineProperty(n.prototype,"dataY",{get:function(){return this._dataY},enumerable:!0,configurable:!0}),n}(),i,e,o,u,r,s;t._DataPoint=f,function(n){n[n.X=0]="X";n[n.Y=1]="Y";n[n.XY=2]="XY"}(t._MeasureOption||(t._MeasureOption={}));i=t._MeasureOption;e=function(){function t(n){this._rect=n}return Object.defineProperty(t.prototype,"rect",{get:function(){return this._rect},enumerable:!0,configurable:!0}),t.prototype.contains=function(n){var t=this._rect;return n.x>=t.left&&n.x<=t.right&&n.y>=t.top&&n.y<=t.bottom},t.prototype.pointDistance=function(n,t,r){var u=t.x-n.x,f=t.y-n.y;return r==i.X?Math.abs(u):r==i.Y?Math.abs(f):Math.sqrt(u*u+f*f)},t.prototype.distance=function(t){var u=i.XY,r;return t.x===null?u=i.Y:t.y===null&&(u=i.X),r=this._rect,t.x<r.left?t.y<r.top?this.pointDistance(t,new n.Point(r.left,r.top),u):t.y>r.bottom?this.pointDistance(t,new n.Point(r.left,r.bottom),u):u==i.Y?0:r.left-t.x:t.x>r.right?t.y<r.top?this.pointDistance(t,new n.Point(r.right,r.top),u):t.y>r.bottom?this.pointDistance(t,new n.Point(r.right,r.bottom),u):u==i.Y?0:t.x-r.right:u==i.X?0:t.y<r.top?r.top-t.y:t.y>r.bottom?t.y-r.bottom:0},t}();t._RectArea=e;o=function(){function n(n,t){this._center=n;this._rad=t;this._rad2=t*t}return Object.defineProperty(n.prototype,"center",{get:function(){return this._center},enumerable:!0,configurable:!0}),n.prototype.contains=function(n){var t=this._center.x-n.x,i=this._center.y-n.y;return t*t+i*i<=this._rad2},n.prototype.distance=function(n){var t=isNaN(n.x)?0:this._center.x-n.x,i=isNaN(n.y)?0:this._center.y-n.y,r=t*t+i*i;return r<=this._rad2?0:Math.sqrt(r)-this._rad},n}();t._CircleArea=o;u=function(){function i(n,t){this._x=[];this._y=[];this._x=n;this._y=t}return i.prototype.contains=function(){return!1},i.prototype.distance=function(i){for(var f,u=NaN,r=0;r<this._x.length-1;r++)f=t.FlexChart._dist(i,new n.Point(this._x[r],this._y[r]),new n.Point(this._x[r+1],this._y[r+1])),(isNaN(u)||f<u)&&(u=f);return u},i}();t._LinesArea=u;r=function(){function n(){}return n}();t._HitResult=r;s=function(){function i(n){this._map={};this._chart=n}return i.prototype.add=function(n,t){this._map[t]&&(n.tag||(n.tag=new f(t,NaN,NaN,NaN)),this._map[t].push(n))},i.prototype.clear=function(){var i,n;for(this._map={},i=this._chart.series,n=0;n<i.length;n++)i[n].hitTest===t.Series.prototype.hitTest&&(this._map[n]=[])},i.prototype.hitTest=function(t,i){var e,o,v,s,h,a,c;i===void 0&&(i=!1);var l=null,f=Number.MAX_VALUE,y=this._chart.series;for(e=y.length-1;e>=0;e--)if(o=this._map[e],o){for(v=o.length,s=v-1;s>=0;s--)if((h=o[s],!n.tryCast(h,u)||i)&&(a=h.distance(t),a<f&&(f=a,l=h,f==0)))break;if(f==0)break}return l?(c=new r,c.area=l,c.distance=f,c):null},i.prototype.hitTestSeries=function(n,t){var e=null,i=Number.MAX_VALUE,o=this._map[t],c,u,s,h,f;if(o)for(c=o.length,u=c-1;u>=0;u--)if(s=o[u],h=s.distance(n),h<i&&(i=h,e=s,i==0))break;return e?(f=new r,f.area=e,f.distance=i,f):null},i}();t._HitTester=s})(t=n.chart||(n.chart={}))}(wijmo||(wijmo={})),function(n){var t;(function(t){'use strict';var i=function(){function i(){this._DEFAULT_WIDTH=2;this._DEFAULT_SYM_SIZE=10;this.clipping=!0}return i.prototype.clear=function(){this.seriesCount=0;this.seriesIndex=0},i.prototype.getNumOption=function(t,i){var r=this.chart.options;return(i&&(r=r?r[i]:null),r&&r[t])?n.asNumber(r[t],!0):undefined},i.cloneStyle=function(n,t){var r,i;if(!n)return n;r={};for(i in n)t&&t.indexOf(i)>=0||(r[i]=n[i]);return r},i.prototype.isValid=function(i,r){return t._DataInfo.isValid(i)&&t._DataInfo.isValid(r)&&t.FlexChart._contains(this.chart._plotRect,new n.Point(i,r))},i.prototype.load=function(){},i.prototype.unload=function(){},i}();t._BasePlotter=i})(t=n.chart||(n.chart={}))}(wijmo||(wijmo={}));__extends=this&&this.__extends||function(n,t){function r(){this.constructor=n}for(var i in t)t.hasOwnProperty(i)&&(n[i]=t[i]);n.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r)},function(n){var t;(function(t){'use strict';var i=function(i){function r(){i.apply(this,arguments);this.origin=0;this.width=.7;this.isVolume=!1;this._volHelper=null;this.stackPosMap={};this.stackNegMap={};this.stacking=t.Stacking.None}return __extends(r,i),r.prototype.clear=function(){i.prototype.clear.call(this);this.stackNegMap[this.chart.axisY._uniqueId]={};this.stackPosMap[this.chart.axisY._uniqueId]={};this._volHelper=null},r.prototype.load=function(){var r,e,f,s,l,u,h,o,a,v,c;if(i.prototype.load.call(this),this.isVolume)for(a=null,v=null,u=0;u<this.chart.series.length;u++){if(r=this.chart.series[u],l=r.getDataType(1)||r.chart._xDataType,e=r._getAxisX(),f=r._getChartType(),f=f===null||n.isUndefined(f)?this.chart._getChartType():f,s=f===t.ChartType.Column?r._getBindingValues(1):f===t.ChartType.Candlestick?r._getBindingValues(4):null,l===n.DataType.Date)for(h=[],o=[],u=0;u<r._getLength();u++)c=r._getItem(u)[r.bindingX].valueOf(),h.push(c),o.push({value:c,text:n.Globalize.format(new Date(c),e.format||"d")});else h=this.dataInfo.getXVals();if(a=this.dataInfo.getMinX(),v=this.dataInfo.getMaxX(),s&&s.length>0){this._volHelper=new t._VolumeHelper(s,h,a,v,l);e._customConvert=this._volHelper.convert.bind(this._volHelper);e._customConvertBack=this._volHelper.convertBack.bind(this._volHelper);o&&o.length>0&&(this._itemsSource=e.itemsSource=o);break}}},r.prototype.unload=function(){var r,n,t;for(i.prototype.unload.call(this),t=0;t<this.chart.series.length;t++)r=this.chart.series[t],n=r._getAxisX(),n&&(n._customConvert=null,n._customConvertBack=null,n.itemsSource&&n.itemsSource==this._itemsSource&&(this._itemsSource=n.itemsSource=null))},r.prototype.adjustLimits=function(i){this.dataInfo=i;var e=i.getMinX(),r=i.getMinY(),o=i.getMaxX(),u=i.getMaxY(),f=i.getDeltaX();return f<=0&&(f=1),this.isVolume&&(this.chart._getChartType()===t.ChartType.Column||this.chart._getChartType()===t.ChartType.Candlestick)?this.load():this.unload(),this.rotated?(this.chart.axisY.logBase||(this.origin>u?u=this.origin:this.origin<r&&(r=this.origin)),new n.Rect(r,e-.5*f,u-r,o-e+f)):(this.chart.axisY.logBase||(this.origin>u?u=this.origin:this.origin<r&&(r=this.origin)),new n.Rect(e-.5*f,r,o-e+f,u-r))},r.prototype.plotSeries=function(i,r,u,f,e,o,s){var it=this.chart.series.indexOf(f),et=n.asType(f,t.SeriesBase),yi=this.chart.options,nt=this.width,tt=0,kt,st,g,ii,hi,si,l,c,a,v,p,y,oi,w,k,b,vi,h,bt,d,ai,ut;o=o||0;s=s||1;yi&&yi.groupWidth&&(kt=yi.groupWidth,n.isNumber(kt)?(g=n.asNumber(kt),isFinite(g)&&g>0&&(tt=g,nt=1)):n.isString(kt)&&(st=n.asString(kt),st&&st.indexOf('%')>=0?(st=st.replace('%',''),g=parseFloat(st),isFinite(g)&&(g<0?g=0:g>100&&(g=100),tt=0,nt=g/100)):(g=parseFloat(st),isFinite(g)&&g>0&&(tt=g,nt=1))));var dt=nt/s,pi=et._getAxisY()._uniqueId,lt=this.stackNegMap[pi],at=this.stackPosMap[pi],ti=f.getValues(0),ft=f.getValues(1);if(ti){ft||(ft=this.dataInfo.getXVals());ft&&(ii=this.dataInfo.getDeltaX(),ii>0&&(nt*=ii,dt*=ii));var ht=et._getSymbolFill(it),vt=et._getAltSymbolFill(it)||ht,ct=et._getSymbolStroke(it),yt=et._getAltSymbolStroke(it)||ct,pt=ti.length;ft!=null&&(pt=Math.min(pt,ft.length));var rt=this.origin,ot=0,ri,ui,gt=this.stacking!=t.Stacking.None,ni=this.stacking==t.Stacking.Stacked100pc;if(et._getChartType()!==undefined&&(gt=ni=!1),this.rotated){rt<r.actualMin?rt=r.actualMin:rt>r.actualMax&&(rt=r.actualMax);et._isCustomAxisY()&&(gt=ni=!1);var wt=r.convert(rt),ci=u.actualMin,li=u.actualMax;for(l=0;l<pt;l++)if(c=ft?ft[l]:l,a=ti[l],this._getSymbolOrigin&&(wt=u.convert(this._getSymbolOrigin(rt,l))),this._getSymbolStyles&&(v=this._getSymbolStyles(l),ht=v&&v.fill?v.fill:ht,vt=v&&v.fill?v.fill:vt,ct=v&&v.stroke?v.fill:ct,yt=v&&v.stroke?v.fill:yt),ri=a>0?ht:vt,ui=a>0?ct:yt,i.fill=ri,i.stroke=ui,t._DataInfo.isValid(c)&&t._DataInfo.isValid(a))if(gt){if(k=c-.5*nt,b=c+.5*nt,k<ci&&b<ci||k>li&&b>li)continue;k=u.convert(k);b=u.convert(b);ni&&(oi=this.dataInfo.getStackedAbsSum(c),a=a/oi);w=0;a>0?(w=isNaN(at[c])?0:at[c],p=r.convert(w),y=r.convert(w+a),at[c]=w+a):(w=isNaN(lt[c])?0:lt[c],p=r.convert(w),y=r.convert(w+a),lt[c]=w+a);h=new n.Rect(Math.min(p,y),Math.min(k,b),Math.abs(y-p),Math.abs(b-k));tt>0&&(d=1-tt/h.height,d<0&&(d=0),ai=h.top+.5*h.height,h.top+=(ai-h.top)*d,h.height=Math.min(tt,h.height));ut=new t._RectArea(h);this.drawSymbol(i,h,f,l,new n.Point(y,h.top+.5*h.height));f._setPointIndex(l,ot);ot++;ut.tag=new t._DataPoint(it,l,w+a,c);this.hitTester.add(ut,it)}else{if(k=c-.5*nt+o*dt,b=c-.5*nt+(o+1)*dt,k<ci&&b<ci||k>li&&b>li)continue;k=u.convert(k);b=u.convert(b);vi=r.convert(a);h=new n.Rect(Math.min(vi,wt),Math.min(k,b),Math.abs(wt-vi),Math.abs(b-k));tt>0&&(bt=tt/s,d=1-bt/h.height,d<0&&(d=0),ai=u.convert(c),h.top+=(ai-h.top)*d,h.height=Math.min(bt,h.height));ut=new t._RectArea(h);this.drawSymbol(i,h,f,l,new n.Point(vi,h.top+.5*h.height));f._setPointIndex(l,ot);ot++;ut.tag=new t._DataPoint(it,l,a,c);this.hitTester.add(ut,it)}}else{rt<u.actualMin?rt=u.actualMin:rt>u.actualMax&&(rt=u.actualMax);var wt=u.convert(rt),fi=r.actualMin,ei=r.actualMax;for(et._isCustomAxisY()&&(gt=ni=!1),l=0;l<pt;l++)if(c=ft?ft[l]:l,a=ti[l],this._getSymbolOrigin&&(wt=u.convert(this._getSymbolOrigin(rt,l,pt))),this._getSymbolStyles&&(v=this._getSymbolStyles(l,pt),ht=v&&v.fill?v.fill:ht,vt=v&&v.fill?v.fill:vt,ct=v&&v.stroke?v.stroke:ct,yt=v&&v.stroke?v.stroke:yt),ri=a>0?ht:vt,ui=a>0?ct:yt,i.fill=ri,i.stroke=ui,t._DataInfo.isValid(c)&&t._DataInfo.isValid(a))if(gt){if(p=c-.5*nt,y=c+.5*nt,p<fi&&y<fi||p>ei&&y>ei)continue;if(p=r.convert(p),y=r.convert(y),!t._DataInfo.isValid(p)||!t._DataInfo.isValid(y))continue;ni&&(oi=this.dataInfo.getStackedAbsSum(c),a=a/oi);w=0;a>0?(w=isNaN(at[c])?0:at[c],k=u.convert(w),b=u.convert(w+a),at[c]=w+a):(w=isNaN(lt[c])?0:lt[c],k=u.convert(w),b=u.convert(w+a),lt[c]=w+a);h=new n.Rect(Math.min(p,y),Math.min(k,b),Math.abs(y-p),Math.abs(b-k));tt>0&&(d=1-tt/h.width,d<0&&(d=0),si=h.left+.5*h.width,h.left+=(si-h.left)*d,h.width=Math.min(tt,h.width));ut=new t._RectArea(h);this.drawSymbol(i,h,f,l,new n.Point(h.left+.5*h.width,b));f._setPointIndex(l,ot);ot++;ut.tag=new t._DataPoint(it,l,c,w+a);this.hitTester.add(ut,it)}else{if(p=c-.5*nt+o*dt,y=c-.5*nt+(o+1)*dt,p<fi&&y<fi||p>ei&&y>ei)continue;if(p=r.convert(p),y=r.convert(y),!t._DataInfo.isValid(p)||!t._DataInfo.isValid(y))continue;hi=u.convert(a);h=new n.Rect(Math.min(p,y),Math.min(hi,wt),Math.abs(y-p),Math.abs(wt-hi));tt>0&&(bt=tt/s,d=1-bt/h.width,d<0&&(d=0),si=r.convert(c),h.left+=(si-h.left)*d,h.width=Math.min(bt,h.width));ut=new t._RectArea(h);this.drawSymbol(i,h,f,l,new n.Point(h.left+.5*h.width,hi));f._setPointIndex(l,ot);ot++;ut.tag=new t._DataPoint(it,l,c,a);this.hitTester.add(ut,it)}}}},r.prototype.drawSymbol=function(n,i,r,u,f){var o=this,e;this.chart.itemFormatter?(n.startGroup(),e=new t.HitTestInfo(this.chart,f,t.ChartElement.SeriesSymbol),e._setData(r,u),this.chart.itemFormatter(n,e,function(){o.drawDefaultSymbol(n,i,r)}),n.endGroup()):this.drawDefaultSymbol(n,i,r)},r.prototype.drawDefaultSymbol=function(n,t,i){n.drawRect(t.left,t.top,t.width,t.height,null,i.symbolStyle)},r}(t._BasePlotter);t._BarPlotter=i})(t=n.chart||(n.chart={}))}(wijmo||(wijmo={}));__extends=this&&this.__extends||function(n,t){function r(){this.constructor=n}for(var i in t)t.hasOwnProperty(i)&&(n[i]=t[i]);n.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r)},function(n){var t;(function(t){'use strict';var i=function(i){function r(){i.call(this);this.hasSymbols=!1;this.hasLines=!0;this.isSpline=!1;this.stacking=t.Stacking.None;this.stackPos={};this.stackNeg={};this.clipping=!1}return __extends(r,i),r.prototype.clear=function(){i.prototype.clear.call(this);this.stackNeg={};this.stackPos={}},r.prototype.adjustLimits=function(t){var f;this.dataInfo=t;var r=t.getMinX(),i=t.getMinY(),e=t.getMaxX(),u=t.getMaxY();return this.isSpline&&!this.chart.axisY.logBase&&(f=.1*(u-i),i-=f,u+=f),this.rotated?new n.Rect(i,r,u-i,e-r):new n.Rect(r,i,e-r,u-i)},r.prototype.plotSeries=function(i,r,u,f){var c=n.asType(f,t.SeriesBase),h=this.chart.series.indexOf(f),k=f.getValues(0),p=f.getValues(1),g,nt,ct,tt,ft,lt,et,b,l,y,e,o,s;if(k){p||(p=this.dataInfo.getXVals());var it=t._BasePlotter.cloneStyle(f.style,['fill']),w=k.length,ot=!0;p?w=Math.min(w,p.length):(ot=!1,p=new Array(w));var at=this._DEFAULT_WIDTH,d=c._getSymbolFill(h),vt=c._getAltSymbolFill(h)||d,rt=c._getSymbolStroke(h),yt=c._getAltSymbolStroke(h)||rt,ut=c._getSymbolSize();i.stroke=rt;i.strokeWidth=at;i.fill=d;var a=[],v=[],pt=this.rotated,st=this.stacking!=t.Stacking.None&&!c._isCustomAxisY(),ht=this.stacking==t.Stacking.Stacked100pc&&!c._isCustomAxisY();for(c._getChartType()!==undefined&&(st=ht=!1),g=this.chart.interpolateNulls,nt=!1,e=0;e<w;e++)o=ot?p[e]:e,s=k[e],t._DataInfo.isValid(o)&&t._DataInfo.isValid(s)?(st&&(ht&&(ct=this.dataInfo.getStackedAbsSum(o),s=s/ct),s>=0?(tt=isNaN(this.stackPos[o])?0:this.stackPos[o],s=this.stackPos[o]=tt+s):(tt=isNaN(this.stackNeg[o])?0:this.stackNeg[o],s=this.stackNeg[o]=tt+s)),pt?(ft=new t._DataPoint(h,e,s,o),lt=r.convert(s),s=u.convert(o),o=lt):(ft=new t._DataPoint(h,e,o,s),o=r.convert(o),s=u.convert(s)),isNaN(o)||isNaN(s)?(nt=!0,g!==!0&&(a.push(undefined),v.push(undefined))):(a.push(o),v.push(s),et=new t._CircleArea(new n.Point(o,s),.5*ut),et.tag=ft,this.hitTester.add(et,h))):(nt=!0,g!==!0&&(a.push(undefined),v.push(undefined)));if(b=0,this.hasLines)if(i.fill=null,nt&&g!==!0){for(l=[],y=[],e=0;e<w;e++)a[e]===undefined?(l.length>1&&(this._drawLines(i,l,y,null,it,this.chart._plotrectId),this.hitTester.add(new t._LinesArea(l,y),h),b++),l=[],y=[]):(l.push(a[e]),y.push(v[e]));l.length>1&&(this._drawLines(i,l,y,null,it,this.chart._plotrectId),this.hitTester.add(new t._LinesArea(l,y),h),b++)}else this._drawLines(i,a,v,null,it,this.chart._plotrectId),this.hitTester.add(new t._LinesArea(a,v),h),b++;if((this.hasSymbols||this.chart.itemFormatter)&&ut>0)for(i.fill=d,e=0;e<w;e++)o=a[e],s=v[e],this.hasLines===!1&&(i.fill=k[e]>0?d:vt,i.stroke=k[e]>0?rt:yt),this.isValid(o,s,r,u)&&(this._drawSymbol(i,o,s,ut,c,e),f._setPointIndex(e,b),b++)}},r.prototype._drawLines=function(n,t,i,r,u,f){this.isSpline?n.drawSplines(t,i,r,u,f):n.drawLines(t,i,r,u,f)},r.prototype._drawSymbol=function(i,r,u,f,e,o){var h=this,s;this.chart.itemFormatter?(i.startGroup(),s=new t.HitTestInfo(this.chart,new n.Point(r,u),t.ChartElement.SeriesSymbol),s._setData(e,o),this.chart.itemFormatter(i,s,function(){h.hasSymbols&&h._drawDefaultSymbol(i,r,u,f,e.symbolMarker,e.symbolStyle)}),i.endGroup()):this._drawDefaultSymbol(i,r,u,f,e.symbolMarker,e.symbolStyle)},r.prototype._drawDefaultSymbol=function(n,i,r,u,f,e){f==t.Marker.Dot?n.drawEllipse(i,r,.5*u,.5*u,null,e):f==t.Marker.Box&&n.drawRect(i-.5*u,r-.5*u,u,u,null,e)},r}(t._BasePlotter);t._LinePlotter=i})(t=n.chart||(n.chart={}))}(wijmo||(wijmo={}));__extends=this&&this.__extends||function(n,t){function r(){this.constructor=n}for(var i in t)t.hasOwnProperty(i)&&(n[i]=t[i]);n.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r)},function(n){var t;(function(t){'use strict';var i=function(i){function r(){i.call(this);this.stacking=t.Stacking.None;this.isSpline=!1;this.stackPos={};this.stackNeg={}}return __extends(r,i),r.prototype.adjustLimits=function(t){var f;this.dataInfo=t;var r=t.getMinX(),i=t.getMinY(),e=t.getMaxX(),u=t.getMaxY();return this.isSpline&&(f=.1*(u-i),this.chart.axisY.logBase||(i-=f),u+=f),this.rotated?new n.Rect(i,r,u-i,e-r):new n.Rect(r,i,e-r,u-i)},r.prototype.clear=function(){i.prototype.clear.call(this);this.stackNeg={};this.stackPos={}},r.prototype.plotSeries=function(i,r,u,f,e){var w=this.chart.series.indexOf(f),ht=f,ct=f.getValues(0),g=f.getValues(1),nt,lt,c,v,y,gt,p,b,ut,o,l,a,k,bt;if(ct&&(nt=ct.length,nt)){g||(g=this.dataInfo.getXVals());lt=!0;g?g.length<nt&&(nt=g.length):(lt=!1,g=new Array(nt));var s=[],h=[],tt=[],it=[],d=this.stacking!=t.Stacking.None&&!ht._isCustomAxisY(),kt=this.stacking==t.Stacking.Stacked100pc&&!ht._isCustomAxisY();ht._getChartType()!==undefined&&(d=kt=!1);var rt=this.rotated,ot=!1,st=this.chart.interpolateNulls,ft=null,et=null,dt=this.chart._plotRect;for(a=0;a<nt;a++)c=lt?g[a]:a,v=ct[a],(ft===null||c>ft)&&(ft=c),(et===null||c<et)&&(et=c),t._DataInfo.isValid(c)&&t._DataInfo.isValid(v)?(y=rt?u.convert(c):r.convert(c),d&&(kt&&(gt=this.dataInfo.getStackedAbsSum(c),v=v/gt),p=0,v>=0?(p=isNaN(this.stackPos[c])?0:this.stackPos[c],v=this.stackPos[c]=p+v):(p=isNaN(this.stackNeg[c])?0:this.stackNeg[c],v=this.stackNeg[c]=p+v),rt?(p<r.actualMin&&(p=r.actualMin),tt.push(r.convert(p)),it.push(y)):(tt.push(y),p<u.actualMin&&(p=u.actualMin),it.push(u.convert(p)))),rt?(b=r.convert(v),isNaN(y)||isNaN(b)?(ot=!0,d||st===!0||(s.push(undefined),h.push(undefined))):(s.push(b),h.push(y),t.FlexChart._contains(dt,new n.Point(b,y))&&(ut=new t._CircleArea(new n.Point(b,y),this._DEFAULT_SYM_SIZE),ut.tag=new t._DataPoint(w,a,v,c),this.hitTester.add(ut,w)))):(b=u.convert(v),isNaN(y)||isNaN(b)?(ot=!0,d||st===!0||(s.push(undefined),h.push(undefined))):(s.push(y),h.push(b),t.FlexChart._contains(dt,new n.Point(y,b))&&(ut=new t._CircleArea(new n.Point(y,b),this._DEFAULT_SYM_SIZE),ut.tag=new t._DataPoint(w,a,c,v),this.hitTester.add(ut,w))))):(ot=!0,d||st===!0||(s.push(undefined),h.push(undefined)));var at=this._DEFAULT_WIDTH,vt=e._getColorLight(w),yt=e._getColor(w),pt=t._BasePlotter.cloneStyle(f.style,['fill']),wt=t._BasePlotter.cloneStyle(f.style,['stroke']);if(!d&&st!==!0&&ot){for(o=[],l=[],a=0;a<nt;a++)s[a]===undefined?(o.length>1&&(this.isSpline&&(k=this._convertToSpline(o,l),o=k.xs,l=k.ys),i.stroke=yt,i.strokeWidth=at,i.fill='none',i.drawLines(o,l,null,pt),this.hitTester.add(new t._LinesArea(o,l),w),rt?(o.push(r.convert(r.actualMin),r.convert(r.actualMin)),l.push(u.convert(u.actualMax),u.convert(u.actualMin))):(o.push(o[o.length-1],o[0]),l.push(u.convert(u.actualMin),u.convert(u.actualMin))),i.fill=vt,i.stroke='none',i.drawPolygon(o,l,null,wt)),o=[],l=[]):(o.push(s[a]),l.push(h[a]));o.length>1&&(this.isSpline&&(k=this._convertToSpline(o,l),o=k.xs,l=k.ys),i.stroke=yt,i.strokeWidth=at,i.fill='none',i.drawLines(o,l,null,pt),this.hitTester.add(new t._LinesArea(o,l),w),rt?(o.push(r.convert(r.actualMin),r.convert(r.actualMin)),l.push(u.convert(u.actualMax),u.convert(u.actualMin))):(o.push(o[o.length-1],o[0]),l.push(u.convert(u.actualMin),u.convert(u.actualMin))),i.fill=vt,i.stroke='none',i.drawPolygon(o,l,null,wt))}else this.isSpline&&(k=this._convertToSpline(s,h),s=k.xs,h=k.ys),d?(this.isSpline&&(bt=this._convertToSpline(tt,it),tt=bt.xs,it=bt.ys),s=s.concat(tt.reverse()),h=h.concat(it.reverse())):rt?(s.push(r.convert(r.actualMin),r.convert(r.actualMin)),h.push(u.convert(ft),u.convert(et))):(s.push(r.convert(ft),r.convert(et)),h.push(u.convert(u.actualMin),u.convert(u.actualMin))),i.fill=vt,i.stroke='none',i.drawPolygon(s,h,null,wt),d?(s=s.slice(0,s.length-tt.length),h=h.slice(0,h.length-it.length)):(s=s.slice(0,s.length-2),h=h.slice(0,h.length-2)),i.stroke=yt,i.strokeWidth=at,i.fill='none',i.drawLines(s,h,null,pt),this.hitTester.add(new t._LinesArea(s,h),w);this._drawSymbols(i,f,w)}},r.prototype._convertToSpline=function(n,i){if(n&&i){var u=new t._Spline(n,i),r=u.calculate();return{xs:r.xs,ys:r.ys}}return{xs:n,ys:i}},r.prototype._drawSymbols=function(i,r,u){var o,f,e,h,s;if(this.chart.itemFormatter!=null)for(o=this.hitTester._map[u],f=0;f<o.length;f++)e=n.tryCast(o[f],t._CircleArea),e&&(h=e.tag,i.startGroup(),s=new t.HitTestInfo(this.chart,e.center,t.ChartElement.SeriesSymbol),s._setDataPoint(h),this.chart.itemFormatter(i,s,function(){}),i.endGroup())},r}(t._BasePlotter);t._AreaPlotter=i})(t=n.chart||(n.chart={}))}(wijmo||(wijmo={}));__extends=this&&this.__extends||function(n,t){function r(){this.constructor=n}for(var i in t)t.hasOwnProperty(i)&&(n[i]=t[i]);n.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r)},function(n){var t;(function(t){'use strict';var i=function(i){function r(){i.call(this);this._MIN_SIZE=5;this._MAX_SIZE=30;this.hasLines=!1;this.hasSymbols=!0;this.clipping=!0}return __extends(r,i),r.prototype.adjustLimits=function(n,r){var v=this.getNumOption('minSize','bubble'),c,h,p,u,w,f,b,l,k,a;this._minSize=v?v:this._MIN_SIZE;c=this.getNumOption('maxSize','bubble');this._maxSize=c?c:this._MAX_SIZE;var y=this.chart.series,d=y.length,o=NaN,s=NaN;for(h=0;h<d;h++)if(p=y[h],u=p._getBindingValues(1),u)for(w=u.length,f=0;f<w;f++)t._DataInfo.isValid(u[f])&&((isNaN(o)||u[f]<o)&&(o=u[f]),(isNaN(s)||u[f]>s)&&(s=u[f]));this._minValue=o;this._maxValue=s;var e=i.prototype.adjustLimits.call(this,n,r),g=this.chart.axisX,nt=this.chart.axisY;return g.logBase<=0&&(b=r.width-this._maxSize,l=b/e.width,e.left-=this._maxSize*.5/l,e.width+=this._maxSize/l),nt.logBase<=0&&(k=r.height-this._maxSize,a=k/e.height,e.top-=this._maxSize*.5/a,e.height+=this._maxSize/a),e},r.prototype._drawSymbol=function(i,r,u,f,e,o){var a=this,c=e._getItem(o),s,f,l,h;c&&(s=e._getBinding(1),s&&(f=c[s],t._DataInfo.isValid(f)&&(l=this._minValue==this._maxValue?1:Math.sqrt((f-this._minValue)/(this._maxValue-this._minValue)),f=this._minSize+(this._maxSize-this._minSize)*l,this.chart.itemFormatter?(h=new t.HitTestInfo(this.chart,new n.Point(r,u),t.ChartElement.SeriesSymbol),h._setData(e,o),i.startGroup(),this.chart.itemFormatter(i,h,function(){a._drawDefaultSymbol(i,r,u,f,e.symbolMarker,e.symbolStyle)}),i.endGroup()):this._drawDefaultSymbol(i,r,u,f,e.symbolMarker,e.symbolStyle))))},r}(t._LinePlotter);t._BubblePlotter=i})(t=n.chart||(n.chart={}))}(wijmo||(wijmo={}));__extends=this&&this.__extends||function(n,t){function r(){this.constructor=n}for(var i in t)t.hasOwnProperty(i)&&(n[i]=t[i]);n.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r)},function(n){var t;(function(t){'use strict';var i=function(i){function r(){i.apply(this,arguments);this.isCandle=!0;this.isArms=!1;this.isEqui=!1;this.isVolume=!1;this._volHelper=null;this._symWidth=.7}return __extends(r,i),r.prototype.clear=function(){i.prototype.clear.call(this);this._volHelper=null},r.prototype.load=function(){var r,e,f,s,l,u,h,o,a,v,c;if(i.prototype.load.call(this),this.isVolume)for(a=null,v=null,u=0;u<this.chart.series.length;u++){if(r=this.chart.series[u],l=r.getDataType(1)||r.chart._xDataType,e=r._getAxisX(),f=r._getChartType(),f=f===null||n.isUndefined(f)?this.chart._getChartType():f,s=f===t.ChartType.Column?r._getBindingValues(1):f===t.ChartType.Candlestick?r._getBindingValues(4):null,l===n.DataType.Date)for(h=[],o=[],u=0;u<r._getLength();u++)c=r._getItem(u)[r.bindingX].valueOf(),h.push(c),o.push({value:c,text:n.Globalize.format(new Date(c),e.format||"d")});else h=this.dataInfo.getXVals();if(a=this.dataInfo.getMinX(),v=this.dataInfo.getMaxX(),s&&s.length>0){this._volHelper=new t._VolumeHelper(s,h,a,v,l);e._customConvert=this._volHelper.convert.bind(this._volHelper);e._customConvertBack=this._volHelper.convertBack.bind(this._volHelper);o&&o.length>0&&(this._itemsSource=e.itemsSource=o);break}}},r.prototype.unload=function(){var r,n,t;for(i.prototype.unload.call(this),t=0;t<this.chart.series.length;t++)r=this.chart.series[t],n=r._getAxisX(),n&&(n._customConvert=null,n._customConvertBack=null,n.itemsSource&&n.itemsSource==this._itemsSource&&(this._itemsSource=n.itemsSource=null))},r.prototype.parseSymbolWidth=function(t){var u,r,i;this._isPixel=undefined;t&&(n.isNumber(t)?(u=n.asNumber(t),isFinite(u)&&u>0&&(this._symWidth=u,this._isPixel=!0)):n.isString(t)&&(r=n.asString(t),r&&r.indexOf('%')>=0?(r=r.replace('%',''),i=parseFloat(r),isFinite(i)&&(i<0?i=0:i>100&&(i=100),this._symWidth=i/100,this._isPixel=!1)):(i=parseFloat(t),isFinite(i)&&i>0&&(this._symWidth=i,this._isPixel=!0))))},r.prototype.adjustLimits=function(i){var a,u,s,v,h,tt,o,c,y;this.dataInfo=i;var f=i.getMinX(),r=i.getMinY(),p=i.getMaxX(),e=i.getMaxY(),l=i.getDeltaX(),it=this.chart._xDataType;l<=0&&(l=1);var w=this.chart.series,rt=w.length,b=0;for(this.parseSymbolWidth(this.symbolWidth),this.isVolume&&(this.chart._getChartType()===t.ChartType.Column||this.chart._getChartType()===t.ChartType.Candlestick)?this.load():this.unload(),a=0;a<rt;a++)if(u=w[a],!u._isCustomAxisY()){var k=u._getBinding(1),d=u._getBinding(2),g=u._getBinding(3),nt=u._getLength();if(nt)for(s=u._getSymbolSize(),s>b&&(b=s),v=0;v<nt;v++)h=u._getItem(v),h&&(tt=[k?h[k]:null,d?h[d]:null,g?h[g]:null],tt.forEach(function(n){t._DataInfo.isValid(n)&&n!==null&&((isNaN(r)||n<r)&&(r=n),(isNaN(e)||n>e)&&(e=n))}))}return o=p-f,c=this.chart._plotRect,c&&c.width&&!this.isVolume&&(s+=2,y=c.width/(c.width-s)*o,f=f-.5*(y-o),o=y),it===n.DataType.Date&&this.isVolume&&(this.chart._getChartType()===t.ChartType.Column||this.chart._getChartType()===t.ChartType.Candlestick)?new n.Rect(f-.5*l,r,p-f+l,e-r):this.chart._isRotated()?new n.Rect(r,f,e-r,o):new n.Rect(f,r,o,e-r)},r.prototype.plotSeries=function(i,r,u,f){var yt=this,o=n.asType(f,t.SeriesBase),a=this.chart.series.indexOf(f),d=f.getValues(0),c=f.getValues(1),ft=this._symWidth,et=this.chart._isRotated(),g,v,nt,e,l,ut;if(d){c||(c=this.dataInfo.getXVals());c&&(g=this.dataInfo.getDeltaX(),g>0&&this._isPixel===!1&&(ft*=g));v=d.length;nt=!0;c?v=Math.min(v,c.length):(nt=!1,c=new Array(v));var pt=this._DEFAULT_WIDTH,tt=o._getSymbolFill(a),ot=o._getAltSymbolFill(a)||"transparent",w=o._getSymbolStroke(a),st=o._getAltSymbolStroke(a)||w,ht=this._isPixel===undefined?o._getSymbolSize():ft;i.stroke=w;i.strokeWidth=pt;i.fill=tt;var ct=o._getBinding(1),lt=o._getBinding(2),h=o._getBinding(3),wt=et?u.actualMin:r.actualMin,bt=et?u.actualMax:r.actualMax,at=0,y,it,s=null,p=null;for(e=0;e<v;e++)if(s=o._getItem(e),s){if(l=nt?c[e]:e,t._DataInfo.isValid(l)&&wt<=l&&l<=bt){var rt=d[e],vt=ct?s[ct]:null,b=lt?s[lt]:null,k=h?s[h]:null;i.startGroup();this.isEqui&&p!==null?p[h]!==s[h]&&(y=p[h]<s[h]?ot:tt,it=p[h]<s[h]?st:w):(y=b<k?ot:tt,it=b<k?st:w);i.fill=y;i.stroke=it;this.chart.itemFormatter?(ut=new t.HitTestInfo(this.chart,new n.Point(r.convert(l),u.convert(rt)),t.ChartElement.SeriesSymbol),ut._setData(o,e),this.chart.itemFormatter(i,ut,function(){yt._drawSymbol(i,r,u,a,e,y,ht,l,rt,vt,b,k)})):this._drawSymbol(i,r,u,a,e,y,ht,l,rt,vt,b,k);i.endGroup();f._setPointIndex(e,at);at++}p=s}}},r.prototype._drawSymbol=function(i,r,u,f,e,o,s,h,c,l,a,v){var g=new t._DataPoint(f,e,h,c),k,y=null,w=null,p=null,b=null,d=this.chart._isRotated(),nt,tt;d&&(nt=u,u=r,r=nt);this._isPixel===!1&&(p=r.convert(h-.5*s),b=r.convert(h+.5*s),p>b&&(tt=p,p=b,b=tt));h=r.convert(h);this._isPixel!==!1&&(p=h-.5*s,b=h+.5*s);this.isCandle?(t._DataInfo.isValid(a)&&t._DataInfo.isValid(v)&&(a=u.convert(a),v=u.convert(v),y=Math.min(a,v),w=y+Math.abs(a-v),d?(i.drawRect(y,p,w-y,b-p),k=new t._RectArea(new n.Rect(y,p,w-y,b-p))):(i.drawRect(p,y,b-p,w-y),k=new t._RectArea(new n.Rect(p,y,b-p,w-y))),k.tag=g,this.hitTester.add(k,f)),t._DataInfo.isValid(c)&&(c=u.convert(c),y!==null&&(d?i.drawLine(w,h,c,h):i.drawLine(h,y,h,c))),t._DataInfo.isValid(l)&&(l=u.convert(l),w!==null&&(d?i.drawLine(y,h,l,h):i.drawLine(h,w,h,l)))):this.isEqui?t._DataInfo.isValid(c)&&t._DataInfo.isValid(l)&&(c=u.convert(c),l=u.convert(l),y=Math.min(c,l),w=y+Math.abs(c-l),i.drawRect(p,y,b-p,w-y),k=new t._RectArea(new n.Rect(p,y,b-p,w-y)),k.tag=g,this.hitTester.add(k,f)):this.isArms?(t._DataInfo.isValid(a)&&t._DataInfo.isValid(v)&&(a=u.convert(a),v=u.convert(v),y=Math.min(a,v),w=y+Math.abs(a-v),i.drawRect(p,y,b-p,w-y)),t._DataInfo.isValid(c)&&y!==null&&(c=u.convert(c),i.drawLine(h,y,h,c)),t._DataInfo.isValid(l)&&w!==null&&(l=u.convert(l),i.drawLine(h,w,h,l)),t._DataInfo.isValid(c)&&t._DataInfo.isValid(l)&&(i.fill="transparent",y=Math.min(c,l),w=y+Math.abs(c-l),i.drawRect(p,y,b-p,w-y),k=new t._RectArea(new n.Rect(p,y,b-p,w-y)),k.tag=g,this.hitTester.add(k,f))):(t._DataInfo.isValid(c)&&t._DataInfo.isValid(l)&&(c=u.convert(c),l=u.convert(l),y=Math.min(c,l),w=y+Math.abs(c-l),d?(i.drawLine(l,h,c,h),k=new t._RectArea(new n.Rect(y,p,w-y,b-p))):(i.drawLine(h,l,h,c),k=new t._RectArea(new n.Rect(p,y,b-p,w-y))),k.tag=g,this.hitTester.add(k,f)),t._DataInfo.isValid(a)&&(a=u.convert(a),d?i.drawLine(a,p,a,h):i.drawLine(p,a,h,a)),t._DataInfo.isValid(v)&&(v=u.convert(v),d?i.drawLine(v,h,v,b):i.drawLine(h,v,b,v)))},r}(t._BasePlotter);t._FinancePlotter=i})(t=n.chart||(n.chart={}))}(wijmo||(wijmo={})),function(n){var t;(function(t){"use strict";var i=function(){function t(t,i,r,u,f){this._volumes=n.asArray(t);this._xVals=n.asArray(i);this._xDataMin=n.asNumber(r,!0,!1);this._xDataMax=n.asNumber(u,!0,!1);this._xDataType=n.asEnum(f,n.DataType,!0);this._calcData=[];this._init()}return t.prototype.convert=function(i,r,u){var s=undefined,o=this._calcData.length,f=-1,e;if(this._hasXs&&this._xDataType===n.DataType.Date){if(f=this._xVals.indexOf(i),f===-1)for(e=0;e<this._xVals.length;e++)if(e<this._xVals.length-1&&this._xVals[e]<=i&&i<=this._xVals[e+1]){f=e;break}else if(e===0&&i<=this._xVals[e]){f=e;break}else if(e===this._xVals.length-1&&this._xVals[e]<=i){f=e;break}f===-1&&(f=this._xVals.indexOf(Math.floor(i)),f=n.clamp(f,0,o-1))}else this._hasXs?(f=this._xVals.indexOf(i),f===-1&&(f=this._xVals.indexOf(Math.floor(i)),f=n.clamp(f,0,o-1))):f=n.clamp(Math.round(i),0,o-1);return 0<=f&&f<o&&(this._hasXs&&(i=t.convertToRange(i,0,o-1,this._xDataMin,this._xDataMax)),s=this._calcData[f].value+(i-f)*this._calcData[f].width-.5*this._calcData[f].width,r=this._getXVolume(r),u=this._getXVolume(u),s=(s-r)/(u-r)),s},t.prototype.convertBack=function(n){for(var u=undefined,f=this._calcData.length,r=-1,i=0;i<f;i++)if(this._calcData[i].x1<=n&&n<=this._calcData[i].x2||i===0&&n<=this._calcData[i].x2||i===f-1&&this._calcData[i].x1<=n){r=i;break}return 0<=r&&r<f&&(u=n/this._calcData[r].width-this._calcData[r].value/this._calcData[r].width+.5+i,this._hasXs&&(u=t.convertToRange(u,this._xDataMin,this._xDataMax,0,f-1))),u},t.prototype._init=function(){var r,u,i;this._hasXs=this._xVals!==null&&this._xVals.length>0;this._hasXs&&!n.isNumber(this._xDataMin)&&(this._xDataMin=Math.min.apply(null,this._xVals));this._hasXs&&!n.isNumber(this._xDataMax)&&(this._xDataMax=Math.max.apply(null,this._xVals));this._hasXs&&(this._hasXs=n.isNumber(this._xDataMin)&&n.isNumber(this._xDataMax));this._hasXs&&this._xDataType===n.DataType.Date&&this._fillGaps();for(var f=0,t=0,e=this._volumes!==null&&this._volumes.length>0?this._volumes.length:0,t=0;t<e;t++)f+=this._volumes[t];for(i=0,t=0;t<e;t++)u=this._volumes[t]/f,r=i+u,this._calcData.push({value:r,width:u,x1:i,x2:r}),i=this._calcData[t].value},t.prototype._getXVolume=function(i){var f=this._calcData.length,u=-1,r;if(this._hasXs)for(u=this._xVals.indexOf(i),r=0;r<this._xVals.length;r++)if(r<this._xVals.length-1&&this._xVals[r]<=i&&i<=this._xVals[r+1]){u=r;break}else if(r===0&&i<=this._xVals[r]){u=r;break}else if(r===this._xVals.length-1&&this._xVals[r]<=i){u=r;break}return this._hasXs&&(i=t.convertToRange(i,0,f-1,this._xDataMin,this._xDataMax)),u===-1&&(u=n.clamp(Math.round(i),0,f-1)),this._calcData[u].value+(i-u)*this._calcData[u].width-.5*this._calcData[u].width},t.convertToRange=function(n,t,i,r,u){return t===i||r===u?0:(n-r)*(i-t)/(u-r)+t},t.prototype._fillGaps=function(){if(this._xDataType===n.DataType.Date&&this._xVals!==null&&!(this._xVals.length<=0))for(var t=this._xDataMin,r=this._xDataMax,i=1;t<r;i++)t=new Date(t),t.setDate(t.getDate()+1),t=t.valueOf(),t!==this._xVals[i]&&(this._xVals.splice(i,0,t),this._volumes.splice(i,0,0))},t}();t._VolumeHelper=i})(t=n.chart||(n.chart={}))}(wijmo||(wijmo={}))