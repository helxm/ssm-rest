/*
    *
    * Wijmo Library 5.20162.188
    * http://wijmo.com/
    *
    * Copyright(c) GrapeCity, Inc.  All rights reserved.
    *
    * Licensed under the Wijmo Commercial License.
    * sales@wijmo.com
    * http://wijmo.com/products/wijmo-5/license/
    *
    */
var __extends=this&&this.__extends||function(n,t){function r(){this.constructor=n}for(var i in t)t.hasOwnProperty(i)&&(n[i]=t[i]);n.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r)},wijmo;(function(n){var t;(function(t){var i;(function(t){var i;(function(i){'use strict';var r=function(n){function i(){n.apply(this,arguments)}return __extends(i,n),i.prototype.apply=function(n){var i=this.column.grid;return(i instanceof t.FlexSheet)?!this.showValues||!Object.keys(this.showValues).length?!0:(n=i.getCellValue(n,this.column.index,!0),this.showValues[n]!=undefined):!1},i}(n.grid.filter.ValueFilter);i.FlexSheetValueFilter=r})(i=t.filter||(t.filter={}))})(i=t.sheet||(t.sheet={}))})(t=n.grid||(n.grid={}))})(wijmo||(wijmo={}));__extends=this&&this.__extends||function(n,t){function r(){this.constructor=n}for(var i in t)t.hasOwnProperty(i)&&(n[i]=t[i]);n.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r)},function(n){var t;(function(t){var i;(function(t){var i;(function(i){'use strict';var r=function(n){function i(){n.apply(this,arguments)}return __extends(i,n),i.prototype.updateEditor=function(){var o=this.filter.column,u=o.grid,s=o.index,r=[],h={},c,f,e,l,i;if(this.filter.uniqueValues){n.prototype.updateEditor.call(this);return}for(i=0;i<u.rows.length;i++)(c=u.getCellValue(i,s),f=u.getCellValue(i,s,!0),u.rows[i]instanceof t.HeaderRow||!u.rows[i].visible)||h[f]||(h[f]=!0,r.push({value:c,text:f}));if(e=this.filter.showValues,e&&Object.keys(e).length!=0){for(l in e)for(i=0;i<r.length;i++)if(r[i].text==l){r[i].show=!0;break}}else for(i=0;i<r.length;i++)r[i].show=!0;this._lbValues.isContentHtml=o.isContentHtml;this._cmbFilter.text=this.filter.filterText;this._filterText=this._cmbFilter.text.toLowerCase();this._view.pageSize=this.filter.maxValues;this._view.sourceCollection=r;this._view.moveCurrentToPosition(-1)},i}(n.grid.filter.ValueFilterEditor);i.FlexSheetValueFilterEditor=r})(i=t.filter||(t.filter={}))})(i=t.sheet||(t.sheet={}))})(t=n.grid||(n.grid={}))}(wijmo||(wijmo={}));__extends=this&&this.__extends||function(n,t){function r(){this.constructor=n}for(var i in t)t.hasOwnProperty(i)&&(n[i]=t[i]);n.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r)},function(n){var t;(function(t){var i;(function(t){var i;(function(i){'use strict';var r=function(i){function r(){i.apply(this,arguments)}return __extends(r,i),r.prototype.apply=function(i){var u=this.column,f=u.grid,e=this.condition1,o=this.condition2,r,s,h;return(f instanceof t.FlexSheet)?this.isActive?(r=f.getCellValue(i,u.index),u.dataMap?r=u.dataMap.getDisplayValue(r):n.isDate(r)?(n.isString(e.value)||n.isString(o.value))&&(r=f.getCellValue(i,u.index,!0)):n.isNumber(r)&&(r=n.Globalize.parseFloat(f.getCellValue(i,u.index,!0))),s=e.apply(r),h=o.apply(r),e.isActive&&o.isActive?this.and?s&&h:s||h:e.isActive?s:o.isActive?h:!0):!0:!1},r}(n.grid.filter.ConditionFilter);i.FlexSheetConditionFilter=r})(i=t.filter||(t.filter={}))})(i=t.sheet||(t.sheet={}))})(t=n.grid||(n.grid={}))}(wijmo||(wijmo={}));__extends=this&&this.__extends||function(n,t){function r(){this.constructor=n}for(var i in t)t.hasOwnProperty(i)&&(n[i]=t[i]);n.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r)},function(n){var t;(function(t){var i;(function(t){var i;(function(t){'use strict';var i=function(n){function i(i,r){n.call(this,i,r);this._valueFilter=new t.FlexSheetValueFilter(r);this._conditionFilter=new t.FlexSheetConditionFilter(r)}return __extends(i,n),i}(n.grid.filter.ColumnFilter);t.FlexSheetColumnFilter=i})(i=t.filter||(t.filter={}))})(i=t.sheet||(t.sheet={}))})(t=n.grid||(n.grid={}))}(wijmo||(wijmo={}));__extends=this&&this.__extends||function(n,t){function r(){this.constructor=n}for(var i in t)t.hasOwnProperty(i)&&(n[i]=t[i]);n.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r)},function(n){var t;(function(t){var i;(function(t){var i;(function(t){'use strict';var i=function(i){function r(n,t,r){r===void 0&&(r=!0);i.call(this,n,t,r);var e=this,u,f;r&&(this._divSort.style.display='');u=this.cloneElement(this._btnAsc);f=this.cloneElement(this._btnDsc);this._btnAsc.parentNode.replaceChild(u,this._btnAsc);this._btnDsc.parentNode.replaceChild(f,this._btnDsc);u.addEventListener('click',function(n){e._sortBtnClick(n,!0)});f.addEventListener('click',function(n){e._sortBtnClick(n,!1)})}return __extends(r,i),r.prototype._showFilter=function(r){r==n.grid.filter.FilterType.Value&&this._edtVal==null&&(this._edtVal=new t.FlexSheetValueFilterEditor(this._divEdtVal,this.filter.valueFilter));i.prototype._showFilter.call(this,r)},r.prototype._sortBtnClick=function(n,t){var u=this.filter.column,i=u.grid.sortManager,r,f,e;n.preventDefault();n.stopPropagation();r=i.checkSortItemExists(u.index);r>-1?(i.sortDescriptions.moveCurrentToPosition(r),e=i.sortDescriptions.currentItem,e.ascending=t,f=-r):(i.addSortLevel(u.index,t),f=-(i.sortDescriptions.items.length-1));i.moveSortLevel(f);i.commitSort();this.updateEditor();this.onButtonClicked()},r.prototype.cloneElement=function(n){for(var t=n.cloneNode();n.firstChild;)t.appendChild(n.lastChild);return t},r}(n.grid.filter.ColumnFilterEditor);t.FlexSheetColumnFilterEditor=i})(i=t.filter||(t.filter={}))})(i=t.sheet||(t.sheet={}))})(t=n.grid||(n.grid={}))}(wijmo||(wijmo={}));__extends=this&&this.__extends||function(n,t){function r(){this.constructor=n}for(var i in t)t.hasOwnProperty(i)&&(n[i]=t[i]);n.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r)},function(n){var t;(function(t){var i;(function(i){var r;(function(r){'use strict';var u=function(u){function f(){u.apply(this,arguments)}return __extends(f,u),Object.defineProperty(f.prototype,"filterDefinition",{get:function(){for(var n,t,u,i={defaultFilterType:this.defaultFilterType,filters:[]},r=0;r<this._filters.length;r++)n=this._filters[r],n&&n.column&&(n.conditionFilter.isActive?(t=n.conditionFilter,i.filters.push({columnIndex:n.column.index,type:'condition',condition1:{operator:t.condition1.operator,value:t.condition1.value},and:t.and,condition2:{operator:t.condition2.operator,value:t.condition2.value}})):n.valueFilter.isActive&&(u=n.valueFilter,i.filters.push({columnIndex:n.column.index,type:'value',filterText:u.filterText,showValues:u.showValues})));return JSON.stringify(i)},set:function(t){var e=JSON.parse(n.asString(t)),f,r,s;for(this.clear(),this.defaultFilterType=e.defaultFilterType,f=0;f<e.filters.length;f++){var i=e.filters[f],u=this.grid.columns[i.columnIndex],o=this.getColumnFilter(u,!0);if(o)switch(i.type){case'condition':r=o.conditionFilter;r.condition1.value=u.dataType==n.DataType.Date?n.changeType(i.condition1.value,u.dataType,null):i.condition1.value;r.condition1.operator=i.condition1.operator;r.and=i.and;r.condition2.value=u.dataType==n.DataType.Date?n.changeType(i.condition2.value,u.dataType,null):i.condition2.value;r.condition2.operator=i.condition2.operator;break;case'value':s=o.valueFilter;s.filterText=i.filterText;s.showValues=i.showValues}}this.apply()},enumerable:!0,configurable:!0}),f.prototype.apply=function(){var n=this;n.grid.deferUpdate(function(){for(var r,t=0;t<n.grid.rows.length;t++)(r=n.grid.rows[t],r instanceof i.HeaderRow)||(r.visible=n._filter(t))})},f.prototype.editColumnFilter=function(i,u){var o=this,f;this.closeEditor();i=n.isString(i)?this.grid.columns.getColumn(i):n.asType(i,t.Column,!1);f=new t.CellRangeEventArgs(this.grid.cells,new t.CellRange(-1,i.index));this.onFilterChanging(f);if(!f.cancel){f.cancel=!0;var e=document.createElement('div'),a=this.getColumnFilter(i),h=new r.FlexSheetColumnFilterEditor(e,a,this.showSortButtons);n.addClass(e,'wj-dropdown-panel');this.grid._rtl&&(e.dir='rtl');h.filterChanged.addHandler(function(){f.cancel=!1;setTimeout(function(){f.cancel||o.apply()})});h.buttonClicked.addHandler(function(){o.closeEditor();o.onFilterChanged(f)});h.lostFocus.addHandler(function(){setTimeout(function(){var t=n.Control.getControl(o._divEdt);t&&!t.containsFocus()&&o.closeEditor()},10)});var l=this.grid.columnHeaders,v=u?u.row:l.rows.length-1,y=u?u.col:i.index,s=l.getCellBoundingRect(v,y),c=document.elementFromPoint(s.left+s.width/2,s.top+s.height/2);c=n.closest(c,'.wj-cell');c?n.showPopup(e,c,!1,!1,!1):n.showPopup(e,s);h.focus();this._divEdt=e;this._edtCol=i}},f.prototype.getColumnFilter=function(i,u){var f,e;for(u===void 0&&(u=!0),n.isString(i)?i=this.grid.columns.getColumn(i):n.isNumber(i)&&(i=this.grid.columns[i]),i=n.asType(i,t.Column),f=0;f<this._filters.length;f++)if(this._filters[f].column==i)return this._filters[f];return u?(e=new r.FlexSheetColumnFilter(this,i),this._filters.push(e),e):null},f}(n.grid.filter.FlexGridFilter);r.FlexSheetFilter=u})(r=i.filter||(i.filter={}))})(i=t.sheet||(t.sheet={}))})(t=n.grid||(n.grid={}))}(wijmo||(wijmo={}))