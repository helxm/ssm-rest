/*
    *
    * Wijmo Library 5.20162.188
    * http://wijmo.com/
    *
    * Copyright(c) GrapeCity, Inc.  All rights reserved.
    *
    * Licensed under the Wijmo Commercial License.
    * sales@wijmo.com
    * http://wijmo.com/products/wijmo-5/license/
    *
    */
var __extends=this&&this.__extends||function(n,t){function r(){this.constructor=n}for(var i in t)t.hasOwnProperty(i)&&(n[i]=t[i]);n.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r)},wijmo;(function(n){var t;(function(t){var i;(function(i){'use strict';var r=function(r){function u(n,t){r.call(this,n,t);this._processedData=[];this._legendLabels=[];this._level=1;this._sliceIndex=0;this._selectionIndex=0;this.applyTemplate('wj-sunburst',null,null)}return __extends(u,r),Object.defineProperty(u.prototype,"bindingName",{get:function(){return this._bindName},set:function(t){t!=this._bindName&&(n.assert(t==null||n.isArray(t)||n.isString(t),'bindingName should be an array or a string.'),this._bindName=t,this._bindChart())},enumerable:!0,configurable:!0}),Object.defineProperty(u.prototype,"childItemsPath",{get:function(){return this._childItemsPath},set:function(t){t!=this._childItemsPath&&(n.assert(t==null||n.isArray(t)||n.isString(t),'childItemsPath should be an array or a string.'),this._childItemsPath=t,this._bindChart())},enumerable:!0,configurable:!0}),u.prototype._initData=function(){r.prototype._initData.call(this);this._processedData=[];this._level=1;this._legendLabels=[]},u.prototype._performBind=function(){var t=this,n;this._initData();this._cv&&(n=this._cv.items,n&&(this._processedData=i.HierarchicalUtil.parseDataToHierarchical(n,this.binding,this.bindingName,this.childItemsPath),this._sum=this._calculateValueAndLevel(this._processedData,1),this._processedData.forEach(function(n){t._legendLabels.push(n.name)})))},u.prototype._calculateValueAndLevel=function(n,t){var i=this,r=0,u=this._values,f=this._labels;return this._level<t&&(this._level=t),n.forEach(function(n){var e;n.items?(e=i._calculateValueAndLevel(n.items,t+1),n.value=e,u.push(e),f.push(n.name)):(e=i._getBindData(n,u,f,'value','name'),n.value=e);r+=e}),r},u.prototype._renderPie=function(n,t,i,r,u){var f=this._getCenter();this._sliceIndex=0;this._renderHierarchicalSlices(n,f.x,f.y,this._processedData,this._sum,t,i,r,2*Math.PI,u,1)},u.prototype._renderHierarchicalSlices=function(n,t,i,r,u,f,e,o,s,h,c){var rt=r.length,a=o,g=this.reversed==!0,nt,tt,d,l,y,p,it,w,b,k,v;for(d=(f-e)/this._level,nt=f-(this._level-c)*d,tt=e+(c-1)*d,v=0;v<rt;v++)w=t,b=i,it=n.startGroup('slice-level'+c),c===1&&(n.fill=this._getColorLight(v),n.stroke=this._getColor(v)),y=r[v],p=Math.abs(y.value),l=Math.abs(p-u)<1e-10?s:s*p/u,k=g?a-.5*l:a+.5*l,h>0&&l<s&&(w+=h*Math.cos(k),b+=h*Math.sin(k)),y.items&&this._renderHierarchicalSlices(n,w,b,y.items,p,f,e,a,l,0,c+1),this._renderSlice(n,w,b,k,this._sliceIndex,nt,tt,a,l,s),this._sliceIndex++,g?a-=l:a+=l,n.endGroup(),this._pels.push(it)},u.prototype._getLabelsForLegend=function(){return this._legendLabels||[]},u.prototype._highlightCurrent=function(){this.selectionMode!=t.SelectionMode.None&&this._highlight(!0,this._selectionIndex)},u}(t.FlexPie);i.Sunburst=r})(i=t.hierarchical||(t.hierarchical={}))})(t=n.chart||(n.chart={}))})(wijmo||(wijmo={})),function(n){var t;(function(t){var i;(function(t){'use strict';var i=function(){function t(){}return t.parseDataToHierarchical=function(i,r,u,f){var e=[],o;return i.length>0&&(n.isString(u)&&u.indexOf(',')>-1&&(u=u.split(',')),f?e=t.parseItems(i,r,u,f):(o=t.ConvertFlatData(i,r,u),e=t.parseItems(o,'value',u,'items'))),e},t.parseItems=function(n,i,r,u){for(var e=[],o=n.length,f=0;f<o;f++)e.push(t.parseItem(n[f],i,r,u));return e},t.isFlatItem=function(t,i){return n.isArray(t[i])?!1:!0},t.ConvertFlatData=function(n,i,r){for(var f=[],e={},o,s=n.length,u=0;u<s;u++)o=n[u],t.ConvertFlatItem(e,o,i,r);return t.ConvertFlatToHierarchical(f,e),f},t.ConvertFlatToHierarchical=function(n,i){var r=i.flatDataOrder;r&&r.forEach(function(r){var u={},f=i[r],e;u[i.field]=r;f.flatDataOrder?(e=[],t.ConvertFlatToHierarchical(e,f),u.items=e):u.value=f;n.push(u)})},t.ConvertFlatItem=function(n,i,r,u){var e,o,f,s,h;return(e=u.slice(),o=e.shift().trim(),f=i[o],f==null)?!1:(e.length===0?(n[f]=i[r],n.flatDataOrder?n.flatDataOrder.push(f):n.flatDataOrder=[f],n.field=o):(n[f]==null&&(n[f]={},n.flatDataOrder?n.flatDataOrder.push(f):n.flatDataOrder=[f],n.field=o),s=n[f],h=t.ConvertFlatItem(s,i,r,e),h||(n[f]=i[r])),!0)},t.parseItem=function(i,r,u,f){var e={},h,l,o,c,s;return n.isArray(f)?(s=f.slice(),c=s.length?s.shift().trim():''):(s=f,c=f),n.isArray(u)?(h=u.slice(),l=h.shift().trim(),e.nameField=l,e.name=i[l],o=i[c],h.length===0?e.value=i[r]:o&&n.isArray(o)?e.items=t.parseItems(o,r,h,s):e.value=i[r]):(e.nameField=u,e.name=i[u],o=i[c],o!=null&&n.isArray(o)?e.items=t.parseItems(o,r,u,s):e.value=i[r]),e},t.parseFlatItem=function(n){n.items||(n.items=[])},t}();t.HierarchicalUtil=i})(i=t.hierarchical||(t.hierarchical={}))})(t=n.chart||(n.chart={}))}(wijmo||(wijmo={}))